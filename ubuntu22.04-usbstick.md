---

# set gnome online acount and livepath

`/usr/libexec/gnome-initial-setup --existing-user`

---

# 存档系统和还原

如果有EFI分区，也要备份，并记录uuid。可以在gparted里清除esp和boot标志，自动挂载备份。

## 查看uuid

```
lsblk -f
ll /dev/disk/by-uuid/
blkid
```

## 备份还原系统分区例子（ACL权限要添加）

```
su
tar xvpf e93f7f27-d29a-4a58-bbec-243395df32ad.tar -C /media/andreas/e93f7f27-d29a-4a58-bbec-243395df32ad --strip-components 3 --acls

因为压缩包里面的多余3层目录，所以加 --strip-components 3
tar cvpf e93f7f27-d29a-4a58-bbec-243395df32ad.tar /media/andreas/e93f7f27-d29a-4a58-bbec-243395df32ad --acls


如果要解决这个问题
tar --acls -cvpf e93f7f27-d29a-4a58-bbec-243395df32ad.tar -C /media/andreas/e93f7f27-d29a-4a58-bbec-243395df32ad .
再用这个命令解压
tar --acls -xvpf e93f7f27-d29a-4a58-bbec-243395df32ad.tar -C /media/andreas/e93f7f27-d29a-4a58-bbec-243395df32ad
```

---

# 还原ext2/ext3/ext4文件系统分区的uuid

```
sudo tune2fs -U f5cd428a-7bcc-4026-80b7-9f570e5966cf /dev/sda2
```

创建fat32件系统分区的时候，可以定于uuid

```
mkdosfs -i ABCD1234 /dev/sdc1
```

## 读取 fat32 分区的 uuid，sdx1 根据实际替换

The volume ID of FAT32 is stored in the first sector at offset 67 (0x43), for FAT16 it's at 39 (0x27). One can use the dd command to read it (replace /dev/sdc1 with your real partition):

```
sudo dd bs=1 skip=67 count=4 if=/dev/sdx1 2>/dev/null \
| xxd -plain -u \
| sed -r 's/(..)(..)(..)(..)/\4\3-\2\1/'
```

## 写入 新uuid 到 fat32 分区，sdx1 根据实际替换

And, of course, one can also store a new UUID (replace 1234-ABCD with your desired value):

```
UUID="1234-ABCD"
printf "\x${UUID:7:2}\x${UUID:5:2}\x${UUID:2:2}\x${UUID:0:2}" \
| sudo dd bs=1 seek=67 count=4 conv=notrunc of=/dev/sdx1
```

---

# 恢复grub

```
sudo grub-install /dev/sdx --efi-directory=/mnt/boot/efi --boot-directory=/mnt/boot --removable
```

---

# 加载ubuntu的iso镜像

grub4dos

```
title Ubuntu Livd CD
root(hd0,1)
kernel (hd0,1)/boot/vmlinuz boot=casper iso-scan/filename=/boot/ubuntu-16.04.4-desktop-amd64.iso
 locale=zh_CN.UTF-8
initrd (hd0,1)/boot/initrd.lz
```

```
title Boot Ubuntu
root (hd1,1)
kernel (hd1,1)/boot/vmlinuz-4.9.0-0.bpo.3-amd64 root=/dev/sda2 ro quiet
initrd (hd1,1)/boot/initrd.img-4.9.0-0.bpo.3-amd64
```

```
1.grub> loopback loop (hd0,1)/ubuntu.iso
2.grub> set root=(loop)
3.grub> linux /casper/vmlinuz boot=casper iso-scan/filename=/ubuntu.iso
4.grub> initrd /casper/initrd.lz
5.grub> boot
```

原生grub/grub2
`sudo gedit /boot/grub/grub.cfg`
添加

```
menuentry "ubuntu iso install" {
    loopback loop (hd0,1)/ubuntu.iso
    set root=(loop)
    linux /casper/vmlinuz boot=casper iso-scan/filename=/ubuntu.iso
    initrd /casper/initrd.lz
}
```

或者参考

```
mv /etc/grub.d/40_custom /etc/grub.d/40_custom_bak
chmod u-x /etc/grub.d/40_custom_bak
sudo gedit /etc/grub.d/40_custom
```

```
#!/bin/sh
 exec tail -n +3 $0
 # This file provides an easy way to add custom menu entries.  Simp    ly type the
 # menu entries you want to add after this comment.  Be careful not     to change
 # the 'exec tail' line above.
 menuentry "Ubuntukylin 14.04 ISO" {
          insmod ntfs
          insmod iso9660
          set isofile="/download/ubuntukylin-14.04-desktop-amd64.iso"
          loopback loop (hd0,msdos6)$isofile
          linux (loop)/casper/vmlinuz.efi boot=casper iso-scan/filename=$isofile noprompt noeject
          initrd (loop)/casper/initrd.lz
  }
```

如果不是放在ntfs分区就不需要 `insmod ntfs`

isofile这里是从分区出发的，比如如果home是单独分区的话，而iso又存放在了比如"/home/username/download/ubuntu-14.04.iso",用下面这行替换

```
set isofile="/username/download/ubuntu-14.04.iso"
```

在live-cd安装时先
`sudo umount -l /isodevice`

---

# sudo

```
To run a command as administrator (user "root"), use "sudo <command>".
See "man sudo_root" for details.
```

sudo配置分析
`$ sudo cat etc/sudoers`

```
# Allow members of group sudo to execute any command
%sudo	ALL=(ALL:ALL) ALL
```

看看sudo用户在不在sudo组
`$ sudo cat /etc/group | grep sudo`

# Ubuntu下让date命令显示英语日期

no effect
`$ env LANG=en_US.UTF-8 date`

`$ cat /etc/default/locale`

```
#  File generated by update-locale
LANG="en_US.UTF-8"
LC_NUMERIC="zh_CN.UTF-8"
LC_TIME="zh_CN.UTF-8"
LC_MONETARY="zh_CN.UTF-8"
LC_PAPER="zh_CN.UTF-8"
LC_NAME="zh_CN.UTF-8"
LC_ADDRESS="zh_CN.UTF-8"
LC_TELEPHONE="zh_CN.UTF-8"
LC_MEASUREMENT="zh_CN.UTF-8"
LC_IDENTIFICATION="zh_CN.UTF-8"
```

`sudo sed -e 's/^LC_TIME.*/LC_TIME="en_US.UTF-8"/' -i /etc/default/locale`

then take effect after re-login

[https://www.cnblogs.com/majestyking/p/11522868.html](https://www.cnblogs.com/majestyking/p/11522868.html)
[https://www.linuxdiyf.com/linux/29771.html](https://www.linuxdiyf.com/linux/29771.html)

---

# 修改 bash 显示风格

```
$ gedit ~/.bashrc
```

```
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$ '
```

修改为

```
PS1='${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\n\$ '
```

其他效果

```
PS1="\[\e]0;\w\a\]\n\[\e[32m\]\u@\h \[\e[33m\]\w\[\e[0m\]\n\$ "
```

---

# time zoom

Current default time zone: 'Asia/Shanghai'
Local time is now:      Tue Oct 10 12:44:23 CST 2023.
Universal Time is now:  Tue Oct 10 04:44:23 UTC 2023.
Run 'sudo dpkg-reconfigure tzdata' if you wish to change it

# vim

```
$ sudo apt install vim vim-runtime universal-ctags vim-doc vim-scripts
```

```
Suggested packages:
  perlsgml libtemplate-perl indent
```

```
$ sudo apt install vim-addon-manager

The following additional packages will be installed:
  fonts-lato libruby3.0 rake ruby ruby-net-telnet ruby-rubygems ruby-webrick ruby-xmlrpc ruby3.0 rubygems-integration
Suggested packages:
  apache2 | lighttpd | httpd ri ruby-dev bundler
```

```
$ sudo apt install vim-gtk3 ubuntu-minimal vim vim-addon-manager vim-common vim-scripts vim-gtk cscope

The following additional packages will be installed:
  vim-common vim-gui-common
```

```
$ sudo apt-get install vim universal-ctags vim-doc vim-scripts cscope
The following additional packages will be installed:
  liblua5.2-0 vim-gui-common
Suggested packages:
  cscope-el fonts-dejavu gnome-icon-theme
```

```
$ sudo apt install vim vim-doc vim-scripts exuberant-ctags libtemplate-perl ispell vim-addon-manager cscope

cscope is already the newest version (15.9-1).
vim-addon-manager is already the newest version (0.5.10).
vim-scripts is already the newest version (20210124.2).
vim is already the newest version (2:8.2.3995-1ubuntu2.1).
vim-doc is already the newest version (2:8.2.3995-1ubuntu2.1).
The following additional packages will be installed:
  iamerican ienglish-common libappconfig-perl
Suggested packages:
  spell libtemplate-plugin-gd-perl libtemplate-plugin-xml-perl
```

```
$ sudo update-alternatives --config vim
选gtk3
```

---

# apt-get 操作 / apt 操作

```
man dpkg
man apt
man apt-get
```

upgrade有可能需要覆盖，一般不常用覆盖

```
sudo apt-get -o Dpkg::Options::=--force-overwrite install xxx
```

重新安装xxx及配置文件

```
sudo apt-get -o DPkg::options::=--force-confmiss --reinstall install xxx
sudo apt-get -o DPkg::options::=--force-confnew --reinstall install xxx
sudo apt-get -o DPkg::options::=--force-confold --reinstall install xxx
```

Recommends are installed by default (since Lucid).

```
$ sudo apt-get --install-recommends install xxx
==
$ sudo apt-get -o APT::Install-Recommends="true" install xxx
```

To negate this for a specific package, use

```
$ sudo apt-get --no-install-recommends install xxx
```

```
$ sudo apt-get --install-suggests install xxx
==
$ sudo apt-get -o APT::Install-Suggests="true" install xxx 
```

You can make this the default behaviour by putting

```
APT::Install-Suggests "true"
```

in file `/etc/apt/apt.conf.d/30install-suggests`

批量安装

```
sudo apt-get -y  -o Dpkg::Options::="--force-overwrite" install $(cat pkg_list.txt)
```

Uninstall xxx And Its Dependencies

```
sudo apt-get autoremove xxx
```

Remove xxx Configurations and Data

```
sudo apt-get purge xxx
```

Remove qt6-base-dev configuration, data, and all of its dependencies

```
sudo apt-get autoremove --purge xxx
```

The officially recommended command for Ubuntu 16.04 and beyond is apt instead of apt-get

`apt full-upgrade` performs the same function as `apt-get dist-upgrade`

依赖被依赖都查看

```
$ apt-cache showpkg xxx
```

依赖什么包

```
$ apt-cache depends xxx
```

被什么包依赖

```
$ apt-cache rdepends xxx
$ aptitude why xxx
```

自定安装了啥

```
$ apt-mark showauto
$ apt-mark showauto xxx
$ apt-mark showhold
```

Remove Old PPA

```
$ sudo apt-get autoremove --purge PACKAGENAME
$ sudo apt-get install ppa-purge
$ sudo add-apt-repository -remove ppa:someppa/ppa
$ sudo apt-get autoclean
```

清理缓存

```
$ sudo apt-get autoclean //清理旧版本的软件缓存
$ sudo apt-get clean //清理所有软件缓存
$ sudo apt-get autoremove  //删除系统不再使用的孤立软件
```

清除rc标记的包

```
dpkg -l |grep ^rc|awk '{print $2}' |sudo xargs dpkg -P
```

查询可升级的包

```
$ sudo apt update
$ apt list --upgradable
```

---

# git

```
sudo apt install git git-gui gitk git-svn meld subversion xxdiff
```

```
git config --global user.name "name"
git config --global user.email "name@xxx.com"
git config --global core.autocrl false
git config --global core.fileMode false
git config --global merge.ff false
git config --global pull.ff true
```

---

# openssh

```
$ sudo apt install openssh-server
```

```
The following additional packages will be installed:
  ncurses-term openssh-sftp-server ssh-import-id
Suggested packages:
  molly-guard monkeysphere ssh-askpass

Created symlink /etc/systemd/system/sshd.service → /lib/systemd/system/ssh.servi
ce.
Created symlink /etc/systemd/system/multi-user.target.wants/ssh.service → /lib/s
ystemd/system/ssh.service.
```

```
Creating config file /etc/ssh/sshd_config with new version
Creating SSH2 RSA key; this may take some time ...
3072 SHA256:gg2OY9UlLpXuWo6S7goGPyaWBfwWD8c3aeSxXGE9PV0 root@andy-usbstick (RSA)
Creating SSH2 ECDSA key; this may take some time ...
256 SHA256:b5o62/Kotzq7gdUrdZyHn0WBAYOAKouDTjHbn34lJPI root@andy-usbstick (ECDSA)
Creating SSH2 ED25519 key; this may take some time ...
256 SHA256:s02D3Tyljg7qLYal4b/lOVuo5rAKg1hixbm3imI4HWE root@andy-usbstick (ED25519)
Created symlink /etc/systemd/system/sshd.service → /lib/systemd/system/ssh.service.
Created symlink /etc/systemd/system/multi-user.target.wants/ssh.service → /lib/systemd/system/ssh.service.
rescue-ssh.target is a disabled or a static unit, not starting it.
ssh.socket is a disabled or a static unit, not starting it.
Setting up ssh-import-id (5.11-0ubuntu1) ...
Setting up ncurses-term (6.3-2) ...
```

# rootlogin.sh

ubuntu22.04桌面版开启root用户登陆并开启root用户远程ssh连接
[https://blog.csdn.net/w553692064/article/details/127145272](https://blog.csdn.net/w553692064/article/details/127145272)

```
#!/bin/bash

# set root passwd
sudo passwd root

# notes Document content
sudo sed -i "s/.*root quiet_success$/#&/" /etc/pam.d/gdm-autologin
sudo sed -i "s/.*root quiet_success$/#&/" /etc/pam.d/gdm-password

#modify profile
sudo sed -i 's/^mesg.*/tty -s \&\& mesg n \|\| true/' /root/.profile

# install openssh
sudo apt install openssh-server
sudo apt autoremove

# delay
sleep 1

# modify conf
sudo sed -i 's/^#PermitRootLogin.*/PermitRootLogin yes/' /etc/ssh/sshd_config

# restart server
sudo systemctl restart ssh
sudo systemctl status ssh
```

`$ sudo cat /root/.profile`

```
# ~/.profile: executed by Bourne-compatible login shells.

if [ "$BASH" ]; then
  if [ -f ~/.bashrc ]; then
    . ~/.bashrc
  fi
fi

mesg n 2> /dev/null || true
```

change to

```
# ~/.profile: executed by Bourne-compatible login shells.

if [ "$BASH" ]; then
  if [ -f ~/.bashrc ]; then
    . ~/.bashrc
  fi
fi

tty -s && mesg n || true
```

change /etc/ssh/sshd_config

```
#PermitRootLogin prohibit-password
```

to

```
PermitRootLogin yes
```

---

# apt / aptitude

`sudo apt update && sudo apt upgrade -yuf`

`sudo apt install aptitude apt-file`

```
The following additional packages will be installed:
  aptitude-common libapt-pkg-perl libcwidget4 libdpkg-perl
  libexporter-tiny-perl libfile-fcntllock-perl liblist-moreutils-perl
  liblist-moreutils-xs-perl libregexp-assemble-perl libxapian30
```

```
$ apt-file search /etc/proxychains.conf
Finding relevant cache files to search ...E: The cache is empty. You need to run "apt-file update" first.
```

`sudo apt-file update`

`$ dpkg -S /etc/proxychains.conf`

## APT news

```
Use 'pro config set apt_news=false' to hide this and future APT news.
```

## ubuntu pkg search

[https://packages.ubuntu.com/search](https://packages.ubuntu.com/search)

## apt history

input apt cmds
`cat /var/log/apt/history.log`
process output
`cat /var/log/apt/term.log`

---

# save etc-cut1.tar.xz

```
$ systemd-analyze blame
6.421s NetworkManager-wait-online.service
2.651s plymouth-quit-wait.service
1.341s snapd.apparmor.service
1.324s systemd-resolved.service
1.322s systemd-timesyncd.service
 462ms udisks2.service
 420ms dev-sdd2.device
 374ms snapd.service
 300ms networkd-dispatcher.service
 198ms accounts-daemon.service
 185ms dev-loop3.device
 182ms dev-loop2.device
 180ms dev-loop6.device
 178ms apparmor.service
 176ms dev-loop4.device
 170ms dev-loop5.device
 170ms dev-loop1.device
 162ms dev-loop0.device
 161ms apport.service
 161ms dev-loop7.device
 146ms polkit.service
 145ms avahi-daemon.service
 144ms power-profiles-daemon.service
 142ms NetworkManager.service
 138ms switcheroo-control.service
 135ms user@1000.service
 124ms systemd-udev-trigger.service
 121ms systemd-tmpfiles-setup.service
 118ms systemd-udevd.service
 111ms wpa_supplicant.service
 111ms thermald.service
 109ms systemd-logind.service
  99ms systemd-fsck@dev-disk-by\x2duuid-BF74\x2d2B72.service
  97ms systemd-oomd.service
  97ms e2scrub_reap.service
  93ms gpu-manager.service
  90ms ModemManager.service
  88ms systemd-journald.service
  87ms modprobe@chromeos_pstore.service
  86ms systemd-rfkill.service
  81ms console-setup.service
  79ms snapd.seeded.service
  76ms systemd-journal-flush.service
  76ms systemd-modules-load.service
  74ms geoclue.service
  74ms plymouth-read-write.service
  72ms keyboard-setup.service
  71ms cups.service
  66ms grub-common.service
  61ms rtkit-daemon.service
  60ms ssh.service
  59ms gdm.service
  55ms upower.service
  41ms ufw.service
  38ms packagekit.service
  36ms dev-hugepages.mount
  35ms rsyslog.service
  35ms dev-mqueue.mount
  34ms sys-kernel-debug.mount
  34ms sys-kernel-tracing.mount
  31ms kmod-static-nodes.service
  31ms modprobe@drm.service
  30ms modprobe@configfs.service
  29ms modprobe@pstore_blk.service
  28ms modprobe@efi_pstore.service
  28ms modprobe@fuse.service
  28ms modprobe@pstore_zone.service
  28ms modprobe@ramoops.service
  25ms boot-efi.mount
  23ms grub-initrd-fallback.service
  21ms systemd-sysctl.service
  19ms plymouth-start.service
  19ms colord.service
  18ms alsa-restore.service
  18ms systemd-remount-fs.service
  18ms systemd-pstore.service
  16ms snap-bare-5.mount
  15ms snap-core20-1587.mount
  14ms kerneloops.service
  14ms snap-firefox-1635.mount
  13ms systemd-backlight@backlight:intel_backlight.service
  13ms snap-gnome\x2d3\x2d38\x2d2004-112.mount
  11ms systemd-update-utmp.service
  11ms snap-gtk\x2dcommon\x2dthemes-1535.mount
  10ms snap-snap\x2dstore-582.mount
  10ms systemd-sysusers.service
   9ms snap-snapd-16292.mount
   9ms user-runtime-dir@1000.service
   9ms systemd-tmpfiles-setup-dev.service
   8ms snap-snapd\x2ddesktop\x2dintegration-14.mount
   8ms openvpn.service
   8ms proc-sys-fs-binfmt_misc.mount
   7ms systemd-random-seed.service
   6ms systemd-update-utmp-runlevel.service
   4ms sys-fs-fuse-connections.mount
   4ms systemd-user-sessions.service
   4ms sys-kernel-config.mount
   1ms setvtrgb.service
 626us snapd.socket
```

---

# 安装drawio

https://github.com/jgraph/drawio-desktop/releases/

```
$ sudo dpkg -i drawio-amd64-27.0.2.deb
(Reading database ... 762879 files and directories currently installed.)
Preparing to unpack drawio-amd64-27.0.2.deb ...
Unpacking draw.io (27.0.2) over (21.2.8) ...
Setting up draw.io (27.0.2) ...
update-alternatives is /usr/bin/update-alternatives
Skipping the installation of the AppArmor profile as this version of AppArmor does not seem to support the bundled profile
Processing triggers for shared-mime-info (2.1-2) ...
Processing triggers for mate-menus (1.26.0-2ubuntu2) ...
Processing triggers for bamfdaemon (0.5.6+22.04.20220217-0ubuntu1) ...
Rebuilding /usr/share/applications/bamf-2.index...
Processing triggers for mailcap (3.70+nmu1ubuntu1) ...
Processing triggers for gnome-menus (3.36.0-1ubuntu3) ...
Processing triggers for desktop-file-utils (0.26-1ubuntu3) ...
Processing triggers for hicolor-icon-theme (0.17-2) ...
```

修改/usr/share/applications/drawio.desktop

```
[Desktop Entry]
Name=draw.io
Exec=/opt/draw.io/drawio %f
Terminal=false
Type=Application
Icon=drawio
StartupWMClass=draw.io
Comment=diagrams.net desktop
MimeType=application/vnd.jgraph.mxfile;application/vnd.visio;
Categories=Graphics;
```

并且mimeapp有

```
application/vnd.jgraph.mxfile=drawio.desktop;
```

就可以双击打开drawio文件

这里修改了desktop文件的占位符

---

# vscode

don't install by snap, using deb package or apt-repo

```
$ cat /etc/apt/sources.list.d/vscode.list 
### THIS FILE IS AUTOMATICALLY CONFIGURED ###
# You may comment out this entry, but any other modifications may be lost.
deb [arch=amd64,arm64,armhf] http://packages.microsoft.com/repos/code stable main
```

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys EB3E94ADBE1229CF
```

插件

```
outline: AL code outline, Outline map
bash: bash debug, bash beautify, bash ide
c/c++: c/c++, c/c++ Themes, c/c++ extension pack, cmake(至少安装了cmake 和 cmake-gui)， cmake tools
flowchart: flowchart, code flowchart
java: extension pack for java, debugger for java, project manager for java, maven for java, test runner for java, ...by red hat, gradle for java
docker: docker, dev container
doxygen: doxygen documentation generator
drawio: drawio integration, RTL plugin, wavedrom plugin
markdown: markdown, markdown all in one, markdown pdf, markdown preview enhanced, Markdown Checkboxes, Markdown Emoji, Markdown Paste, Markdown Preview Github Styling, Markdown Shortcuts, Markdown TOC, Markdown Math, Markdown+Math, markdownlint, Office Viewer, Excel to Markdown table, Markdown Table Prettifier, Graphviz Markdown Preview
git: Git Graph, Git History, GitLens — Git supercharged
python: isort, Jupyter, Jupyter Slide Show, Jupyter Keymap, Jupyter Cell Tags, py2flowchart, PYQT Integration, Tabnine AI Autocomplete
kotlin: Kotlin Language
path: Path Intellisense, Path Autocomplete
ppm: PBM/PPM/PGM Viewer for Visual Studio Code
pdf: vscode-pdf, PDF Viewer
ssh: Remote - SSH
svn: SVN
tcl: TCL
verilog: Verilog-HDL/SystemVerilog/Bluespec SystemVerilog
VHDL: VHDL by VHDLwhiz, VHDL
Vim: Vim(disable it)
other: EditorConfig for VS Code
```

---

# bcompare

apt-repo

```
$ cat /etc/apt/sources.list.d/scootersoftware.list 
deb https://www.scootersoftware.com/ bcompare4 non-free
```

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 331D6DDE7F8840CE
```

这时候把俺要用的scrpits放到老位置
---------------------------------

# v2ray

科^学%上$网, FUCK CCP!!

原始的go.sh脚本需要修改, 已经修改好的go_mod.sh
`sudo ./go_mod.sh`
v2ray-linux-64.zip下载到相同目录就可以安装到本机, 然后

```
sudo gedit /etc/v2ray/config.json
sudo systemctl enable v2ray.service
sudo systemctl start v2ray.service
sudo systemctl restart v2ray.service
```

---

# opera

```
$ sudo dpkg -i opera-stable_90.0.4480.84_amd64.deb
$ cat /etc/apt/sources.list.d/opera-stable.list 
# This file makes sure that Opera Browser is kept up-to-date
# as part of regular system upgrades

deb https://deb.opera.com/opera-stable/ stable non-free #Opera Browser (final releases)
```

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys DD3C368A8DE1B7A0
```

```
W: http://packages.microsoft.com/repos/code/dists/stable/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
W: https://deb.opera.com/opera-stable/dists/stable/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
W: https://www.scootersoftware.com/dists/bcompare4/Release.gpg: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
then just keep EB3E94ADBE1229CF key in /etc/apt/trusted.gpg
```

```
$ sudo apt update
$ sudo apt upgrade
$ sudo apt install bcompare opera-stable code
```

`opera://settings`

`opera://extensions`

load SwitchyOmega_Chromium folder and set/load config, then update crx of SwitchyOmega

```
127.0.0.1:10808
https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt

https://clients2.google.com/service/update2/crx?response=redirect&os=linux&arch=x86-64&nacl_arch=x86-64&prod=chromiumcrx&prodchannel=unknown&prodversion=84.0.4147.135&acceptformat=crx2%2Ccrx3&x=id%3Dpadekgcemlokbadohgkifijomclgjgif%26uc
```

don't login opera account for now

---

extensions:

```
Opera Ad Blocker(disable)
Proxy SwitchyOmega
AdBlock — best ad blocker
DownThemAll!
Install Chrome Extensions(DEPRECATED)
Enhancer for Telegram
Tampermonkey
Telegram Browser  
TICloudAgent Bridge(disable)
Video Downloader VeeVee
Video Downloader for Chrome
Video Downloader Pro
Video Downloader Professional
Web Scraper
```

# fcitx

fcitx5
[https://fcitx-im.org/wiki/Fcitx_5](https://fcitx-im.org/wiki/Fcitx_5)
[https://fcitx-im.org/wiki/Install_Fcitx_5](https://fcitx-im.org/wiki/Install_Fcitx_5)
[https://fcitx-im.org/wiki/Input_method_engines](https://fcitx-im.org/wiki/Input_method_engines)
[https://fcitx-im.org/wiki/Setup_Fcitx_5](https://fcitx-im.org/wiki/Setup_Fcitx_5)
[https://fcitx-im.org/wiki/Configtool_(Fcitx_5)](https://fcitx-im.org/wiki/Configtool_(Fcitx_5))
[https://zhuanlan.zhihu.com/p/508797663](https://zhuanlan.zhihu.com/p/508797663)

fcitx
[https://wiki.archlinux.org/title/fcitx](https://wiki.archlinux.org/title/fcitx)
[https://installati.one/install-fcitx-ubuntu-22-04/](https://installati.one/install-fcitx-ubuntu-22-04/)

choose fcitx(not fcitx5)

```
sudo apt install fcitx fcitx-bin fcitx-data fcitx-tools fcitx-table fcitx-table-all fcitx-modules fcitx-module-dbus fcitx-config-gtk fcitx-frontend-gtk2 fcitx-ui-classic fcitx-googlepinyin fcitx-table-wubi fcitx-sunpinyin
```

```
The following additional packages will be installed:
  dbus-x11 fcitx-config-common fcitx-frontend-all fcitx-frontend-gtk3
  fcitx-frontend-qt5 fcitx-module-kimpanel fcitx-module-lua
  fcitx-module-quickphrase-editor5 fcitx-module-x11 fcitx-pinyin
  fcitx-table-bingchan fcitx-table-cangjie fcitx-table-dianbaoma
  fcitx-table-erbi fcitx-table-wanfeng fcitx-table-wbpy fcitx-table-ziranma
  libdouble-conversion3 libfcitx-config4 libfcitx-core0 libfcitx-gclient1
  libfcitx-qt5-1 libfcitx-qt5-data libfcitx-utils0 libgettextpo0
  libgooglepinyin0 liblua5.2-0 libmd4c0 libpcre2-16-0 libpresage-data
  libpresage1v5 libqt5core5a libqt5dbus5 libqt5gui5 libqt5network5 libqt5svg5
  libqt5widgets5 libsunpinyin3v5 libtinyxml2.6.2v5 libxcb-xinerama0
  libxcb-xinput0 presage qt5-gtk-platformtheme qttranslations5-l10n
  sunpinyin-data
Suggested packages:
  fcitx-m17n kdialog plasma-widgets-kimpanel qt5-image-formats-plugins
  qtwayland5
```

for mint-c

```
sudo apt install libfcitx-utils0 libmarisa0 gir1.2-fcitx-1.0 fcitx-config-gtk fcitx-libs libopencc1.1 fcitx-frontend-fbterm ibus-gtk3 libx86-1 ibus-table fcitx-module-kimpanel fcitx-sunpinyin python3-ibus-1.0 fcitx ibus-libpinyin fcitx-module-dbus liblua5.3-0 libpresage1v5 fcitx-modules sunpinyin-data libclutter-imcontext-0.1-0 fcitx-pinyin fbterm fonts-arphic-uming libfcitx-config4 fcitx-bin libtinyxml2.6.2v5 fcitx-module-lua libclutter-imcontext-0.1-bin fcitx-table-wubi ibus-data fcitx-module-x11 fcitx-frontend-gtk2 fcitx-frontend-gtk3 libpresage-data fcitx-config-common fcitx-tools fcitx-data libpinyin13 ibus-sunpinyin fcitx-frontend-all libpinyin-data fcitx-ui-classic libgettextpo0 libfcitx-gclient1 fcitx-frontend-qt5 ibus-gtk libfcitx-core0 ibus-table-wubi fonts-arphic-ukai ibus libsunpinyin3v5 ibus-clutter fcitx-module-cloudpinyin fcitx-table libopencc-data
```

```
sudo apt install fcitx-googlepinyin fcitx fcitx-bin fcitx-data fcitx-modules fcitx-googlepinyin fcitx-config-gtk fcitx-frontend-gtk2 fcitx-ui-classic fcitx-module-dbus
```

## 配置fcitx输入法

```
$ sudo im-config
$ im-config
```

```
Current configuration for the input method:
 * Default mode defined in /etc/default/im-config: 'auto'
 * Active configuration: 'fcitx' (normally missing)
 * Normal automatic choice: 'ibus' (normally ibus or fcitx5)
 * Override rule: 'zh_CN,fcitx5:zh_TW,fcitx5:zh_HK,fcitx5:zh_SG,fcitx5'
 * Current override choice: '' (Locale='en_US')
 * Current automatic choice: 'ibus'
 * Number of valid choices: 2 (normally 1)
 * Desktop environment: 'ubuntu:GNOME'
The configuration set by im-config is activated by re-starting the system.
Explicit selection is not required to enable the automatic configuration if the active one is default/auto/cjkv/missing.
  Available input methods: ibus fcitx xim
Unless you really need them all, please make sure to install only one input method tool.
```

```
Setting the system configuration /etc/X11/xinit/xinputrc to fcitx.
Manual configuration selects: fcitx
Flexible Input Method Framework (fcitx)
 * Required for all: fcitx
 * Language specific input conversion support:
   * Simplified Chinese: fcitx-libpinyin or fcitx-sunpinyin or fcitx-googlepinyin
   * Traditional Chinese / generic Chinese: fcitx-rime
   * Generic keyboard translation table: fcitx-table* packages
 * Application platform support:
   Installing fcitx-frontend-all will cover all GUI platforms.
   * GNOME/GTK: fcitx-frontend-gtk2 and fcitx-frontend-gtk3 (both)
   * KDE/Qt5: fcitx-frontend-qt5

The system configuration is modified by im-config.
```

autostart
`sudo cp /usr/share/fcitx/xdg/autostart/fcitx-autostart.desktop /etc/xdg/autostart/`

~/.xprofile中加入：(不要在/etc/environment)

```
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export QT4_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
export SDL_IM_MODULE=fcitx
```

~/.pam_environment

```
GTK_IM_MODULE DEFAULT=fcitx
QT_IM_MODULE DEFAULT=fcitx
QT4_IM_MODULE DEFAULT=fcitx
XMODIFIERS DEFAULT=@im=fcitx
SDL_IM_MODULE DEFAULT=fcitx
```

还需要在输入法选项里选择google-pinyin什么的

---

# wqy fonts

```
sudo apt install fonts-wqy-microhei fonts-wqy-zenhei fonts-ipafont-gothic fonts-ipafont-mincho fonts-indic fonts-freefont-ttf fonts-dejavu fonts-mathjax-extras fonts-stix fonts-freefont-otf fonts-freefont-ttf 
//sudo apt install fontconfig xfonts-utils
```

```
The following additional packages will be installed:
  cabextract fonts-dejavu-extra fonts-mathjax libmspack0
Suggested packages:
  libjs-mathjax
```

```
$ sudo apt install fonts-ipafont-gothic fonts-ipafont-mincho fonts-wqy-microhei fonts-wqy-zenhei fonts-indic
```

# ubunut-extras

```
sudo apt install ubuntu-restricted-extras ttf-mscorefonts-installer
sudo apt install ubuntu-restricted-extras ttf-mscorefonts-installer --reinstall
sudo apt install ttf-mscorefonts-installer --reinstall
```

```
The following additional packages will be installed:
  chromium-codecs-ffmpeg-extra gstreamer1.0-libav gstreamer1.0-plugins-ugly
  gstreamer1.0-vaapi i965-va-driver intel-media-va-driver liba52-0.7.4
  libaacs0 libaom3 libaribb24-0 libass9 libavcodec-extra libavcodec-extra58
  libavfilter7 libavformat58 libavutil56 libbdplus0 libblas3 libbluray2
  libbs2b0 libchromaprint1 libcodec2-1.0 libdav1d5 libdvdread8 libflite1
  libgfortran5 libgme0 libgsm1 libgstreamer-plugins-bad1.0-0 libigdgmm12
  liblapack3 liblilv-0-0 libmfx1 libmpeg2-4 libmysofa1 libnorm1
  libopencore-amrnb0 libopencore-amrwb0 libopenmpt0 libpgm-5.3-0
  libpocketsphinx3 libpostproc55 librabbitmq4 librubberband2 libserd-0-0
  libshine3 libsidplay1v5 libsnappy1v5 libsord-0-0 libsphinxbase3
  libsratom-0-0 libsrt1.4-gnutls libssh-gcrypt-4 libswresample3 libswscale5
  libudfread0 libva-drm2 libva-wayland2 libva-x11-2 libva2 libvdpau1
  libvidstab1.1 libvo-amrwbenc0 libx264-163 libx265-199 libxvidcore4 libzimg2
  libzmq5 libzvbi-common libzvbi0 mesa-va-drivers mesa-vdpau-drivers
  ocl-icd-libopencl1 pocketsphinx-en-us ubuntu-restricted-addons unrar
  va-driver-all vdpau-driver-all
Suggested packages:
  gstreamer1.0-vaapi-doc i965-va-driver-shaders libcuda1 libnvcuvid1
  libnvidia-encode1 libbluray-bdj libdvdcss2 serdi sidplay-base sordi
  opencl-icd libvdpau-va-gl1
Recommended packages:
  gstreamer1.0-fluendo-mp3

ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/andale32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/arial32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/arialb32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/comic32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/courie32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/georgi32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/impact32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/times32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/trebuc32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/verdan32.exe
ttf-mscorefonts-installer: downloading http://downloads.sourceforge.net/corefonts/webdin32.exe
```

缓存位置在
`/var/lib/update-notifier/package-data-downloads/partial/`
中断之后继续
`sudo dpkg --configure -a`

完成后

```
$ ls -l /var/lib/update-notifier/package-data-downloads/
drwx------ 2 _apt root 4096 Nov 23 14:17 partial
-rw-r--r-- 1 root root    0 Nov 23 14:17 ttf-mscorefonts-installer
```

```
run 'dpkg-reconfigure ttf-mscorefonts-installer' to perform the installation again
```

---

# anydesk

安装deb文件
附加安装 libgtkglext1
添加服务
/etc/systemd/system/multi-user.target.wants/anydesk.service → /etc/systemd/system/anydesk.service.
usbstick地址码:
`286168448`[abort]

`1439765824`

```
sudo systemctl enable anydesk.service
sudo systemctl start anydesk.service
```

设置 anydesk 无人值守

```
echo "password" | sudo anydesk --set-password
sudo systemctl restart anydesk.service 
```

---

# check boot log

```
$ sudo cat /var/log/boot.log
$ systemctl --failed
```

[https://blog.csdn.net/qq_42427109/article/details/107881734](https://blog.csdn.net/qq_42427109/article/details/107881734)
`systemd-journal`服务，`/run/log/`
`rsyslog`服务，`/var/log/`
常见的日志文件
`/var/log/messages` 绝大多数的系统日志都记录到该文件
`/var/log/secure` 所有跟安全和认证授权等日志都会记录到此文件
`/var/log/maillog` 邮件服务的日志
`/var/log/cron` crond计划任务的日志
`/var/log/boot.log` 系统启动的相关日志

```
logger "Hello World"
cat /var/log/syslog
```

`ls -lhm --full-time /var/log/journal/f9d400c5e1e8c3a8209e990d887d4ac1_bk_20190122/ | sort -k6 | head -n30`

```
total 3.5G
-rw-r-x---+ 1 root systemd-journal  64M 2018-03-28 01:36:01.010275802 +0800 system@00000000000000000000000000000000-00000000000002ca-000567d28f35cca7.journal
-rw-r-x---+ 1 root systemd-journal 8.0M 2018-03-28 01:36:01.100275802 +0800 user-65534@4ee96b2fbd8b4a82beee0402402fee03-0000000000005419-000567f7fd08bd2f.journal
-rw-r-x---+ 1 root systemd-journal  72M 2018-04-02 19:16:41.644934707 +0800 system@00000000000000000000000000000000-0000000000010a47-0005686852f561be.journal
-rw-r-x---+ 1 root systemd-journal 8.0M 2018-04-02 19:16:41.714934707 +0800 user-65534@4ee96b2fbd8b4a82beee0402402fee03-0000000000011f98-00056872cab77761.journal
-rw-r-x---+ 1 root systemd-journal  72M 2018-04-08 05:48:01.673026304 +0800 system@00000000000000000000000000000000-0000000000021c40-000568dbb97116ae.journal
-rw-r-x---+ 1 root systemd-journal  72M 2018-04-13 18:25:01.967846109 +0800 system@00000000000000000000000000000000-0000000000033800-00056949207ae8a1.journal
-rw-r-x---+ 1 root systemd-journal  72M 2018-04-18 04:12:35.385621922 +0800 system@00000000000000000000000000000000-0000000000045c3e-000569b848f6f86c.journal
```

这些都有ACL权限

查看垃圾文件
`$ sudo du -t 100M /var`

`$ journalctl --disk-usage`

`$ sudo du -hm --max-depth=1 /var/ | sort -n`

清空 `/var/log/journal`

1.用echo命令，将空字符串内容重定向到指定文件中
比如
`cd /var/log/journal/acce3a42ddb543ee8a905e2102debcc2/`
`$ sudo echo "" > system.journal`

2.journalctl 命令自动维护文件大小[详见 `journalctl`]

1）只保留近一周的日志

```
journalctl --vacuum-time=1w
```

2）只保留500MB的日志

```
journalctl --vacuum-size=500M
```

3）直接删除 /var/log/journal/ 目录下的日志文件

```
rm -rf /var/log/journal/f9d400c5e1e8c3a8209e990d887d4ac1
```

常见问题

执行 journalctl 命令时报错：`Error was encountered while opening journal files: Input/output error`

`journalctl --vacuum-time=1w`

```
Error was encountered while opening journal files: Input/output error
问题分析：日志文件损坏
解决方法：删除之前的日志，并重启 journalctl 服务
mv journal/f9d400c5e1e8c3a8209e990d887d4ac1 journal/f9d400c5e1e8c3a8209e990d887d4ac1_bk_20190122
systemctl restart systemd-journald.service
```

`/var/log/journal/` 日志目录如下

```
# ll /var/log/journal/
drwxr-sr-x  2 root systemd-journal  4096 Jan 22 11:26 f9d400c5e1e8c3a8209e990d887d4ac1
drwxr-sr-x+ 2 root systemd-journal 12288 Jan 14 15:37 f9d400c5e1e8c3a8209e990d887d4ac1_bk_20190122
```

然后，再执行 journalctl 限制日志的命令：

```
# journalctl --vacuum-time=1w
Vacuuming done, freed 0B of archived journals on disk.
 
# journalctl --vacuum-size=500M
Vacuuming done, freed 0B of archived journals on disk.

```

---

# journalctl

[https://www.itbkz.com/11591.html](https://www.itbkz.com/11591.html)
[https://zhuanlan.zhihu.com/p/410995772](https://zhuanlan.zhihu.com/p/410995772)
[http://events.jianshu.io/p/f62c65a8bfc9](http://events.jianshu.io/p/f62c65a8bfc9)

```
$ journalctl -h
$ man journalctl
```

## 查看全部日志

`$ journalctl`

## 查看错误日志

`$ journalctl -p err`

`$ journalctl -p 3`

3==err后面优先级（PRIORITY）有解释

## 最后2行错误日志

`$ journalctl -p err -n2`

## 查看报警日志

`$ journalctl -p alert`

## 最后2行报警日志

`$ journalctl -p alert -n2`

## 查看指定优先级（及其以上级别）的日志，共有8级

```
$ journalctl -F PRIORITY
4
7
5
6
3
2
```

```
0: emerg
1: alert
2: crit
3: err
4: warning
5: notice
6: info
7: debug
```

若要检查上一次引导的日志，请使用 `-b`参数筛选日记。`-b`选项仅显示上次引导后的消息。它以负数作为参数，显示以前引导的日志。
`$ journalctl -p err -b warning`

`$ journalctl _SYSTEMD_UNIT=docker.service PRIORITY=6`

## 监控日志(实时滚动显示最新日志)

`$ journalctl -f`

与 `tail -f`类似

## 动态监控，默认最后10行

`$ journalctl -xf`

## Show kernel message log 查看内核日志（不显示应用日志）

`$ journalctl -k`

## # 查看系统本次启动的日志

```
$ journalctl -b
$ journalctl -b -0
```

## 查看上一次启动的日志（需更改设置）

```
$ journalctl -b -1
$ journalctl -b -1 -p err
```

### 修改配置文件

为了避免报错

```
$ journalctl -b -1
Specifying boot ID has no effect, no persistent journal was found 
```

`sudo gedit /etc/systemd/journald.conf`

`Storage=auto`

修改为

`Storage=persistent`

重启服务生效

`$ sudo systemctl restart systemd-journald`

`$ systemctl status systemd-journald`

tips：

```
Storage参数设置值有：
1、persistent：将日志存储在/var/log/journal目录中，该目录在重新启动后仍然存在。
2、volatile：将日记存储在/run/log/journal目录中。
3、auto：rsyslog将确定使用持久性存储(persistent)还是易失性存储(volatile)，如果存在/var/log/journal目录，则rsyslog使用持久性存储，否则使用易失性存储。
```

ubuntu22.04实际上不修改也不报错，就不改呗

## Add message explanations where available and Immediately jump to the end in the pager

`$ journalctl -xe`

## 日志默认分页输出，--no-pager 改为正常的标准输出

`$ journalctl --no-pager`

## Show logs from the specified unit(按服务查询, 查看某个 Unit 的日志)

```
$ journalctl -u snapd
$ journalctl _SYSTEMD_UNIT=docker.service
$ journalctl -u nginx.service
$ journalctl -u nginx.service --since today
```

## 合并显示多个 Unit 的日志

`$ journalctl -u nginx.service -u php-fpm.service --since today`

## 实时滚动显示某个 Unit 的最新日志

`$ journalctl -u nginx.service -f`

## 以 JSON 格式（单行）输出

`$ journalctl -b -u nginx.service -o json`

## 以 JSON 格式（多行）输出，可读性更好

`$ journalctl -b -u nginx.serviceqq -o json-pretty`

`$ journalctl -p 3 -o json-pretty`

## 查看指定服务的日志

`$ journalctl /usr/lib/systemd/systemd`

## 查看指定进程的日志

`$ journalctl _PID=665`

# 查看指定用户的日志

`$ journalctl UID=33 --since today`

## 查看某个路径的脚本的日志

`$ journalctl /usr/bin/bash`

## 查看指定时间的日志

### 查看某时刻之后的日志

```
$ journalctl --since="2021-09-16 14:22:02"
$ journalctl --since "30 min ago"
```

### 获取昨天日志

```
$ journalctl --since yesterday
```

### 获取今天日志

```
$ journalctl --since today
```

### 今天10点到2小时之后的日志

```
$ journalctl --since 10:00 --until "2 hour ago"
```

### 查看从某时到某时的日志

```
$ journalctl --since "2021-01-01" --until "2021-09-16 13:40"
$ journalctl --since "2021-02-19 15:10:00" --until   "2021-02-19 15:15:00"
$ journalctl --since 07:30 --until "2 hour ago"
```

如果时间未填写，默认 00:00:00

## 显示尾部的最新10行日志

`$ journalctl -n`

## 显示尾部指定行数的日志

`$ journalctl -n 15`

## 显示日志占据的硬盘空间

`$ journalctl --disk-usage`

## 指定日志文件占据的最大空间，默认为8M

保留最新的1G日志
`$ sudo journalctl --vacuum-size=1G`

## 指定日志文件保存多久

清除一年之前的日志
`$ sudo journalctl --vacuum-time=1years`

## 配置文件一般参数说明

`/etc/systemd/journald.conf`

```
SystemMaxUse=2G
SystemKeepFree=4G
SystemMaxFileSize=100M
RuntimeMaxUse=2G
RuntimeKeepFree=4G
RuntimeMaxFileSize=100M
```

System 开头的选项就是 `/var/log/journal` 的使用量， 用于限制磁盘使用量。

Runtime" 开头的选项就是 `/run/log/journal` 的使用量， 用于限制内存使用量。

```
SystemMaxUse=
作用：持久存储占用磁盘大小限制
默认：默认值是10%空间与4G空间两者中的较小者；

RuntimeMaxUse=
作用：占用内存大小限制（/run文件系统之内）
默认：默认值是10%空间与4G空间两者中的较小者

SystemKeepFree=
作用：添加新条目时需要保留的磁盘剩余空间
默认：默认值是15%空间与4G空间两者中的较大者

RuntimeKeepFree=
作用：内存保留的剩余空间
默认：默认值是15%空间与4G空间两者中的较大者

SystemMaxFileSize=
作用：限制单个日志文件的最大体积（到达此限制后日志文件将会自动滚动）
默认： SystemMaxUse 值的1/8

RuntimeMaxFileSize=

作用：限制单个日志文件占用的内存大小（/run文件系统之内）
默认： RuntimeMaxUse= 值的1/8
```

---

# 用 `lnav`软件查看log

[https://www.cnblogs.com/michealLang/p/9761886.html](https://www.cnblogs.com/michealLang/p/9761886.html)
[http://www.imooc.com/article/80502](http://www.imooc.com/article/80502)

## 安装

```
$ sudo apt install lnav libpcrecpp0v5
```

## 获取帮助信息

```
$ lnav -h
```

## 查看日志

```
$ lnav
```

## 查看指定日志(后面加上绝对路径)

```
$ lnav /var/log/dpkg.log
$ lnav /var/log/dpkg.log /var/log/kern.log
```

## 查看压缩的日志文件

```
$ lnav -r /var/log/Xorg.0.log.old.gz
```

## 直方图视图

首先运行 `lnav` 然后按 `i` 键切换到/出直方图视图

## 查看日志解析器结果

首先运行 `lnav` 然后按 `p` 键打开显示日志解析器结果

## 语法高亮

首先运行 `lnav` 然后按 `/` 键并输入你想查找的字符串（可以用 `Tab` 补全）， 比如搜索字符串 Default

## 源码连接

[https://github.com/tstack/lnav](https://github.com/tstack/lnav)

## 帮助网站

[http://blog.topspeedsnail.com/archives/5970](http://blog.topspeedsnail.com/archives/5970)

## 其他

glogg
`sudo apt install glogg libboost-program-options1.74.0`
[http://glogg.bonnefon.org/](http://glogg.bonnefon.org/)

ubuntu22.04默认的log查看器
`$ gnome-logs`

ubuntu之前的log查看器
[https://blog.csdn.net/weixin_39629075/article/details/116695187](https://blog.csdn.net/weixin_39629075/article/details/116695187)

```
sudo apt install gnome-system-log
gnome-system-log
```

---

# iso checksums

high speed mirror: Shanghai Jiao Tong University
[https://mirror.sjtu.edu.cn/](https://mirror.sjtu.edu.cn/)
[https://mirrors.sjtug.sjtu.edu.cn/](https://mirrors.sjtug.sjtu.edu.cn/)

## Ubuntu flavours

[https://ubuntu.com/#download](https://ubuntu.com/#download)
[Kubuntu](https://www.kubuntu.org/)
[Lubuntu](http://lubuntu.me/)
[Xubuntu](https://xubuntu.org/)
[Ubuntu Budgie](https://ubuntubudgie.org/)
[Ubuntu MATE](https://ubuntu-mate.org/)
[Ubuntu Studio](https://ubuntustudio.org/)
[Ubuntu Kylin](http://www.ubuntukylin.com/index.php?lang=en)

## lubuntu

[https://lubuntu.me/](https://lubuntu.me/)
[https://manual.lubuntu.me/](https://manual.lubuntu.me/)
[https://cdimage.ubuntu.com/lubuntu/releases/](https://cdimage.ubuntu.com/lubuntu/releases/)
SHA256SUM
`55fa19c398c23d7721755aa1f4738ebbf03613eeba9fc33aa98cbc324b1e03b1 *lubuntu-22.04.1-desktop-amd64.iso`

## kubuntu

[https://kubuntu.org/](https://kubuntu.org/)
[https://kubuntu.org/support/](https://kubuntu.org/support/)
[http://cdimage.ubuntu.com/kubuntu/releases](http://cdimage.ubuntu.com/kubuntu/releases)
SHA256SUM
`1b03afb1e89bb52ff6264a97d5308ccc330e629af87ee03ee16d8552c2f511de *kubuntu-22.04.1-desktop-amd64.iso`
ref:
[https://blog.csdn.net/jston_learn/article/details/7770844](https://blog.csdn.net/jston_learn/article/details/7770844)
[https://blog.csdn.net/github_35160620/article/details/52374492](https://blog.csdn.net/github_35160620/article/details/52374492)
[https://blog.csdn.net/davidhzq/article/details/102594328](https://blog.csdn.net/davidhzq/article/details/102594328)

## xubuntu

[https://xubuntu.org](https://xubuntu.org)
[https://xubuntu.org/help/](https://xubuntu.org/help/)
[http://cdimage.ubuntu.com/xubuntu/releases/](http://cdimage.ubuntu.com/xubuntu/releases/)
SHA256SUM
`e1ffc4f30bf96f07e11315f71b3342bce4b97bb3b93601ed5e1ba803d144c656 *xubuntu-22.04.1-desktop-amd64.iso`

## linux lite

[https://www.linuxliteos.com/](https://www.linuxliteos.com/)
[https://mirrors.sjtug.sjtu.edu.cn/linuxliteos/isos/](https://mirrors.sjtug.sjtu.edu.cn/linuxliteos/isos/)
SHA256SUM
`8bfee7756772b8f4613b783fa7be3996be9a2bebd39364d407f4c17ad24bdef4  linux-lite-6.2-64bit.iso`

## ubuntu-budgie

[https://ubuntubudgie.org](https://ubuntubudgie.org)
[https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu-budgie/releases/](https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu-budgie/releases/)
SHA256SUM
`54d5642faf1a3b37bff4377ff0363c17ac6f3da8f21a1f366bc1ec0afbf2ef65 *ubuntu-budgie-22.04.1-desktop-amd64.iso`

## ubuntu-mate

[https://ubuntu-mate.org](https://ubuntu-mate.org)
[https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu-mate/releases/](https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu-mate/releases/)
SHA256SUM
`1c18cdabcf820f699cebf6cda7ed4ba230d9acaf0b1573b870b099f678d32c29 *ubuntu-mate-22.04.1-desktop-amd64.iso`

## ubuntukylin

[https://www.ubuntukylin.com](https://www.ubuntukylin.com)
[https://www.ubuntukylin.com/downloads/download-en.html](https://www.ubuntukylin.com/downloads/download-en.html)
[https://mirrors.aliyun.com/ubuntukylin-cdimage/](https://mirrors.aliyun.com/ubuntukylin-cdimage/)
MD5SUM
`0145d61dcea77cd7e7ced4020e09c840   *https://mirrors.aliyun.com/ubuntukylin-cdimage/22.04/ubuntukylin-22.04-pro-amd64.iso`

## lxle linux

[https://www.lxle.net](https://www.lxle.net)
[https://sourceforge.net/projects/lxle/files/Final/OS/Focal-64/](https://sourceforge.net/projects/lxle/files/Final/OS/Focal-64/)
MD5SUM
`b9b252265cd79f84d459c7c3cacdf4ef  LXLE-Focal-Release.iso`

## crunchbang++

[https://www.crunchbangplusplus.org](https://www.crunchbangplusplus.org)
[https://github.com/CBPP/cbpp11-amd64/releases/download/v11.1/cbpp-11.1-amd64-20210923.iso](https://github.com/CBPP/cbpp11-amd64/releases/download/v11.1/cbpp-11.1-amd64-20210923.iso)

## linuxmint

[https://mirror.sjtu.edu.cn/linuxmint-cd/stable/](https://mirror.sjtu.edu.cn/linuxmint-cd/stable/)
[https://linuxmint-installation-guide.readthedocs.io/en/latest/](https://linuxmint-installation-guide.readthedocs.io/en/latest/)
SHA256SUM

```
f524114e4a10fb04ec428af5e8faf7998b18271ea72fbb4b63efe0338957c0f3 *linuxmint-21-cinnamon-64bit.iso
02a80ca98f82838e14bb02753bd73ee0da996c9cda3f027ae1c0ffb4612c8133 *linuxmint-21-mate-64bit.iso
3ad001dc15cb661c6652ce1d20ecdc85a939fa0b4b9325af5d0c65379cc3b17e *linuxmint-21-xfce-64bit.iso
```

| flavour  | feature                                               |
| -------- | ----------------------------------------------------- |
| Cinnamon | The most modern, innovative and full-featured desktop |
| MATE     | A more traditional, and faster desktop                |
| Xfce     | The most lightweight desktop                          |

ref:
[https://blog.51cto.com/u_15147537/5617475](https://blog.51cto.com/u_15147537/5617475)
[https://new.qq.com/rain/a/20210223A0219M00](https://new.qq.com/rain/a/20210223A0219M00)
[https://blog.csdn.net/weixin_39770226/article/details/111664107](https://blog.csdn.net/weixin_39770226/article/details/111664107)

### Linux Mint Releases

[https://wiki.linuxmint.com/download_all.php](https://wiki.linuxmint.com/download_all.php)

| Version | Codename      | Package base    | Status                           |
| ------- | ------------- | --------------- | -------------------------------- |
| 21      | Vanessa       | Ubuntu Jammy    | supported until April 2027       |
| 20.3    | Una           | Ubuntu Focal    | supported until April 2025       |
| 20.2    | Uma           | Ubuntu Focal    | supported until April 2025       |
| 20.1    | Ulyssa        | Ubuntu Focal    | supported until April 2025       |
| 20      | Ulyana        | Ubuntu Focal    | supported until April 2025       |
| 19.3    | Ubuntu Bionic | Ubuntu Bionic   | supported until April 2023.      |
| 19.2    | Ubuntu Bionic | Ubuntu Bionic   | supported until April 2023.      |
| 19.1    | Ubuntu Bionic | Ubuntu Bionic   | supported until April 2023.      |
| 19      | Ubuntu Bionic | Ubuntu Bionic   | supported until April 2023.      |
| 5       | Elsie         | Debian Bullseye | Long term support release (LTS). |

## ubuntu

[https://ubuntu.com/](https://ubuntu.com/)
[https://ubuntu.com/#download](https://ubuntu.com/#download)
[http://archive.ubuntu.com/ubuntu/dists/bionic-updates/main/installer-amd64/current/images/netboot/](http://archive.ubuntu.com/ubuntu/dists/bionic-updates/main/installer-amd64/current/images/netboot/)
[https://help.ubuntu.com/18.04/installation-guide/](https://help.ubuntu.com/18.04/installation-guide/)
[https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/22.04.1/](https://mirrors.tuna.tsinghua.edu.cn/ubuntu-releases/22.04.1/)
[https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu/releases/22.04.1/release/](https://mirror.sjtu.edu.cn/ubuntu-cdimage/ubuntu/releases/22.04.1/release/)
[https://ubuntu.com/tutorials/install-ubuntu-desktop#1-overview](https://ubuntu.com/tutorials/install-ubuntu-desktop#1-overview)
[https://ubuntu.com/tutorials/install-ubuntu-server#1-overview](https://ubuntu.com/tutorials/install-ubuntu-server#1-overview)
SHA256SUMS

```
c396e956a9f52c418397867d1ea5c0cf1a99a49dcf648b086d2fb762330cc88d *ubuntu-22.04.1-desktop-amd64.iso
10f19c5b2b8d6db711582e0e27f5116296c34fe4b313ba45f9b201a5007056cb *ubuntu-22.04.1-live-server-amd64.iso
```

ref:
[https://www.cnblogs.com/jary-wang/archive/2013/04/13/3017824.html](https://www.cnblogs.com/jary-wang/archive/2013/04/13/3017824.html)
[https://www.likecs.com/show-306190378.html#sc=576](https://www.likecs.com/show-306190378.html#sc=576)
[https://www.cnblogs.com/hhmaizi/p/3698740.html](https://www.cnblogs.com/hhmaizi/p/3698740.html)
[https://ubuntu.dovov.com/24933/%E4%BB%8Egrub%E8%8F%9C%E5%8D%95%E5%90%AF%E5%8A%A8ubuntu-iso%E6%96%87%E4%BB%B6.html](https://ubuntu.dovov.com/24933/%E4%BB%8Egrub%E8%8F%9C%E5%8D%95%E5%90%AF%E5%8A%A8ubuntu-iso%E6%96%87%E4%BB%B6.html)
[http://blog.chinaunix.net/uid-27157907-id-3273638.html](http://blog.chinaunix.net/uid-27157907-id-3273638.html)
[https://blog.csdn.net/liauh/article/details/78156610](https://blog.csdn.net/liauh/article/details/78156610)
[http://www.qb5200.com/article/206696.html](http://www.qb5200.com/article/206696.html)
[https://www.jianshu.com/p/c20cb8984caa?nomobile=yes](https://www.jianshu.com/p/c20cb8984caa?nomobile=yes)
[https://blog.csdn.net/qq_42509275/article/details/127096053](https://blog.csdn.net/qq_42509275/article/details/127096053)
[http://soft.zhiding.cn/software_zone/2008/0617/931223.shtml](http://soft.zhiding.cn/software_zone/2008/0617/931223.shtml)
[https://wiki.ubuntu.com/install.exe/Prototype](https://wiki.ubuntu.com/install.exe/Prototype)
[https://blog.51cto.com/u_15786574/5665057](https://blog.51cto.com/u_15786574/5665057)
[https://blog.csdn.net/w553692064/article/details/127145272](https://blog.csdn.net/w553692064/article/details/127145272)
[https://blog.csdn.net/weixin_53641036/article/details/126528793](https://blog.csdn.net/weixin_53641036/article/details/126528793)
[https://blog.csdn.net/baidu_18624493/article/details/122197188](https://blog.csdn.net/baidu_18624493/article/details/122197188)
[https://blog.csdn.net/m0_56051805/article/details/125649225](https://blog.csdn.net/m0_56051805/article/details/125649225)
[http://t.zoukankan.com/jamesf-p-4751502.html](http://t.zoukankan.com/jamesf-p-4751502.html)

### ubuntu codenames

Getting code name:

```
lsb_release -cs
```

[https://wiki.ubuntu.com/Releases](https://wiki.ubuntu.com/Releases)

### ubuntu long tern support releases

| Version      | Code name                  | Release        | End of Standard Support | End of Life |
| ------------ | -------------------------- | -------------- | ----------------------- | ----------- |
| Ubuntu 22.04 | **Jammy** Jellyfish  | April 21, 2022 | April 2027              | April 2032  |
| Ubuntu 20.04 | **Focal** Fossa      | April 23, 2020 | April 2025              | April 2030  |
| Ubuntu 18.04 | **Bionic** Beaver    | April 26, 2018 | April 2023              | April 2028  |
| Ubuntu 16.04 | **Xenial** Xerus     | April 21, 2016 | April 2021              | April 2026  |
| Ubuntu 14.04 | **Trusty** Tahr      | April 17, 2014 | April 2019              | April 2024  |
| Ubuntu 12.04 | **Precise** Pangolin | April 26, 2012 | -                       | April, 2017 |
| Ubuntu 10.04 | **Lucid** Lynx       | April 29, 2010 | -                       | April, 2015 |
| Ubuntu 8.04  | **Hardy** Heron      | April 24, 2008 | -                       | May, 2013   |
| Ubuntu 6.06  | **Dapper** Drake     | June 1, 2006   | -                       | June, 2011  |

ref:
[https://www.elecfans.com/d/1272406.html](https://www.elecfans.com/d/1272406.html)
[https://www.suloon.com/caijingzixun/202112/195321.html](https://www.suloon.com/caijingzixun/202112/195321.html)

## debian

[https://www.debian.org](https://www.debian.org)
[https://wiki.debian.org/](https://wiki.debian.org/)
[https://cdimage.debian.org/debian-cd/current/amd64/iso-cd](https://cdimage.debian.org/debian-cd/current/amd64/iso-cd)
SHA512SUMS

```
6a6607a05d57b7c62558e9c462fe5c6c04b9cfad2ce160c3e9140aa4617ab73aff7f5f745dfe51bbbe7b33c9b0e219a022ad682d6c327de0e53e40f079abf66a  debian-11.5.0-amd64-netinst.iso
adf2f083bc962d2e3bcad4228ac8c6ca242dafa562b76b3658415347cfe0e6595b5a596eb2c5e05def39d580caae9cfcc5f99b1bce7c18064043b1c3c1d9f1a4  debian-edu-11.5.0-amd64-netinst.iso
0a0f2a8e9385edacf0c50bc946c49e552a3f7899d175ff21e4dbdfde72854a010a8dcb2dd0bba5858f4a1e714863e207a42403d666522f29145ac751cf11d30b  debian-mac-11.5.0-amd64-netinst.iso
```

```
99a532675ec9733c277a3f4661638b5471dc5bce989b3a2dbc3ac694c964a7f7  debian-11.5.0-amd64-DVD-1.iso
e36777b4753663d7ad9f26e82bc1a7330dbaf24e8bcf0761f26f1e07fdf347d6  debian-11.5.0-amd64-DVD-10.iso
775ac38fcde6b1d50c499253e4d41cbdaa0c38dc5df03fc34e2160c88e96d98b  debian-11.5.0-amd64-DVD-11.iso
e4776cee8bea74aed881c3c8ac6d13c7d84afd812fbd50d4f85d9235b9919bf8  debian-11.5.0-amd64-DVD-12.iso
ad8bc450ec4598837f0b0a2b6cb841e69184432815fc2039defed6ba2c4c084f  debian-11.5.0-amd64-DVD-13.iso
2fcadedc731cdfab2a9b8c3d169fd725f6a6e4aa3c655e8bfbb844e00f033cf1  debian-11.5.0-amd64-DVD-14.iso
2fa4a4267a1fb0c039bd390a6e19b51d7c1bec16525300ac7c069552914dd5ed  debian-11.5.0-amd64-DVD-15.iso
53bb3db910f94cf2b032e5382af129a34c21652ecaa0c494658872e4faf50ba7  debian-11.5.0-amd64-DVD-16.iso
e8973a1f98aa07e0555361c738f5c2df8e3cc570958ff663070149a81b38cfd7  debian-11.5.0-amd64-DVD-17.iso
2a76071bef14c7a448011776994190cfda93895d2899ca7f86caba4f461c287d  debian-11.5.0-amd64-DVD-18.iso
a7f14907b0d6f1b79f495d5b06e9a78bb03c1f7952a9f95a130ba3ba4fe228b4  debian-11.5.0-amd64-DVD-19.iso
2d8c0ea5d9b7262ebd1f95cf4a074e4e09d5dc23e2419b88c71ed2bc0b321b53  debian-11.5.0-amd64-DVD-2.iso
65a460692cc2b7ccdd207f1d968d225282f129ce12c239a47a799a6a07da706f  debian-11.5.0-amd64-DVD-3.iso
a2bdbfc4b122ea99a8a33cb466631e639796bf25c2171f327f803dbe7ae3d28b  debian-11.5.0-amd64-DVD-4.iso
21d1131945078e65e82b50bbc33cb4987c29f92df46454cc32b7f4bc6f428e38  debian-11.5.0-amd64-DVD-5.iso
33fe04d413994823274022af704dedb229259c57a05022d2405d35713806cf4b  debian-11.5.0-amd64-DVD-6.iso
566d1d7445734a16530c2e43491576e9ccdc1199acbad706400e3e400ff02bba  debian-11.5.0-amd64-DVD-7.iso
74ec9cb4673a0990ca16a1d3864bda454f3b3f7c1664ed8e9b75c807e76c1dc5  debian-11.5.0-amd64-DVD-8.iso
5363cb239e3b5cab37e6a803c6f646eaee7d4a910701bf0d7634c2905599af88  debian-11.5.0-amd64-DVD-9.iso
```

### debian codenames

[https://www.debian.org/releases/index.en.html](https://www.debian.org/releases/index.en.html)
[https://wiki.debian.org/DebianReleases](https://wiki.debian.org/DebianReleases)
[https://wiki.debian.org/LTS](https://wiki.debian.org/LTS)
[https://en.wikipedia.org/wiki/List_of_Toy_Story_characters](https://en.wikipedia.org/wiki/List_of_Toy_Story_characters)
[https://blog.csdn.net/cunjiu9486/article/details/109076490](https://blog.csdn.net/cunjiu9486/article/details/109076490)

| Version | Code name | Toy Story character                | Release date     | End of life |
| ------- | --------- | ---------------------------------- | ---------------- | ----------- |
| 14      | Forky     |                                    | Not yet released |             |
| 13      | Trixie    | Not yet released                   |                  |             |
| 12      | Bookworm  | Not yet released                   |                  |             |
| -       | sid       | The next door neighbour            | “unstable”     | -           |
| 11      | Bullseye  | Woody’s horse                     | 2021-08-14       | ~2024-07    |
| 10      | Buster    | Andy’s pet dog                    | 2019-07-06       | 2022-09-10  |
| 9       | Stretch   | Rubber octopus from Toy Story 3    | 2017-06-17       | 2020-07-18  |
| 8       | Jessie    | Jessie the cowgirl                 | 2015-04-26       | 2018-06-17  |
| 7       | Wheezy    | Wheezy the penguin                 | 2013-05-04       | 2016-04-25  |
| 6.0     | Squeeze   | Squeeze toy aliens                 | 2011-02-06       | 2014-05-31  |
| 5.0     | Lenny     | Lenny, the binoculars              | 2009-02-14       | 2012-02-06  |
| 4.0     | Etch      | Etch, the Etch-A-Sketch            | 2007-04-08       | 2010-02-15  |
| 3.1     | Sarge     | Sarge from the Bucket O’ Soldiers | 2005-06-06       | 2008-03-31  |
| 3.0     | Woody     | Woody the cowboy                   | 2002-07-19       | 2006-06-30  |
| 2.2     | Potato    | Mr Potato Head                     | 2000-08-15       | 2003-06-30  |
| 2.1     | Slink     | Slinky Dog                         | 1999-03-09       | 2000-09-30  |
| 2.0     | Hamm      | Hamm (the pig)                     | 1998-07-24       | -           |
| 1.3     | Bo        | Bo Peep                            | 1997-06-05       | -           |
| 1.2     | Rex       | Rex (the T-Rex)                    | 1996-12-12       | -           |
| 1.1     | Buzz      | Buzz Lightyear                     | 1996-06-17       | -           |

## puppylinux

[https://puppylinux-woof-ce.github.io/](https://puppylinux-woof-ce.github.io/)
[https://puppylinux-woof-ce.github.io/woof-ce.html](https://puppylinux-woof-ce.github.io/woof-ce.html)
[https://puppylinux-woof-ce.github.io/faq.html](https://puppylinux-woof-ce.github.io/faq.html)
[https://puppylinux-woof-ce.github.io/install.html](https://puppylinux-woof-ce.github.io/install.html)
[https://wikka.puppylinux.com/HomePage](https://wikka.puppylinux.com/HomePage)
FossaPup64 9.5 md5sum
`6a45e7a305b7d3172ebd9eab5ca460e4  fossapup64-9.5.iso`

ref:
[https://www.minilinux.net/node/126](https://www.minilinux.net/node/126)
[https://www.minilinux.net/node/613](https://www.minilinux.net/node/613)
[https://www.minilinux.net/node/161](https://www.minilinux.net/node/161)
[https://www.minilinux.net/node/545](https://www.minilinux.net/node/545)
[http://distro.ibiblio.org/puppylinux/sfs_modules-4/](http://distro.ibiblio.org/puppylinux/sfs_modules-4/)
[https://www.minilinux.net/node/50](https://www.minilinux.net/node/50)
[https://www.minilinux.net/node/612](https://www.minilinux.net/node/612)
[http://www.wikka.puppylinux.com/Pets](http://www.wikka.puppylinux.com/Pets)
[http://web.archive.org/web/20150604144131/http://www.puppylinux.com/development/createpet.htm](http://web.archive.org/web/20150604144131/http://www.puppylinux.com/development/createpet.htm)
[https://www.wikihow.com/Install-Puppy-Linux](https://www.wikihow.com/Install-Puppy-Linux)
[https://www.minilinux.net/node/192](https://www.minilinux.net/node/192)
[https://www.minilinux.net/software/pup2usb](https://www.minilinux.net/software/pup2usb)
[https://community.spiceworks.com/topic/2454648-howto-create-a-bootable-linux-media-using-the-dd-command](https://community.spiceworks.com/topic/2454648-howto-create-a-bootable-linux-media-using-the-dd-command)
[http://www.datafilehost.com/download-fe571dfa.htm](http://www.datafilehost.com/download-fe571dfa.htm)
[http://www.chrysocome.net/dd#google_vignette](http://www.chrysocome.net/dd#google_vignette)

## centos

[https://www.centos.org](https://www.centos.org)
[https://wiki.centos.org/](https://wiki.centos.org/)
[https://wiki.centos.org/Download](https://wiki.centos.org/Download)
[https://mirrors.aliyun.com/centos/8/isos](https://mirrors.aliyun.com/centos/8/isos)
[https://mirrors.cqu.edu.cn/centos/8-stream/isos](https://mirrors.cqu.edu.cn/centos/8-stream/isos)
[https://www.centos.org/download/mirrors/](https://www.centos.org/download/mirrors/)
[http://mirror.stream.centos.org/9-stream/BaseOS/x86_64/iso](http://mirror.stream.centos.org/9-stream/BaseOS/x86_64/iso)

```
# CentOS-8.5.2111-x86_64-boot.iso: 827326464 bytes
SHA256 (CentOS-8.5.2111-x86_64-boot.iso) = 9602c69c52d93f51295c0199af395ca0edbe35e36506e32b8e749ce6c8f5b60a
# CentOS-8.5.2111-x86_64-dvd1.iso: 10794041344 bytes
SHA256 (CentOS-8.5.2111-x86_64-dvd1.iso) = 3b795863001461d4f670b0dedd02d25296b6d64683faceb8f2b60c53ac5ebb3e
```

SHA256SUM

```
# CentOS-Stream-9-20221110.0-x86_64-boot.iso: 890241024 bytes
SHA256 (CentOS-Stream-9-20221110.0-x86_64-boot.iso) = 008c51f52ae5e129f46ffcab67947f3380fbc80cd6e400f26175635b69158e1c
# CentOS-Stream-9-20221110.0-x86_64-dvd1.iso: 9275703296 bytes
SHA256 (CentOS-Stream-9-20221110.0-x86_64-dvd1.iso) = eadfa45db468c44ef6c13a0ff8cd4dfb78de0cb9aa53275fcf0614336877303d
```

ref:
[https://www.php.cn/centos/488532.html](https://www.php.cn/centos/488532.html)
[http://www.linuxintro.org/wiki/Build_rpm_packages_with_the_rpmbuild_command](http://www.linuxintro.org/wiki/Build_rpm_packages_with_the_rpmbuild_command)
[https://bbs.archlinux.org/viewtopic.php?id=210629](https://bbs.archlinux.org/viewtopic.php?id=210629)
[https://pkgbuild.sourceforge.net/](https://pkgbuild.sourceforge.net/)
[https://pkgbuild.sourceforge.net/man.php](https://pkgbuild.sourceforge.net/man.php)
[https://bbs.archlinux.org/viewtopic.php?id=102579](https://bbs.archlinux.org/viewtopic.php?id=102579)
[https://bbs.archlinux.org/viewtopic.php?id=92239](https://bbs.archlinux.org/viewtopic.php?id=92239)
<github.com/matthewbauer/unipkg>
[https://download.csdn.net/download/weixin_42114645/15732639](https://download.csdn.net/download/weixin_42114645/15732639)
[https://download.csdn.net/download/weixin_42128988/15743239?utm_medium=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2-15743239-download-15732639.topnsimilar_compare_v2&amp;depth_1-utm_source=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2-15743239-download-15732639.topnsimilar_compare_v2&amp;dest=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fweixin_42128988%2F15743239&amp;spm=1003.2020.3001.6616.2](https://download.csdn.net/download/weixin_42128988/15743239?utm_medium=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2-15743239-download-15732639.topnsimilar_compare_v2&depth_1-utm_source=distribute.pc_relevant_download.none-task-download-2~default~BlogCommendFromBaidu~Rate-2-15743239-download-15732639.topnsimilar_compare_v2&dest=https%3A%2F%2Fdownload.csdn.net%2Fdownload%2Fweixin_42128988%2F15743239&spm=1003.2020.3001.6616.2)

## slackware

[http://www.slackware.com](http://www.slackware.com)
[http://ftp.slackware.com/pub/slackware-iso/](http://ftp.slackware.com/pub/slackware-iso/)
[https://slackware.nl/slackware-live/slackware64-15.0-live/](https://slackware.nl/slackware-live/slackware64-15.0-live/)
[https://slackware.nl/slackware/slackware-iso/slackware64-15.0-iso/](https://slackware.nl/slackware/slackware-iso/slackware64-15.0-iso/)
[https://slackware.nl/slackware/slackware-live/slackware64-15.0-live/](https://slackware.nl/slackware/slackware-live/slackware64-15.0-live/)
[https://slackware.nl/slackware/slackware64-current-iso/](https://slackware.nl/slackware/slackware64-current-iso/)
[https://mirrors.bfsu.edu.cn/slackware/](https://mirrors.bfsu.edu.cn/slackware/)
[https://mirrors.slackware.com/guidelines/](https://mirrors.slackware.com/guidelines/)
[https://download.liveslak.org](https://download.liveslak.org)
MD5SUM

```
e7abe1bd616b643e3ae519fe6e754ed1  slackware64-live-15.0.iso
f8418ef0ec2c0a205adf5dbc2f2a1971  slackware64-15.0-install-dvd.iso
0b8fd275dda97443cf48d2798fa86abe  slackware64-current-install-dvd.iso
cc0e6061264c11fdd5cf1c76c0460642  slackware64-current-mini-install.iso
```

## fedora

[https://fedoraproject.org/](https://fedoraproject.org/)
[https://download.fedoraproject.org/pub/fedora/linux/releases/37/Workstation/x86_64/iso/](https://download.fedoraproject.org/pub/fedora/linux/releases/37/Workstation/x86_64/iso/)
[https://mirror.sjtu.edu.cn/fedora/linux/releases](https://mirror.sjtu.edu.cn/fedora/linux/releases)
[https://fedoraproject.org/wiki/Fedora_Project_Wiki](https://fedoraproject.org/wiki/Fedora_Project_Wiki)

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

# Fedora-Everything-netinst-x86_64-37-1.7.iso: 697413632 bytes
SHA256 (Fedora-Everything-netinst-x86_64-37-1.7.iso) = 55812cc1668f66389d8f88182d71362b7d2b232e6e286ff707ca274102414864
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEErLXuToMcdLt8Fo0n9VrT+1MjVSoFAmNtVpwACgkQ9VrT+1Mj
VSo7vQ//eme7q6NwcQ4L3HLPlShBAmG/7BkbqdftF7gdMTLoH/UPC2odCiLFEPhP
VfxN0VKj6kwoWKkJ4CApmbP4cr3qrlX3+Yu1pm4mQYjBlQGJRhq2sJ7MrSZqpOoZ
mbjB60nJvQ1uE0uZRLYSfy8Ypd2vQwQEnOr8fKU6hRf3vqZRIPHTQeX+AF+Y+T54
mrLo+407JeVgKTn8mW3QEsUNK+r0Z4VeJZGG0qGwTHcl5SfrTcn4Zs715/4K1EDm
r0RNhrefJXib/PWKgxY20dT4CzhqC/h297CaG+xFgPQGmaLe+7RHmUWn3t52ByWC
6rU8TdUMYLhv1gdMFZKrh81yejL14j1ypII5+n7lVLzT4CltatQDlw9fjQcmjri7
a1u7bWv1F9DJ0oePuzgFpjhRh02wY8mMrdwlcqbHNkklqtr+FwkM4KKUbBz22Xuh
dv1ReXdv2cBRLiURmO1eGgFCU9l+h17x7eFvBDEw0WxJRV0L++Sc2kWT/UAolFJ0
Tnzpbh5g5rSg4fzA+d+2SZEi+oZn0++NS/IK0CaL8NFztzoQqMZy3X123EGs6uaD
3DgY4jJboGrCZ4dieswddGv06eZDGBmqXBl6hl128wQ6aZ638Up5JTJcpyxLQbWC
Pi7K+MuBqhMeXDdHWvf8Pjv6Pa4Cb210ljGiXCWKjvqH/A/IhCw=
=SJsQ
-----END PGP SIGNATURE-----
```

```
-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA256

# Fedora-Workstation-Live-x86_64-37-1.7.iso: 2037372928 bytes
SHA256 (Fedora-Workstation-Live-x86_64-37-1.7.iso) = 9c69005baafdba6e4ff04c1cf4779121b7fc9aacab80b4633394576da336a515
-----BEGIN PGP SIGNATURE-----

iQIzBAEBCAAdFiEErLXuToMcdLt8Fo0n9VrT+1MjVSoFAmNtV1wACgkQ9VrT+1Mj
VSrCDhAAmKe3GNPF3ZEgSMDMpPgWIDpLLIO0NCe0gvWY+RvdxkEs++7AIHxIM9bi
JvNDAYw7JEVHjYixbekM+SYM0z/Cgl3o6jzzehFOTJR36QG0VvROrjaVDm+Lt4wc
r+SfmzCuq2GM8FNU/jGngURhfAGqLUhvj4yyfieABYlNrHNrlDMP3b1uI3FWcpkt
woNrBNYA734b2PzfsrJRjkERprMbOlLgdnlZ8BFy7wRrBMtLFKSqRvcaIUmeUlla
6PYJH0e3w8xcLQrF/5Q2XxAAYXfPCY3oX/iNXl1SkEmj78SRZxHrh+ACQjikOOmv
B9DnYFIRRSDnh50DpYgJWvzYWH00B7t1MilqiYxGCSB4VjevKErP2D2Q3Zquqq1m
awq3o2G5yfTgEtpQuLSKmouSHpXwtv7Fc6FBbSk2I7CRqCQCn1mam1hmSQgZcLfu
umO1c+L3ha4k5cilcazcyU5BZwnMR1ekUGg7PEJHcg/vcX/bbcTljKSQ7ZzP4msN
fa0HiyWZSuU8VQPoq+GxOFMvFxHD9gta7Z5AaKjrxL5o/icKxXmN2puTdum8mkqY
0qO6EPhpP2Ej3q23EtS4cxuZtmhlNPX1e30yty/iHn6WbKT8aq2X5iqsJ8fCGy9A
2DykAHyzvJxpNhdVd8YFQsvN8WHql/xciG1LkXR6BkfmZXdR/q0=
=vuqx
-----END PGP SIGNATURE-----
```

## manjaro

[https://manjaro.org/download/](https://manjaro.org/download/)
SHA256SUM

```
e88cdb2d0077a9b94d64090f609021be685849bf0ea4981c36f99a352cd3bfa2  manjaro-gnome-21.3.7-220816-linux515.iso
8b23a62b0282598ba594695c94cdee302316501f67dd9e5692e2ef8e4c2ac7d4  manjaro-kde-21.3.7-220816-linux515.iso
d275f609aa7c0ee3337d6ab9f09d3dd6062aa2a248d9f9dcddc5e0cf30719506  manjaro-xfce-21.3.7-220816-linux515.iso

```

ref:
[https://www.zhihu.com/question/50326289/answers/updated](https://www.zhihu.com/question/50326289/answers/updated)

## endeavouros

[https://endeavouros.com](https://endeavouros.com)
[https://mirrors.tuna.tsinghua.edu.cn/endeavouros/iso/](https://mirrors.tuna.tsinghua.edu.cn/endeavouros/iso/)
[https://mirror.funami.tech/endeavouros/iso/](https://mirror.funami.tech/endeavouros/iso/)
sha512sum
`fb3a82d9d57bde47fc38bc34b3ca1caab5db4f01e25931a5b739e78f0a188e167660dcc729e578539dfb6216ec5a8793a4590761af0722e441ca32538d62c87a  EndeavourOS_Artemis_nova_22_9.iso`

To check the ISO file with the sha512
`sha512sum -c EndeavourOS_Artemis_nova_22_9.iso.sha512sum`

To verify the key

```
gpg --recv CDF595A1
gpg --verify EndeavourOS_Artemis_nova_22_9.iso.sig
```

## archlinux

[https://archlinux.org/](https://archlinux.org/)
[https://aur.archlinux.org/](https://aur.archlinux.org/)
[https://wiki.archlinux.org/title/Installation_guide](https://wiki.archlinux.org/title/Installation_guide)
[https://wiki.archlinux.org/title/Install_Arch_Linux_on_a_removable_medium](https://wiki.archlinux.org/title/Install_Arch_Linux_on_a_removable_medium)
[https://wiki.archlinux.org/title/Install_Arch_Linux_from_existing_Linux](https://wiki.archlinux.org/title/Install_Arch_Linux_from_existing_Linux)
[https://wiki.archlinux.org/title/USB_flash_installation_medium](https://wiki.archlinux.org/title/USB_flash_installation_medium)
[https://wiki.archlinux.org/title/Netboot](https://wiki.archlinux.org/title/Netboot)
[https://wiki.archlinux.org/title/Archiso](https://wiki.archlinux.org/title/Archiso)

```
# dd bs=4M if=path/to/archlinux-version-x86_64.iso of=/dev/sdx conv=fsync oflag=direct status=progress
```

[https://mirror.sjtu.edu.cn/archlinux/iso/latest/](https://mirror.sjtu.edu.cn/archlinux/iso/latest/)
[https://mirror.sjtu.edu.cn/archlinux/iso/latest/arch/x86_64/](https://mirror.sjtu.edu.cn/archlinux/iso/latest/arch/x86_64/)

```
df6749df55b02cec98e5a9177c7957acfb96fe14d04553b6e4714100a4824f68  archlinux-2022.11.01-x86_64.iso
df6749df55b02cec98e5a9177c7957acfb96fe14d04553b6e4714100a4824f68  archlinux-x86_64.iso
9ed511caca92fe3c86a8eb36b9bfbf79169ae1e295747443df292305af304408  archlinux-bootstrap-2022.11.01-x86_64.tar.gz
9ed511caca92fe3c86a8eb36b9bfbf79169ae1e295747443df292305af304408  archlinux-bootstrap-x86_64.tar.gz
```

chroot tips:

```
# mount --bind squashfs-root squashfs-root
# mount -t proc none squashfs-root/proc
# mount -t sysfs none squashfs-root/sys
# mount -o bind /dev squashfs-root/dev
# mount -o bind /dev/pts squashfs-root/dev/pts  ## important for pacman (for signature check)
# cp -L /etc/resolv.conf squashfs-root/etc  ## this is needed to use networking within the chroot
```

## gentoo

[https://www.gentoo.org/](https://www.gentoo.org/)
[https://wiki.gentoo.org/wiki/Main_Page](https://wiki.gentoo.org/wiki/Main_Page)
[https://www.gentoo.org/downloads/](https://www.gentoo.org/downloads/)
[https://gentoo.osuosl.org](https://gentoo.osuosl.org)
[https://gentoo.osuosl.org/releases/](https://gentoo.osuosl.org/releases/)
[https://mirrors.163.com/gentoo//releases/](https://mirrors.163.com/gentoo//releases/)

## freebsd

[https://www.freebsd.org](https://www.freebsd.org)
[https://docs.freebsd.org/doc/](https://docs.freebsd.org/doc/)
[https://download.freebsd.org/releases/amd64/amd64/ISO-IMAGES](https://download.freebsd.org/releases/amd64/amd64/ISO-IMAGES)
https://mirrors.163.com/freebsd/releases/ISO-IMAGES/
[http://ftp.kaist.ac.kr/FreeBSD/releases/amd64/amd64/ISO-IMAGES](http://ftp.kaist.ac.kr/FreeBSD/releases/amd64/amd64/ISO-IMAGES)

```
SHA256 (FreeBSD-13.1-RELEASE-amd64-bootonly.iso) = 02e77c57bd0a306e3fc92296b3640433a3bd7e4ba39d82db94dfd885f5bb1f78
SHA256 (FreeBSD-13.1-RELEASE-amd64-bootonly.iso.xz) = ffb6def0b167d25d4ee1c8eea292bbd3ac8cf877555f41251ac0d140cee108c0
SHA256 (FreeBSD-13.1-RELEASE-amd64-disc1.iso) = 697d81653fa246b921ddfcf1d15562c55249cc727b11fa3e47f470e2cf2b6a40
SHA256 (FreeBSD-13.1-RELEASE-amd64-disc1.iso.xz) = e18907b6ec09e14c2065049873d28bf78682821903074e0e602e07f29075d347
SHA256 (FreeBSD-13.1-RELEASE-amd64-dvd1.iso) = 5b29c2cd5a604ad24810c994027ec13c9efc53778a307831f6181dfdaf02939f
SHA256 (FreeBSD-13.1-RELEASE-amd64-dvd1.iso.xz) = 8b22dd325280c811725ca8178d8408d7a235161fbb1650b2a369b6e8acbaeaf8
SHA256 (FreeBSD-13.1-RELEASE-amd64-memstick.img) = f73ce6526ccd24dfe2e79740f6de1ad1a304c854bfcff03a4d5b0de35d69d4a0
SHA256 (FreeBSD-13.1-RELEASE-amd64-memstick.img.xz) = 1ad1c64546f27e7720690f7338be2314d0c3097549a3ee12e8d888388bf01a6f
SHA256 (FreeBSD-13.1-RELEASE-amd64-mini-memstick.img) = 348f6541f3b6cc914504c34d035c7ff085baad99298cf646504dcecd4c9913c0
SHA256 (FreeBSD-13.1-RELEASE-amd64-mini-memstick.img.xz) = 8f0df8762fae588c457ce48bc34f617aae8a66723254aa143acadcec93933b8f
```

## openbsd

[http://www.openbsd.org](http://www.openbsd.org)
[https://cdn.openbsd.org/pub/OpenBSD/7.2/amd64/](https://cdn.openbsd.org/pub/OpenBSD/7.2/amd64/)
[https://ftp.kaist.ac.kr/OpenBSD/7.2/amd64/](https://ftp.kaist.ac.kr/OpenBSD/7.2/amd64/)
[https://mirrors.aliyun.com/pub/OpenBSD/](https://mirrors.aliyun.com/pub/OpenBSD/)

install72.img

## netbsd

[http://www.netbsd.org](http://www.netbsd.org)
[https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/](https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/)
[http://www.netbsd.org/mirrors/](http://www.netbsd.org/mirrors/)
[https://ftp.kaist.ac.kr/NetBSD/images/](https://ftp.kaist.ac.kr/NetBSD/images/)
[https://mirrors.aliyun.com/netbsd/images](https://mirrors.aliyun.com/netbsd/images)
[https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/NetBSD-9.3-amd64.iso](https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/NetBSD-9.3-amd64.iso)
[https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/NetBSD-9.3-amd64-install.img.gz](https://cdn.netbsd.org/pub/NetBSD/NetBSD-9.3/images/NetBSD-9.3-amd64-install.img.gz)

---

# makedeb

[https://www.makedeb.org/](https://www.makedeb.org/)
[https://github.com/makedeb/makedeb](https://github.com/makedeb/makedeb)
[https://proget.makedeb.org/feeds/makedeb/main/makedeb%3Aall/16.0.0-stable](https://proget.makedeb.org/feeds/makedeb/main/makedeb%3Aall/16.0.0-stable)
[https://proget.makedeb.org/](https://proget.makedeb.org/)
[https://docs.makedeb.org/](https://docs.makedeb.org/)

## APT Repository (better way)

The primary method for installation of makedeb is through the use of makedeb’s APT repository.

```
wget -qO - 'https://proget.makedeb.org/debian-feeds/makedeb.pub' | gpg --dearmor | sudo tee /usr/share/keyrings/makedeb-archive-keyring.gpg 1> /dev/null
echo 'deb [signed-by=/usr/share/keyrings/makedeb-archive-keyring.gpg arch=all] https://proget.makedeb.org/ makedeb main' | sudo tee /etc/apt/sources.list.d/makedeb.list
sudo apt update
sudo apt install makedeb
```

```
sudo apt install makedeb-beta
sudo apt install makedeb-alpha
```

```
The following additional packages will be installed:
  binutils binutils-common binutils-x86-64-linux-gnu build-essential curl dpkg-dev fakeroot g++ g++-11 gawk gcc gcc-11 gettext
  libalgorithm-diff-perl libalgorithm-diff-xs-perl libalgorithm-merge-perl libarchive-tools libasan6 libatomic1 libbinutils libc-dev-bin
  libc-devtools libc6-dev libcc1-0 libcrypt-dev libctf-nobfd0 libctf0 libfakeroot libgcc-11-dev libitm1 liblsan0 libnsl-dev libquadmath0
  libsigsegv2 libstdc++-11-dev libtirpc-dev libtsan0 libubsan1 linux-libc-dev lto-disabled-list make manpages-dev rpcsvc-proto
Suggested packages:
  binutils-doc debian-keyring g++-multilib g++-11-multilib gcc-11-doc gawk-doc gcc-multilib autoconf automake libtool flex bison gcc-doc
  gcc-11-multilib gcc-11-locales gettext-doc autopoint libasprintf-dev libgettextpo-dev glibc-doc libstdc++-11-doc make-doc
```

## interactive usage

install makedeb is via the official installation script.

```
bash -ci "$(wget -qO - 'https://shlink.makedeb.org/install')"
```

## Noninteractive usage

simply omit the `-i` argument to `bash`, and pass in the `MAKEDEB_RELEASE` environment variable, set to a value of `makedeb`, `makedeb-beta`, or `makedeb-alpha`:

```
# Set the makedeb release you want.
export MAKEDEB_RELEASE='makedeb'

# Run the install script. Note that it's `bash -c` and not `bash -ci` now.
bash -c "$(wget -qO - 'https://shlink.makedeb.org/install')"
```

## Docker Images

```
proget.makedeb.org/docker/makedeb/makedeb
proget.makedeb.org/docker/makedeb/makedeb-beta
proget.makedeb.org/docker/makedeb/makedeb-alpha
```

Image tags

append the image name with tags

```
debian-buster
debian-bullseye
debian-latest
ubuntu-bionic
ubuntu-focal
ubuntu-jammy
ubuntu-rolling
ubuntu-latest
```

For example

```
proget.makedeb.org/docker/makedeb/makedeb:ubuntu-jammy
```

PKGBUILD Syntax
[https://wiki.archlinux.org/title/PKGBUILD](https://wiki.archlinux.org/title/PKGBUILD)
For more information, run man PKGBUILD on a machine where makedeb is installed. An example PKGBUILD that showcases common options is shown below.

```
# Maintainer: Your Name <foobar@example.com>
pkgname=NAME
pkgver=VERSION
pkgrel=1
pkgdesc=''
arch=()
depends=()
focal_depends=()
makedepends=()
makedepends_x86_64=()
checkdepends=()
optdepends=()
focal_optdepends_x86_64=()
provides=()
conflicts=()
replaces=()
preinst=''
postinst=''
prerm=''
postrm=''
backup=()
options=()
license=()
url=''

source=()
sha256sums=()
noextract=()

prepare() {
    cd "${pkgname}-${pkgver}/"
    git submodule init
}

build() {
    cd "${pkgname}-${pkgver}/"
    make
}

package() {
    cd "${pkgname}-${pkgver}/"
    make DESTDIR="${pkgdir}/" install
}

# vim: set sw=4 expandtab:
```

---

# set up the APT repository

For example:

```
curl -q 'https://proget.makedeb.org/debian-feeds/prebuilt-mpr.pub' | gpg --dearmor | sudo tee /usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg 1> /dev/null
echo "deb [signed-by=/usr/share/keyrings/prebuilt-mpr-archive-keyring.gpg] https://proget.makedeb.org prebuilt-mpr $(lsb_release -cs)" | sudo tee /etc/apt/sources.list.d/prebuilt-mpr.list
sudo apt update
```

---

# git

```
$ sudo apt-get install git gitk git-doc git-svn subversion xxdiff
```

```
The following additional packages will be installed:
  git-man liberror-perl libtk8.6 tk tk8.6 libapr1 libaprutil1 libserf-1-1 libsvn-perl
  libsvn1 libterm-readkey-perl libutf8proc2 libyaml-libyaml-perl libyaml-perl
Suggested packages:
  git-daemon-run | git-daemon-sysvinit git-email git-gui gitweb git-cvs
  git-mediawiki  libyaml-shell-perl db5.3-util libapache2-mod-svn subversion-tools
```

```
$ sudo apt-get install git-gui
```

vscode安装插件 `Git Graph`

---

# 7z

```
$ sudo apt install p7zip p7zip-full p7zip-rar
$ sudo apt install rar p7zip p7zip-full p7zip-rar unace unrar zip unzip p7zip-full p7zip-rar
$ sudo apt install 7zip rar unrar zip unzip p7zip p7zip-full unace unrar
```

```
$ sudo apt install sharutils uudeview mpack jlha-utils arj cabextract file-roller xz-utils
```

```
file-roller is already the newest version (3.42.0-1).
xz-utils is already the newest version (5.2.5-2ubuntu1).
cabextract is already the newest version (1.9-3).
The following additional packages will be installed:
  libjlha-java libuu0
Suggested packages:
  default-jre libjlha-java-doc-ja default-mta | mail-transport-agent inews sharutils-doc
  bsd-mailx | mailx xdeview
```

$ cat /etc/rarreg.key

```
RAR registration data
Andreas Zhang
Unlimited Company License
UID=95d88025e605e7f69a7d
64122122509a7d8fe151cac66f48da9a7eba775d78b0928b03d738
409ffd2cdd69047f79b560fce6cb5ffde62890079861be57638717
7131ced835ed65cc743d9777f2ea71a8e32c7e593cf66794343565
b41bcf56929486b8bcdac33d50ecf7739960cf9a562353a49af6f9
69d97d19b1c2fb9c0a37971376ad4e3d6a18705e8f9b541bdffccf
bfcd3a6fe09f73b6f6ead20f2606d79374df1160d8db0a1f603850
4e86565158c437a7ff6ea0b2a21104b968ad6ddc336e0342949312
```

把 rarreg.key 复制到你的 home 目录，或：/etc， /usr/lib， /usr/local/lib， /usr/local/etc

没有放到~, 就不需要保护了（我放到/etc）

```
//$ sudo chattr +i rarreg.key
$ sudo chattr -i rarreg.key
$ lsattr -a
```

---

# chrpath / patchelf

Tool to edit the rpath in ELF binaries

```
$ sudo apt install chrpath patchelf
$ sudo apt install autoconf automake libtool
```

```
$ cd /opt/uex4/bin
$ ldd ./uex
$ readelf -d uex        (RUNPATH看看有没有"./")
$ patchelf --print-needed uex
//$ patchelf --remove-needed libpng12.so.0 uex
//$ patchelf --add-needed libpng16.so uex
//$ patchelf --replace-needed libpng12.so.0 libpng16.so uex
//$ patchelf --set-rpath ./ uex
//$ patchelf --print-rpath uex
$ patchelf --set-rpath /opt/uex4/bin uex
$ patchelf --print-rpath uex
/opt/uex4/bin
```

---

# foxitreader

build deb by makedeb, then install deb
`sudo dpkg -i foxitreader_2.4.5.0727-jammy_amd64.deb`

`evince` and `xreader` are not as good as foxitreader

# locate

```
$ sudo apt install mlocate plocate
$ sudo updatedb
```

```
The following NEW packages will be installed:
  liburing2 mlocate plocate

update-alternatives: using /usr/bin/plocate to provide /usr/bin/locate (locate) in auto mode
  
/etc/systemd/system/timers.target.wants/plocate-updatedb.timer → /lib/systemd/system/plocate-updatedb.timer
```

---

# privoxy etc.

```
sudo apt install privoxy
```

```
The following additional packages will be installed:
  doc-base libmbedtls14 libmbedx509-1 libuuid-perl libyaml-tiny-perl
```

```
sudo systemctl start privoxy.service
sudo systemctl enable privoxy.service
Created symlink /etc/systemd/system/multi-user.target.wants/privoxy.service → /usr/lib/systemd/system/privoxy.service.
```

配置

```
sudo gedit /etc/privoxy/config
```

```
...
#listen-address  localhost:8118
listen-address  127.0.0.1:8118
...
#forward-socks5 / 127.0.0.1:1081 .
#forward-socks5 / 127.0.0.1:10808 .
#forward-socks5 / 127.0.0.1:10809 .
forward-socks5 / 127.0.0.1:20170 .
...
```

```
sudo systemctl restart privoxy.service
```

## 如果出错

```
sudo apt install --reinstall privoxy
```

## 测试 privoxy

### 测试1

```
aria2c --all-proxy='http://127.0.0.1:8118' -D
```

### 测试2

```
export https_proxy="127.0.0.1:8118"
export http_proxy="127.0.0.1:8118"

[ 上面两句可以添加到类似 /etc/profile 的地方去 ]

curl www.google.com

apt yay 什么的就可以加速了
```

---

# shadowsocks

[https://supporthost.in/how-to-install-shadowsocks-on-ubuntu/](https://supporthost.in/how-to-install-shadowsocks-on-ubuntu/)
[https://tutorialforlinux.com/2022/05/31/how-to-install-shadowsocks-server-on-ubuntu-22-04/3/](https://tutorialforlinux.com/2022/05/31/how-to-install-shadowsocks-server-on-ubuntu-22-04/3/)

```
sudo apt install shadowsocks-libev
```

```
The following additional packages will be installed:
  libbloom1 libc-ares2 libcork16 libcorkipset1 libev4 libjsonparser1.1
  libmbedcrypto7
Suggested packages:
  haveged kcptun simple-obfs
```

```
sudo systemctl start shadowsocks-libev
sudo systemctl enable shadowsocks-libev
Created symlink /etc/systemd/system/multi-user.target.wants/shadowsocks-libev.se
rvice → /lib/systemd/system/shadowsocks-libev.service.
//sudo systemctl stop shadowsocks-libev
```

配置

```
sudo gedit /etc/shadowsocks-libev/config.json
```

set it like

```
{
"server":"0.0.0.0",
"server_port":8388,
"local_port":1080,
"password":"[PASSWORD]",
"timeout":600,
"method":"aes-128-cfb"
}
```

Allow the port in the server firewall.

```
ufw allow proto tcp to 0.0.0.0/0 port 8388 comment "Shadowsocks".
```

```
sudo systemctl restart shadowsocks-libev
```

---

# proxychains

proxychains-ng==proxychains4，其实安装

```
sudo apt install proxychains-ng libproxychains4
sudo apt purge proxychains4 libproxychains4
sudo apt install proxychains libproxychains3
sudo apt purge proxychains libproxychains3
```

```
Note, selecting 'proxychains4' instead of 'proxychains-ng'
The following NEW packages will be installed:
  libproxychains4 proxychains4
```

配置

```
sudo gedit /etc/proxychains.conf    （proxychains and proxychains4）
or
sudo gedit /etc/proxychains4.conf  （proxychains4）
```

```
[ProxyList]
# add proxy here ...
# meanwile
# defaults set to "tor"
#socks4 	127.0.0.1 9050    # comment this line
# set to "SS"
#socks5 	127.0.0.1 1081
# set to "v2ray"
#socks5 	127.0.0.1 10808
# set to "xray"
#socks5 	127.0.0.1 10809
# set to "v2rayA"
socks5 	127.0.0.1 20170
```

## 测试

```
proxychains curl www.google.com
```

```
export PROXY_DNS_SERVER=8.8.8.8
PROXYCHAINS_SOCKS5=10808 proxychains4 -f /etc/proxychains.conf curl www.google.com
proxychains curl www.google.com
```

## git加速 加速githubgi

```
proxychains git clone https://github.com/xxx/xxx.git
```

全局github代理加速

```
git config --global http.proxy 'socks5://127.0.0.1:10808'
git config --global https.proxy 'socks5://127.0.0.1:10808'
```
```
git config --global --unset http.proxy
git config --global --unset https.proxy
git config --global http.proxy 'socks5://127.0.0.1:20170'
git config --global https.proxy 'socks5://127.0.0.1:20170'
```
查询是否启用代理

```
git config --global http.proxy
git config --list
```

取消代理

```
git config --global --unset http.proxy
```

这下好了，不用忍龟速了。

---

# net-tools

```
sudo apt install net-tools
```

## 查看网速

```
sudo apt install nethogs
sudo nethogs eth0
sudo nethogs wlan0
```

---

# devmem2

```
sudo apt install devmem2
```

---

# iptux

```
sudo apt install iptux
```

```
The following additional packages will be installed:
  libgflags2.2 libgoogle-glog0v5 libjsoncpp25
```

---

# gparted

```
sudo apt install gparted gparted-common
```

```
Suggested packages:
  dmraid gpart jfsutils kpartx mtools reiser4progs reiserfsprogs udftools
  xfsprogs exfatprogs
```

```
$ sudo apt install gparted dmraid gpart jfsutils kpartx reiser4progs reiserfsprogs udftools xfsprogs dvd+rw-tools udfclient xfsdump attr quota dosfstools mtools
```

```
The following additional packages will be installed:
  growisofs kpartx-boot libdmraid1.0.0.rc16
Suggested packages:
  cdrskin libnet-ldap-perl rpcbind default-mta | mail-transport-agent floppyd
```

---

# ssh

```
cd ~/.ssh/
```

复制私钥和公钥，这里只贴公钥

```
$ cat id_rsa.pub 
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC2i/Lu18LrmuAFTsiATM6DPbmqfhhZ2hreUSw0t9I6qGjAxyfUY0ecNW5ZOo2fUORFUSDBpqP6fkWyNxFfkq/hPVq0EYsNIIzrCKL1ZqPqfXqcbgkRpvU0R0+rWTT6gmdjwcPo8SQnJ6bQ9PQFDVh/H4f3HAG9AzJqkOy9OcTS3qbVTpK3TWlu96NKpfifpIzyQNi1rA4Q/0JSCPTKogRt8vateV4pV2lC110yvVHy8NsYaNPoFUYIIgyIlG44Gr7DuqtqrJOVxdHJxn0TtGjtBprQVaQEhRDNBYCJIdSP1MZZOxMFMokeQ2Lf/6hOV/Rpp1kEVdvaisQmO1S2uNKX denglitsch@gmail.com
```

---

# git config 初步配置

```
git config --global user.name "Andreas Zhang"
git config --global user.email denglitsch@gmail.com
git config --global core.editor "vim"
git config --list
```

```
user.name=Andreas Zhang
user.email=denglitsch@gmail.com
core.editor=vim
```

```
git config --list --show-origin
```

```
file:/home/andy/.gitconfig      user.name=Andreas Zhang
file:/home/andy/.gitconfig      user.email=denglitsch@gmail.com
file:/home/andy/.gitconfig      core.editor=vim
file:.git/config        core.repositoryformatversion=0
file:.git/config        core.filemode=true
file:.git/config        core.bare=false
file:.git/config        core.logallrefupdates=true
file:.git/config        remote.origin.url=git@github.com:yxgi5/my_os_log.git
file:.git/config        remote.origin.fetch=+refs/heads/*:refs/remotes/origin/*
file:.git/config        branch.master.remote=origin
file:.git/config        branch.master.merge=refs/heads/master
file:.git/config        pull.rebase=false
```

`$ cat ~/.gitconfig`

```
[user]
	name = Andreas Zhang
	email = denglitsch@gmail.com
[core]
	editor = vim
```

## The remote end hung up unexpectedly 解决方案

```
git config --global http.postBuffer 1048576000
git config --global http.lowSpeedLimit 0
git config --global http.lowSpeedTime 999999
```

## pull一律使用快进合并

```
git config pull.rebase false  # merge
git config pull.rebase true   # rebase
git config pull.ff only       # fast-forward only
```

全局配置

```
git config --global pull.ff only
```

特别指定

```
gut pull --rebase     # 对团队不安全
gut pull --no-rebase  # 合并
gut pull --ff-only    # 快进
```

## merge 一律用非快进

```
git merge --no-ff   # 非快进，保留被合并分支的记录，无分支和`git merge --ff`一样
git merge --ff      # 快进，不保留被合并分支的记录，无分支和`git merge --no-ff`一样
// git rebase       # 尽量不要用rebase
```

## git add 的几种参数区别

```
git add -A 保存所有的修改
git add . 保存新的添加和修改，但是不包括删除
git add -u 保存修改和删除，但是不包括新建文件
```

---

# meld / xxdiff

```
sudo apt install meld xxdiff xxdiff-scripts
```

```
The following additional packages will be installed:
  gir1.2-gtksource-3.0 libgtksourceview-3.0-1 libgtksourceview-3.0-common
```

---

# tweaks

```
sudo apt install gnome-tweaks
```

```
Suggested packages:
  gnome-shell-extension-prefs | gnome-shell-extension-manager
```

---

# dconf-tools

```
$ sudo apt install dconf-editor
$ dconf-editor
```

添加gedit的encodings

```
依次点开->org->gnome->gedit->preferences->encodings
改成
['UTF-8', 'GB18030', 'GB2312', 'GBK', 'BIG5', 'CURRENT', 'ISO-8859-15', 'UTF-16']
```

桌面的trashcan是在这里设置显示
/org/gnome/shell/extensions/ding/

nautilus显示绝对路径（还是不要设置这个）

```
Then navigate to 
org > gnome > nautilus > preferences
and check always-use-location-entry.
```

or
`dconf write /org/gnome/nautilus/preferences/always-use-location-entry true`

## 修改 默认 终端

```
$ gsettings get org.cinnamon.desktop.default-applications.terminal exec
'gnome-terminal'

$ gsettings set org.cinnamon.desktop.default-applications.terminal exec gnome-terminal
$ gsettings set org.cinnamon.desktop.default-applications.terminal exec mate-terminal


$ gsettings get org.gnome.desktop.default-applications.terminal exec
'x-terminal-emulator'

$ sudo apt install terminator
$ sudo update-alternatives --config x-terminal-emulator
$ gsettings list-schemas | grep terminal

//for Nemo
//$ gsettings set org.cinnamon.desktop.default-applications.terminal exec terminator
//for ubuntu de
//$ gsettings set org.gnome.desktop.default-applications.terminal exec terminator

or
//$ dconf write /org/cinnamon/desktop/applications/terminal/exec "'xfce4-terminal'"
```

---

# gedit for mint-c

```
$ sudo apt install dconf-editor gedit gedit-plugins
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  gedit-common gedit-plugin-bookmarks gedit-plugin-bracket-completion
  gedit-plugin-character-map gedit-plugin-code-comment
  gedit-plugin-color-picker gedit-plugin-color-schemer gedit-plugin-commander
  gedit-plugin-draw-spaces gedit-plugin-find-in-files gedit-plugin-git
  gedit-plugin-join-lines gedit-plugin-multi-edit gedit-plugin-session-saver
  gedit-plugin-smart-spaces gedit-plugin-synctex gedit-plugin-terminal
  gedit-plugin-text-size gedit-plugin-translate gedit-plugin-word-completion
  gedit-plugins-common gir1.2-ggit-1.0 gir1.2-gucharmap-2.90 libgit2-1.1
  libgit2-glib-1.0-0 libhttp-parser2.9 libssh2-1

```

---

# aria2 etc.

```
sudo apt install curl wget aria2 libaria2-0 libssh2-1
```

---

# run 32-bit programs

```
$ dpkg-architecture -l
$ dpkg --print-foreign-architectures
i386
$ dpkg --print-architecture
amd64
$ sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386
```

```
The following additional packages will be installed:
  gcc-12-base:i386 krb5-locales libcom-err2:i386 libcrypt1:i386 libgcc-s1:i386
  libgpm2:i386 libgssapi-krb5-2:i386 libidn2-0:i386 libk5crypto3:i386
  libkeyutils1:i386 libkrb5-3:i386 libkrb5support0:i386 libnsl2:i386
  libnss-nis:i386 libnss-nisplus:i386 libssl3:i386 libtinfo5:i386
  libtirpc3:i386 libunistring2:i386
Suggested packages:
  glibc-doc:i386 locales:i386 gpm:i386 krb5-doc:i386 krb5-user:i386
```

```
$ sudo aptitude search multiarch
p   binutils-multiarch                                                 - Binary utilities that support multi-arch targets                       
p   binutils-multiarch:i386                                            - Binary utilities that support multi-arch targets                       
p   binutils-multiarch-dbg                                             - Binary utilities that support multi-arch targets (debug symbols)       
p   binutils-multiarch-dbg:i386                                        - Binary utilities that support multi-arch targets (debug symbols)       
p   binutils-multiarch-dev                                             - GNU binary utilities that support multi-arch targets (BFD development files) 
p   binutils-multiarch-dev:i386                                        - GNU binary utilities that support multi-arch targets (BFD development files) 
p   gdb-multiarch                                                      - GNU Debugger (with support for multiple architectures)                 
p   gdb-multiarch:i386                                                 - GNU Debugger (with support for multiple architectures)  
```

```
$ sudo apt install g++-multilib gcc-multilib binutils-multiarch binutils-multiarch-dev gdb-multiarch

The following additional packages will be installed:
  binutils-dev g++-11-multilib gcc-11-multilib lib32asan6 lib32atomic1
  lib32gcc-11-dev lib32gcc-s1 lib32gomp1 lib32itm1 lib32quadmath0
  lib32stdc++-11-dev lib32stdc++6 lib32ubsan1 libc6-dev-i386 libc6-dev-x32
  libc6-i386 libc6-x32 libx32asan6 libx32atomic1 libx32gcc-11-dev libx32gcc-s1
  libx32gomp1 libx32itm1 libx32quadmath0 libx32stdc++-11-dev libx32stdc++6
  libx32ubsan1
Suggested packages:
  lib32stdc++6-11-dbg libx32stdc++6-11-dbg

```

---

# sunloginclient

`$ sudo dpkg -i sunloginclient-11.0.0.36662-amd64.deb`

```
sudo dpkg -i SunloginClient_11.0.1.44968_amd64.deb
/etc/systemd/system/multi-user.target.wants/runsunloginclient.service → /etc/systemd/system/runsunloginclient.service
```

/usr/local/sunlogin/bin/sunloginclient  获取当前ID，PC端可以登录绑定ID  (fastcode=k121784872)

```
sudo systemctl enable runsunloginclient.service
sudo systemctl start runsunloginclient.service
```

`sudo gedit /usr/local/bin/sunloginclient`

```
#!/bin/bash
/usr/local/sunlogin/bin/sunloginclient
```

`sudo chmod +x /usr/local/bin/sunloginclient`

更换lightdm之后就可以了。

---

# SunloginRemote 1.6 [老旧]

```
$ ./SunloginRemote 
bash: ./SunloginRemote: No such file or directory
andy@andy-usbstick:~/Downloads/sunlogin_remote_linux$ file SunloginRemote 
SunloginRemote: ELF 32-bit LSB executable, Intel 80386, version 1 (SYSV), dynamically linked, interpreter /lib/ld-linux.so.2, for GNU/Linux 2.6.15, BuildID[sha1]=b72efebe1ac65c1c169a5e1b0eb777cf6ab60bbb, not stripped
andy@andy-usbstick:~/Downloads/sunlogin_remote_linux$ ldd ./SunloginRemote 
	not a dynamic executable
```

```
$ dpkg --print-foreign-architectures
i386
$ dpkg --print-architecture
amd64
$ sudo apt-get install libc6:i386 libncurses5:i386 libstdc++6:i386
```

```
The following additional packages will be installed:
  gcc-12-base:i386 krb5-locales libcom-err2:i386 libcrypt1:i386 libgcc-s1:i386
  libgpm2:i386 libgssapi-krb5-2:i386 libidn2-0:i386 libk5crypto3:i386
  libkeyutils1:i386 libkrb5-3:i386 libkrb5support0:i386 libnsl2:i386
  libnss-nis:i386 libnss-nisplus:i386 libssl3:i386 libtinfo5:i386
  libtirpc3:i386 libunistring2:i386
Suggested packages:
  glibc-doc:i386 locales:i386 gpm:i386 krb5-doc:i386 krb5-user:i386
```

## `cannot open shared object file`处理报错

```
$ ./SunloginRemote 
./SunloginRemote: error while loading shared libraries: libuuid.so.1: cannot open shared object file: No such file or directory
```

```
$ sudo updatedb
$ locate libuuid.so.1
/usr/lib/x86_64-linux-gnu/libuuid.so.1
/usr/lib/x86_64-linux-gnu/libuuid.so.1.3.0
```

```
  libuuid.so.1
  libGL.so.1
  libpulse.so.0
  libgobject-2.0.so.0
```

查文件归属哪个deb包

```
$ sudo dpkg -S /usr/lib/x86_64-linux-gnu/libuuid.so.1
libuuid1:amd64: /usr/lib/x86_64-linux-gnu/libuuid.so.1
```

最后得到

```
sudo apt install libuuid1:i386 libgl1:i386 libpulse0:i386 libglib2.0-0:i386
```

```
The following additional packages will be installed:
  libatomic1:i386 libbsd0:i386 libdrm-amdgpu1:i386 libdrm-nouveau2:i386 libdrm-radeon1:i386 libdrm2:i386 libedit2:i386 libelf1:i386 libexpat1:i386
  libffi8:i386 libgl1-mesa-dri:i386 libglapi-mesa:i386 libglvnd0:i386 libglx-mesa0:i386 libglx0:i386 libicu70:i386 libllvm13:i386 liblzma5:i386
  libmd0:i386 libsensors5:i386 libtinfo6:i386 libvulkan1:i386 libwayland-client0:i386 libx11-6:i386 libx11-xcb1:i386 libxau6:i386 libxcb-dri2-0:i386
  libxcb-dri3-0:i386 libxcb-glx0:i386 libxcb-present0:i386 libxcb-randr0:i386 libxcb-shm0:i386 libxcb-sync1:i386 libxcb-xfixes0:i386 libxcb1:i386
  libxdmcp6:i386 libxext6:i386 libxfixes3:i386 libxml2:i386 libxshmfence1:i386 libxxf86vm1:i386 libzstd1:i386 mesa-vulkan-drivers:i386 zlib1g:i386 libapparmor1:i386 libasyncns0:i386 libcap2:i386 libdbus-1-3:i386 libflac8:i386 libgcrypt20:i386 libgpg-error-l10n libgpg-error0:i386 libblkid1:i386 libmount1:i386 libpcre2-8-0:i386 libpcre3:i386 libselinux1:i386
Suggested packages:
  lm-sensors:i386 rng-tools:i386 opus-tools:i386 cryptsetup-bin:i386
Recommended packages:
  libgl1-amber-dri:i386
```

## xcb报错处理

```
$ ./SunloginRemote 
This application failed to start because it could not find or load the Qt platform plugin "xcb".

Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, xcb.

Reinstalling the application may fix this problem.
```

```
$ export QT_DEBUG_PLUGINS=1
$ ./SunloginRemote 
```

```
: "Cannot load library sunlogin_remote_linux/plugins/platforms/libqxcb.so: (libXi.so.6: cannot open shared object file: No such file or directory)" 
This application failed to start because it could not find or load the Qt platform plugin "xcb".

Available platform plugins are: eglfs, linuxfb, minimal, minimalegl, offscreen, xcb.

Reinstalling the application may fix this problem.
```

`ldd sunlogin_remote_linux/plugins/platforms/libqxcb.so`

`ldd libqxcb.so | grep "not found"`

```
  libXi.so.6 => not found
	libXrender.so.1 => not found
	libQt5DBus.so.5 => not found
	libQt5Gui.so.5 => not found
	libQt5Core.so.5 => not found
```

在 `/usr/lib/x86_64-linux-gnu/`都有，那么是architecture不对。

这样查文件归属哪个deb包

```
$ sudo dpkg -S /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0
libglib2.0-0:amd64: /usr/lib/x86_64-linux-gnu/libgobject-2.0.so.0
```

最后得到

```
sudo apt install libxi6:i386 libsm6:i386 libfontconfig1:i386 libqt5dbus5:i386 libqt5gui5:i386 libqt5core5a:i386 libxrender1:i386
```

```
The following additional packages will be installed:
  libxi6:i386 libice6:i386 libbrotli1:i386 libfreetype6:i386 libpng16-16:i386 libatk-bridge2.0-0:i386 libatk1.0-0:i386 libatspi2.0-0:i386 libavahi-client3:i386 libavahi-common-data:i386 libavahi-common3:i386
  libcairo-gobject2:i386 libcairo2:i386 libcolord2:i386 libcups2:i386 libdatrie1:i386 libdeflate0:i386 libdouble-conversion3:i386 libegl-mesa0:i386
  libegl1:i386 libepoxy0:i386 libevdev2:i386 libfribidi0:i386 libgbm1:i386 libgdk-pixbuf-2.0-0:i386 libgmp10:i386 libgnutls30:i386
  libgraphite2-3:i386 libgtk-3-0:i386 libgudev-1.0-0:i386 libharfbuzz0b:i386 libhogweed6:i386 libinput10:i386 libjbig0:i386 libjpeg-turbo8:i386
  libjpeg8:i386 liblcms2-2:i386 libmd4c0:i386 libmtdev1:i386 libnettle8:i386 libp11-kit0:i386 libpango-1.0-0:i386 libpangocairo-1.0-0:i386
  libpangoft2-1.0-0:i386 libpcre2-16-0:i386 libpixman-1-0:i386 libqt5network5:i386 libqt5svg5:i386 libqt5widgets5:i386 librsvg2-2:i386
  librsvg2-common:i386 libtasn1-6:i386 libthai0:i386 libtiff5:i386 libudev1:i386 libwacom9:i386 libwayland-cursor0:i386 libwayland-egl1:i386
  libwayland-server0:i386 libwebp7:i386 libxcb-icccm4:i386 libxcb-image0:i386 libxcb-keysyms1:i386 libxcb-render-util0:i386 libxcb-render0:i386
  libxcb-shape0:i386 libxcb-util1:i386 libxcb-xinerama0:i386 libxcb-xinput0:i386 libxcb-xkb1:i386 libxcomposite1:i386 libxcursor1:i386
  libxdamage1:i386 libxinerama1:i386 libxkbcommon-x11-0:i386 libxkbcommon0:i386 libxrandr2:i386 qt5-gtk-platformtheme:i386
Suggested packages:
  gnutls-bin:i386 gvfs:i386 qt5-image-formats-plugins:i386 qtwayland5:i386 librsvg2-bin:i386
Recommended packages:
  qttranslations5-l10n:i386
```

一条解决上面两个
`$ sudo apt install libglib2.0-0:i386 libuuid1:i386 libgl1:i386 libpulse0:i386 libglib2.0-0:i386 libxi6:i386 libsm6:i386 libfontconfig1:i386 libqt5dbus5:i386 libqt5gui5:i386 libqt5core5a:i386 libxrender1:i386`

再运行一下

`sudo apt install libglib2.0-0 libuuid1 libgl1 libpulse0 libglib2.0-0 libxi6 libsm6 libfontconfig1 libqt5dbus5 libqt5gui5 libqt5core5a libxrender1 --reinstall`

---

# 备选的桌面环境

```
aptitude search desktop
sudo apt install lubuntu-desktop
sudo apt install xubuntu-desktop
sudo apt install kubuntu-desktop
sudo apt install kde-plasma-desktop
sudo apt install desktop-base
sudo apt install budgie-desktop
sudo apt install cinnamon-desktop-environment
sudo apt install ubuntukylin-desktop
sudo apt install ubuntustudio-desktop
sudo apt install ubuntu-desktop  [default]
sudo apt install ubuntu-gnome-desktop
sudo apt install ubuntu-mate-desktop
sudo apt install ubuntu-unity-desktop
sudo apt install ubuntu-budgie-desktop
aptitude search lxde
sudo apt install lxde 
sudo apt install task-lxde-desktop
aptitude search openbox
```

```
$ sudo apt update
$ sudo apt install gnome-session gdm3
$ sudo apt install tasksel
$ sudo tasksel install gnome-desktop
$ sudo systemctl get-default 
graphical.target
//$ sudo systemctl set-default graphical.targets
```

---

# mint-meta-cinnamon

```
$ sudo gedit /etc/apt/sources.list
deb http://archive.canonical.com/ubuntu jammy partner
deb https://mirrors.ustc.edu.cn/linuxmint vanessa main upstream import backport

$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys A6616109451BBBF2

$ sudo apt update
$ sudo apt upgrade
$ sudo apt install mint-meta-cinnamon
The following additional packages will be installed:
  app-install-data bulky catdoc cinnamon cinnamon-common cinnamon-control-center cinnamon-control-center-data cinnamon-desktop-data cinnamon-l10n
  cinnamon-screensaver cinnamon-session cinnamon-session-common cinnamon-settings-daemon cjs exfatprogs exif flatpak folder-color-switcher
  gir1.2-appstream-1.0 gir1.2-appstreamglib-1.0 gir1.2-camel-1.2 gir1.2-caribou-1.0 gir1.2-cinnamondesktop-3.0 gir1.2-clutter-1.0 gir1.2-cmenu-3.0
  gir1.2-cogl-1.0 gir1.2-coglpango-1.0 gir1.2-cvc-1.0 gir1.2-ecal-2.0 gir1.2-edataserver-1.2 gir1.2-flatpak-1.0 gir1.2-gdata-0.0 gir1.2-gkbd-3.0
  gir1.2-gsound-1.0 gir1.2-gtkclutter-1.0 gir1.2-ical-3.0 gir1.2-keybinder-3.0 gir1.2-matemenu-2.0 gir1.2-meta-muffin-0.0 gir1.2-nemo-3.0
  gir1.2-timezonemap-1.0 gir1.2-xapp-1.0 gir1.2-xkl-1.0 html2text hwdata id3 inxi iso-flag-png libappstream-glib8 libcaribou-common libcaribou0
  libcinnamon-control-center1 libcinnamon-desktop4 libcinnamon-menu-3-0 libcjs0f libcscreensaver0 libcvc0 libept1.6.0 libflatpak0 libfuse2
  libgail-3-0 libgsf-bin libgtk-layer-shell0 libjs-mathjax libkeybinder-3.0-0 libmalcontent-0-0 libmate-desktop-2-17 libmate-menu2
  libmate-panel-applet-4-1 libmateweather-common libmateweather1 libmetacity3 libmozjs-78-0 libmuffin0 libnemo-extension1 libostree-1-1
  librda-common librda0 libtimezonemap-data libtimezonemap1 libxapp1 libxdo3 libxpresent1 libxreaderdocument3 libxreaderview3 linuxmint-keyring
  lm-sensors mate-desktop mate-desktop-common mate-menus mate-panel mate-panel-common mate-polkit mate-polkit-common mate-user-guide mesa-utils
  mesa-utils-bin metacity metacity-common mint-artwork mint-backgrounds-vanessa mint-common mint-info-xfce mint-meta-core mint-mirrors mint-themes
  mint-translations mint-upgrade-info mint-x-icons mint-y-icons mintbackup mintdrivers mintinstall mintreport mintsources mintstick mintsystem
  mintupdate mintwelcome muffin-common nemo nemo-data nemo-fileroller odt2txt policykit-1-gnome python-tinycss2-common python3-bs4 python3-configobj
  python3-html5lib python3-lxml python3-magic python3-pam python3-parted python3-psutil python3-pycurl python3-pyinotify python3-setproctitle
  python3-soupsieve python3-tinycss2 python3-webencodings python3-xapp python3-xlib python3-xlrd streamer synaptic thingy tree ubuntu-dbgsym-keyring
  ubuntu-system-adjustments untex xapps-common xawtv-plugins xreader xreader-common
Suggested packages:
  cinnamon-doc gnome-screenshot malcontent-gui libxml-dumper-perl imagemagick libjs-mathjax-doc fancontrol read-edid i2c-tools
  mate-desktop-environment python-configobj-doc python3-genshi python-lxml-doc python3-pam-dbg python-parted-doc python-psutil-doc
  libcurl4-gnutls-dev python-pycurl-doc python-pyinotify-doc python-tinycss2-doc xawtv dwww menu deborphan apt-xapian-index tasksel
```

```
dpkg: error processing archive /tmp/apt-dpkg-install-fUtn6G/126-mintupdate_5.8.8_all.deb (--unpack):
 trying to overwrite '/usr/share/icons/hicolor/16x16/apps/software-properties.png', which is also in package software-properties-gtk 0.99.22.3
```

强制覆盖

```
$ sudo apt-get -o Dpkg::Options::="--force-overwrite" install -f
Unpacking mintupdate (5.8.8) ...
dpkg: warning: overriding problem because --force enabled:
dpkg: warning: trying to overwrite '/usr/share/icons/hicolor/16x16/apps/software-properties.png', which is also in package software-properties-gtk 0.99.22.3

```

强制更新配置文件

```
$ sudo apt-get -o DPkg::options::=--force-confmiss --reinstall install linuxmint-keyring
```

## ubuntu orig

```
$ cat /etc/apt/sources.list
#deb cdrom:[Ubuntu 22.04.1 LTS _Jammy Jellyfish_ - Release amd64 (20220809.1)]/ jammy main restricted

# See http://help.ubuntu.com/community/UpgradeNotes for how to upgrade to
# newer versions of the distribution.
deb http://cn.archive.ubuntu.com/ubuntu/ jammy main restricted
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy main restricted

## Major bug fix updates produced after the final release of the
## distribution.
deb http://cn.archive.ubuntu.com/ubuntu/ jammy-updates main restricted
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy-updates main restricted

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu
## team. Also, please note that software in universe WILL NOT receive any
## review or updates from the Ubuntu security team.
deb http://cn.archive.ubuntu.com/ubuntu/ jammy universe
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy universe
deb http://cn.archive.ubuntu.com/ubuntu/ jammy-updates universe
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy-updates universe

## N.B. software from this repository is ENTIRELY UNSUPPORTED by the Ubuntu 
## team, and may not be under a free licence. Please satisfy yourself as to 
## your rights to use the software. Also, please note that software in 
## multiverse WILL NOT receive any review or updates from the Ubuntu
## security team.
deb http://cn.archive.ubuntu.com/ubuntu/ jammy multiverse
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy multiverse
deb http://cn.archive.ubuntu.com/ubuntu/ jammy-updates multiverse
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy-updates multiverse

## N.B. software from this repository may not have been tested as
## extensively as that contained in the main release, although it includes
## newer versions of some applications which may provide useful features.
## Also, please note that software in backports WILL NOT receive any review
## or updates from the Ubuntu security team.
deb http://cn.archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse
# deb-src http://cn.archive.ubuntu.com/ubuntu/ jammy-backports main restricted universe multiverse

deb http://security.ubuntu.com/ubuntu jammy-security main restricted
# deb-src http://security.ubuntu.com/ubuntu jammy-security main restricted
deb http://security.ubuntu.com/ubuntu jammy-security universe
# deb-src http://security.ubuntu.com/ubuntu jammy-security universe
deb http://security.ubuntu.com/ubuntu jammy-security multiverse
# deb-src http://security.ubuntu.com/ubuntu jammy-security multiverse

# This system was installed using small removable media
# (e.g. netinst, live or single CD). The matching "deb cdrom"
# entries were disabled at the end of the installation process.
# For information about how to configure apt package sources,
# see the sources.list(5) manual.
```

```
$ cat /usr/lib/os-release
PRETTY_NAME="Ubuntu 22.04.1 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.1 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy

$ cat /etc/lsb-release
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=22.04
DISTRIB_CODENAME=jammy
DISTRIB_DESCRIPTION="Ubuntu 22.04.1 LTS"


$ sudo cp /usr/lib/os-release /usr/lib/os-release.bk
$ sudo cp /etc/lsb-release /etc/lsb-release.bk
$ sudo cp /etc/apt/sources.list /etc/apt/sources.list.bk
```

## mint record

```
$ cat /etc/apt/sources.list

# This system was installed using small removable media
# (e.g. netinst, live or single CD). The matching "deb cdrom"
# entries were disabled at the end of the installation process.
# For information about how to configure apt package sources,
# see the sources.list(5) manual.
```

```
$ cat /etc/apt/sources.list.d/official-package-repositories.list
deb https://mirrors.ustc.edu.cn/linuxmint vanessa main upstream import backport 

deb http://mirrors.cqu.edu.cn/ubuntu jammy main restricted universe multiverse
deb http://mirrors.cqu.edu.cn/ubuntu jammy-updates main restricted universe multiverse
deb http://mirrors.cqu.edu.cn/ubuntu jammy-backports main restricted universe multiverse

deb http://security.ubuntu.com/ubuntu/ jammy-security main restricted universe multiverse
deb http://archive.canonical.com/ubuntu jammy partner
```

```
$ cat /usr/lib/os-release
NAME="Linux Mint"
VERSION="21 (Vanessa)"
ID=linuxmint
ID_LIKE="ubuntu debian"
PRETTY_NAME="Linux Mint 21"
VERSION_ID="21"
HOME_URL="https://www.linuxmint.com/"
SUPPORT_URL="https://forums.linuxmint.com/"
BUG_REPORT_URL="http://linuxmint-troubleshooting-guide.readthedocs.io/en/latest/"
PRIVACY_POLICY_URL="https://www.linuxmint.com/"
VERSION_CODENAME=vanessa
UBUNTU_CODENAME=jammy

$ cat /etc/lsb-release
DISTRIB_ID=LinuxMint
DISTRIB_RELEASE=21
DISTRIB_CODENAME=vanessa
DISTRIB_DESCRIPTION="Linux Mint 21 Vanessa"
```

## mintwelcome

```
/usr/bin/python3 /usr/bin/mintwelcome
```

## 解决 `yout apt configuration is corrupt`

[https://forums.linuxmint.com/viewtopic.php?t=361477](https://forums.linuxmint.com/viewtopic.php?t=361477)

```
$ sudo xed /etc/apt/preferences.d/official-package-repositories.pref
```

```
Package: *
Pin: origin live.linuxmint.com
Pin-Priority: 750

Package: *
Pin: release o=linuxmint,c=upstream
Pin-Priority: 700

Package: *
Pin: release o=LP-PPA-linuxmint-daily-build-team-daily-builds
Pin-Priority: 700
```

无用的尝试

```
$ sudo rm -rf /var/lib/apt/lists/
$ sudo mkdir -p /var/lib/apt/lists/partial
$ sudo apt-get clean
$ sudo apt-get update
$ sudo apt install --reinstall mintsources
$ inxi -Fxxxrz
$ inxi -G
$ inxi -SGxxx
$ glxinfo -B
$ xrandr
```

---

# lightdm

```
$ sudo apt install lightdm lightdm-gtk-greeter  [最好不安装 lightdm-gtk-greeter]
The following additional packages will be installed:
  gnome-themes-standard liblightdm-gobject-1-0
Suggested packages:
  bindfs desktop-base
```

```
$ sudo apt install bindfs desktop-base
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  fonts-quicksand
Suggested packages:
  gnome | kde-standard | xfce4 | wmaker
```

查看当前的显示管理器

```
$ cat /etc/X11/default-display-manager
/usr/sbin/lightdm
```

```
$ sudo dpkg-reconfigure gdm3
$ sudo dpkg-reconfigure lightdm
```

```
$ sudo gedit /etc/lightdm/lightdm.conf.d/70-linuxmint.conf
```

change

```
[SeatDefaults]
user-session=xfce
```

to

```
[SeatDefaults]
user-session=cinnamon
```

```
sudo systemctl disable gdm.service
sudo systemctl enable lightdm.service
sudo systemctl start lightdm.service
sudo systemctl stop gdm.service
```

备份系统已安装软件的清单，采用如下命令 （dpkg命令后的参数前是两个减号“-”）：

```
sudo dpkg --get-selections > ~/Desktop/package.selections
```

恢复安装软件，升级系统。先将以前备份的package.selections文件拷贝到桌面，后采用如下命令：

```
sudo dpkg --set-selections < ~/Desktop/package.selections && apt-get dselect-upgrade
```

下面也是一种备份安装列表方式

```
dpkg -l | grep ^ii | awk '{print $2}' > installed
# another server
sudo apt-get install $(cat installed)
```

查询已经安装软件和导出列表
[https://www.myfreax.com/how-to-list-installed-packages-on-ubuntu/](https://www.myfreax.com/how-to-list-installed-packages-on-ubuntu/)

```
sudo apt list --installed | less
sudo apt list --installed
sudo dpkg-query -l
sudo dpkg-query -l | less
sudo dpkg-query -f '${binary:Package}\n' -W > pkg_list.txt
```

导入列表

```
sudo apt install grub-efi-amd64 grub-efi grub-common grub2-common grub-efi-amd64-bin grub-efi-amd64-signed
xargs sudo apt-get -y  -o Dpkg::Options::="--force-overwrite" install < pkg_list.txt
```

或者

```
sudo apt-get -y  -o Dpkg::Options::="--force-overwrite" install $(cat pkg_list.txt)
```

```
sudo apt-get -o DPkg::options::=--force-confnew --reinstall install mint-info-cinnamon
```

## Failed to start casper-md5check Verify Live ISO checksums

```
$ sudo cat /var/log/boot.log
$ systemctl --failed
$ sudo systemctl disable casper-md5check.service
```

## lightdm 配置 for mint

```
sudo gedit /usr/share/lightdm/lightdm.conf.d/50-ubuntu.conf
```

change

```

```

[Seat:*]
user-session=ubuntu

```

```

to

```
[Seat:*]
greeter-session=unity-greeter
user-session=ubuntu
greeter-show-manual-login=true
all-guest=false
```

```
$ sudo gedit /etc/lightdm/lightdm.conf.d/70-linuxmint.conf
```

change

```
[SeatDefaults]
user-session=cinnamon
```

to

```
[Seat:*]
greeter-show-manual-login=true
[SeatDefaults]
user-session=cinnamon
greeter-setup-script=xhost +
```

```
$ sudo gedit /etc/gdm3/custom.conf
```

change

```
# GDM configuration storage
#
# See /usr/share/gdm/gdm.schemas for a list of available options.

[daemon]
# Uncomment the line below to force the login screen to use Xorg
#WaylandEnable=false

# Enabling automatic login
#  AutomaticLoginEnable = true
#  AutomaticLogin = user1

# Enabling timed login
#  TimedLoginEnable = true
#  TimedLogin = user1
#  TimedLoginDelay = 10

[security]

[xdmcp]

[chooser]

[debug]
# Uncomment the line below to turn on debugging
# More verbose logs
# Additionally lets the X server dump core if it crashes
#Enable=true
```

to

```
# GDM configuration storage
#
# See /usr/share/gdm/gdm.schemas for a list of available options.

[daemon]
# Uncomment the line below to force the login screen to use Xorg
#WaylandEnable=false

# Enabling automatic login
#  AutomaticLoginEnable = true
#  AutomaticLogin = user1

# Enabling timed login
#  TimedLoginEnable = true
#  TimedLogin = user1
#  TimedLoginDelay = 10

[security]
DisallowTCP=false

[xdmcp]
Enable=true
DisplaysPerHost=10 

[chooser]

[debug]
# Uncomment the line below to turn on debugging
# More verbose logs
# Additionally lets the X server dump core if it crashes
#Enable=true
```

```
$ sudo gedit /etc/ssh/ssh_config
```

change

```
#   ForwardX11 no
#   ForwardX11Trusted yes
```

to

```
    ForwardX11 yes
    ForwardX11Trusted yes
```

---

# wlan driver

```
$ sudo apt install bcmwl-kernel-source
The following additional packages will be installed:
  dctrl-tools dkms
Suggested packages:
  debtags menu
```

---

# timeshift

```
$ sudo apt install timeshift 
The following additional packages will be installed:
  btrfs-progs
Suggested packages:
  duperemove
```

---

# xed for mint21

```
$ sudo apt install xed xed-common
```

---

# leafpad

[https://askubuntu.com/questions/1142518/leafpad-not-available-for-newer-releases-of-ubuntu](https://askubuntu.com/questions/1142518/leafpad-not-available-for-newer-releases-of-ubuntu)

## 编译准备工作

```
$ sudo apt-get install build-essential checkinstall intltool libgtk2.0-dev
```

```
The following additional packages will be installed:
  autoconf automake autopoint autotools-dev debhelper debugedit dh-autoreconf
  dh-strip-nondeterminism dwz gir1.2-gtk-2.0 icu-devtools libarchive-cpio-perl
  libatk1.0-dev libblkid-dev libbrotli-dev libcairo2-dev libdatrie-dev
  libdebhelper-perl libdeflate-dev libexpat1-dev libffi-dev
  libfile-stripnondeterminism-perl libfontconfig-dev libfontconfig1-dev
  libfreetype-dev libfreetype6-dev libfribidi-dev libgdk-pixbuf-2.0-dev
  libglib2.0-dev libglib2.0-dev-bin libgraphite2-dev libharfbuzz-dev
  libharfbuzz-gobject0 libice-dev libicu-dev libjbig-dev libjpeg-dev
  libjpeg-turbo8-dev libjpeg8-dev libltdl-dev liblzma-dev
  libmail-sendmail-perl libmount-dev libpango1.0-dev libpcre16-3 libpcre2-dev
  libpcre2-posix3 libpcre3-dev libpcre32-3 libpixman-1-dev libpng-dev
  libpng-tools libpthread-stubs0-dev libselinux1-dev libsepol-dev libsm-dev
  libsub-override-perl libsys-hostname-long-perl libthai-dev libtiff-dev
  libtiffxx5 libtool libx11-dev libxau-dev libxcb-render0-dev libxcb-shm0-dev
  libxcb1-dev libxcomposite-dev libxcursor-dev libxdamage-dev libxdmcp-dev
  libxext-dev libxfixes-dev libxft-dev libxi-dev libxinerama-dev libxml2-utils
  libxrandr-dev libxrender-dev pango1.0-tools po-debconf python3-distutils
  uuid-dev x11proto-dev xorg-sgml-doctools xtrans-dev zlib1g-dev
Suggested packages:
  autoconf-archive gnu-standards autoconf-doc dh-make libcairo2-doc
  libdatrie-doc freetype2-doc libgirepository1.0-dev libglib2.0-doc
  libgraphite2-utils libgtk2.0-doc libice-doc icu-doc libtool-doc liblzma-doc
  libpango1.0-doc libsm-doc libthai-doc gfortran | fortran95-compiler gcj-jdk
  libx11-doc libxcb-doc libxext-doc graphicsmagick libmail-box-pe
```

## 获取合适的参考cflags和cxxflags

```
$ sudo apt install python3-dev
```

```
The following additional packages will be installed:
  javascript-common libjs-jquery libjs-sphinxdoc libjs-underscore libpython3-dev libpython3.10-dev python3.10-dev
Suggested packages:
  apache2 | lighttpd | httpd
```

```
$ python3-config --cflags
```

```
-I/usr/include/python3.10 -I/usr/include/python3.10  -Wno-unused-result -Wsign-compare -g      -fstack-protector-strong -Wformat -Werror=format-security  -DNDEBUG -g -fwrapv -O2 -Wall

```

## 修改makedeb的配置

```
$ sudo gedit /etc/makepkg.conf
```

修改

```
#MAKEFLAGS="-j2"
```

为

```
MAKEFLAGS="-j$(nproc)"
```

为了编译leafpad，修改

```
-Werror=format-security
```

为

```
-Wno-error=format-security
```

## PKGBUILD

```
# Maintainer: Lex Black <autumn-wind at web dot de>
# Contributor: SiD

pkgname=leafpad
pkgver=0.8.18.1
pkgrel=3
pkgdesc="A notepad clone for GTK+ 2.0 with print header disabled"
arch=('i386' 'amd64')
url="http://tarot.freeshell.org/leafpad/"
license=('GPL')
depends=('libgtk2.0-dev' 'desktop-file-utils' 'gtk-update-icon-cache')
makedepends=('intltool')
conflicts=('leafpad')
provides=('leafpad')
source=(http://download.savannah.gnu.org/releases/${pkgname}/${pkgname}-${pkgver}.tar.gz
        gtkprint.c.diff)
md5sums=('254a72fc67505e3aa52884c729cd7b97'
         'a01afce5b77fd78845e1d4985fd3c0f7')

build() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  patch -p0 <../gtkprint.c.diff
  ./configure --prefix=/usr --enable-chooser
  make
}

package() {
  cd "${srcdir}/${pkgname}-${pkgver}"
  make DESTDIR="${pkgdir}" install
  echo 'StartupNotify=true' >> "${pkgdir}/usr/share/applications/leafpad.desktop"
}
```

## 生成leafpad_0.8.18.1-3_amd64.deb

```
$ makedeb
```

## 安装leafpad

```
$ sudo dpkg -i leafpad_0.8.18.1-3_amd64.deb
或
$ sudo apt install ./leafpad_0.8.18.1-3_amd64.deb
```

---

# tcl

```
sudo apt install tk-dev
```

```
The following additional packages will be installed:
  libxss-dev tcl-dev tcl8.6-dev tk8.6-dev
Suggested packages:
  tcl-doc tcl8.6-doc tk-doc tk8.6-doc
```

---

# openbox

## Note, selecting 'suckless-tools' instead of 'dmenu'

如果dmenu有问题可以删除~/.cache/dmenu_run

```
$ sudo apt install xinit openbox menu libxml2-dev tint2 openbox-menu openbox-gnome-session pkg-config menu-l10n lxdm feh suckless-tools fonts-dejavu gnome-screenshot
```

```
pkg-config is already the newest version (0.29.2-1ubuntu3).
xinit is already the newest version (1.4.1-0ubuntu4).
fonts-dejavu is already the newest version (2.37-2build1).
The following additional packages will be installed:
  icu-devtools libfm-extra4 libicu-dev libjpeg-progs libjpeg9
  libmenu-cache-bin libmenu-cache3 libobrender32v5 libobt2v5 obconf scrot
  yudit-common
Suggested packages:
  icu-doc lxde-common gksu | kde-runtime | ktsuss openbox-kde-session dwm
  stterm surf yudit-doc yudit
```

```
$ sudo apt install lxappearance pcmanfm libfm-tools lxterminal libgtk2.0-dev libpango-perl libpango1.0-dev
```

```
libpango1.0-dev is already the newest version (1.50.6+ds-2).
libpango1.0-dev set to manually installed.
libgtk2.0-dev is already the newest version (2.24.33-2ubuntu2).
The following additional packages will be installed:
  libfm-data libfm-gtk-data libfm-gtk4 libfm-modules libfm4 lxde-settings-daemon lxmenu-data
Suggested packages:
  nautilus-actions
```

## obmenu hasn't been available since bionic

[https://askubuntu.com/questions/1337888/with-ubuntu-21-04-can-openbox-be-customized-like-the-openbox-of-other-distros](https://askubuntu.com/questions/1337888/with-ubuntu-21-04-can-openbox-be-customized-like-the-openbox-of-other-distros)

## 安装配置 obmenu-generator

```
$ sudo apt install build-essential cpanminus git
```

```
build-essential is already the newest version (12.9ubuntu3).
git is already the newest version (1:2.34.1-1ubuntu1.5).
The following additional packages will be installed:
  libalgorithm-c3-perl libany-uri-escape-perl libclass-c3-perl libclass-c3-xs-perl libcpan-changes-perl libcpan-distnameinfo-perl libcpan-meta-check-perl
  libdata-perl-perl libdata-section-perl libfile-pushd-perl libfile-slurp-perl libgetopt-long-descriptive-perl liblocal-lib-perl libmodule-build-perl
  libmodule-cpanfile-perl libmodule-signature-perl libmoox-handlesvia-perl libmro-compat-perl libnamespace-autoclean-perl libparams-validate-perl libparse-pmfile-perl
  libpod-markdown-perl libpod-readme-perl libreadonly-perl libref-util-perl libref-util-xs-perl libsoftware-license-perl libstring-shellquote-perl
  libtext-template-perl libtype-tiny-perl libtype-tiny-xs-perl liburi-escape-xs-perl
Suggested packages:
  libdevel-lexalias-perl
```

```
//sudo cpan install YAML Gtk2 Pango Linux::DesktopFiles Data::Dump
sudo cpan install YAML Gtk3 Pango Linux::DesktopFiles Data::Dump File::DesktopEntry Log::Log4perl
sudo cpanm Linux::DesktopFiles
sudo cpanm Data::Dump
```

```
$ git clone https://github.com/trizen/obmenu-generator.git
sudo cp obmenu-generator/obmenu-generator /usr/bin
mkdir -p ~/.config/obmenu-generator/
//cp -r obmenu-generator/schema.pl ~/.config/obmenu-generator/
schema.pl和config.pl都用存档的
sudo chown root:root /usr/bin/obmenu-generator
sudo chmod 755 /usr/bin/obmenu-generator 
```

测试

```
obmenu-generator -i
```

## 安装浏览器 for mint21，比如opera

```
$ sudo apt install opera-stable chromium-browser 
```

```
opera-stable is already the newest version (93.0.4585.11).
The following additional packages will be installed:
  chromium libgl1-mesa-glx
The following packages will be REMOVED:
  chromium-codecs-ffmpeg-extra
```

```
sudo apt install opera-stable chromium-browser firefox
```

## 安装cbatticon

```
$ sudo apt install cbatticon
```

## 恢复默认网卡为eth0

```
sudo gedit /etc/default/grub
```

```
查找
GRUB_CMDLINE_LINUX=""
修改为
GRUB_CMDLINE_LINUX="net.ifnames=0 biosdevname=0"
或
GRUB_CMDLINE_LINUX="net.ifnames=0 biosdevname=0 nomodeset"
```

重新生成grub引导配置文件

```
sudo grub-mkconfig -o /boot/grub/grub.cfg
或者
sudo update-grub
```

---

# modprob blacklist

```
ll /etc/modprobe.d/blacklist.conf
sudo cp /etc/modprobe.d/blacklist.conf /etc/modprobe.d/blacklist.conf.bk
sudo chmod 666 /etc/modprobe.d/blacklist.conf
sudo sh -c 'echo "blacklist vga16fb">>/etc/modprobe.d/blacklist.conf'
sudo sh -c 'echo "blacklist nouveau">>/etc/modprobe.d/blacklist.conf'
sudo sh -c 'echo "blacklist rivafb">>/etc/modprobe.d/blacklist.conf'
sudo sh -c 'echo "blacklist rivatv">>/etc/modprobe.d/blacklist.conf'
sudo sh -c 'echo "blacklist nvidiafb">>/etc/modprobe.d/blacklist.conf'
cat /etc/modprobe.d/blacklist.conf
sudo chmod 644 /etc/modprobe.d/blacklist.conf
sudo update-initramfs -u
sudo reboot -h now
```

## 安装配置 conky

```
$ sudo apt install conky conky-all
```

```
The following additional packages will be installed:
  libaudclient2 libircclient1 libxmmsclient6 libxnvctrl0
Suggested packages:
  apcupsd audacious moc mpd xmms
```

```
$ cat /home/andy/.cpu.lua
```

```
function conky_mycpus()
        local file = io.popen("grep -c processor /proc/cpuinfo")
        local numcpus = file:read("*n")
        file:close()
        listcpus = ""
        for i = 1,numcpus
        do listcpus = listcpus.."${cpubar cpu"..tostring(i).."}\n"
         -- do listcpus = listcpus.."${offset 0}Core "..tostring(i).." ${color ff8300}${cpubar cpu"..tostring(i).." 6}${color FFFDE2}\n"
         -- do  listcpus = listcpus.."${cpu cpu"..tostring(i).."} "
        end

        return listcpus
end
```

```
$ cat /home/andy/.config/conky/conky.conf
```

```
conky.config = {
lua_load = '~/.cpu.lua',
background = true,
use_xft = true,
font = 'monospace:size=9',
xftalpha = 1,
update_interval = 1.0,
total_run_times = 0,
own_window = true,
own_window_transparent = true,
own_window_type = 'desktop',
own_window_hints = 'undecorated,below,sticky,skip_taskbar,skip_pager',
own_window_colour = 'black',
double_buffer = true,
minimum_height = 390,
maximum_width = 340,
draw_shades = false,
draw_outline = false,
draw_borders = false,
draw_graph_borders = false,
default_color = 'white',
default_shade_color = '000000',
default_outline_color = 'd9d7d6',
alignment = 'top_right',
gap_x = 12,
gap_y = 12,
no_buffers = true,
uppercase = false,
cpu_avg_samples = 2,
override_utf8_locale = false,
color1 = 'gray',
color2 = 'gray',
color3 = 'gray',
}

conky.text = [[
#${pre_exec nproc}
#${execi 86400 nproc}
##${exec nproc}
${color2}${font sans:normal:size=9}CPU ${cpu cpu0}%${color1}
${lua_parse conky_mycpus}
#${cpu cpu0} is the total usage
#${cpubar cpu1}
#${cpubar cpu2}
#${cpubar cpu3}
#${cpubar cpu4}
#${cpubar cpu5}
#${cpubar cpu6}
#${cpubar cpu7}
#${cpubar cpu8}
#${cpubar cpu9}
#${cpubar cpu10}
#${cpubar cpu11}
#${cpubar cpu12}
#${cpubar cpu13}
#${cpubar cpu14}
#${cpubar cpu15}
#${cpubar cpu16}
${color2}${font sans:normal:size=9}RAM ${color1} $alignr$mem/$memmax
${membar}
#${memgraph 30,555 AAF5D0 00B35B}
${if_existing /proc/net/route wlan0}
NET1: wireless 
${upspeed wlan0}/s$alignr${totalup wlan0}
${upspeedgraph wlan0 25,150 0000ff ff0000}
${downspeed wlan0}/s$alignr${totaldown wlan0}
${downspeedgraph wlan0 25,150 00ff00 d000d0}
${endif}
NET2: wired
${upspeed eth0}/s$alignr${totalup eth0}
${upspeedgraph eth0 25,150 0000ff ff0000}
${downspeed eth0}/s$alignr${totaldown eth0}
${downspeedgraph eth0 25,150 00ff00 d000d0}
#
#${color2}${font sans:normal:size=9}SYSTEM ${color1}${hr 2}
#${color1}${font sans:normal:size=9}$sysname $kernel $alignr $machine
#Host:$alignr$nodename
#Uptime:$alignr$uptime
#
${color2}${font sans:bold:size=9}TOP PROCESSES ${color1}${hr 2}
${color1}${font sans:normal:size=9}${top_mem name 1}${alignr}${top mem 1} %
${top_mem name 2}${alignr}${top mem 2} %
${top_mem name 3}${alignr}${top mem 3} %

${color2}${font sans:bold:size=9}SHORTCUT KEYS ${color1}${hr 2}${color1}${font sans:normal:size=9}
Super+space$alignr Main Menu
Super+t$alignr Terminal
Super+f$alignr File Manager
Super+e$alignr Editor
Super+w$alignr Web Browser
Super+q$alignr Force Quit
Super+r$alignr Read the DOC
Super+a$alignr Toggle Maximize
Super+h$alignr Toggle Horizontal
Super+v$alignr Toggle Vertical
Super+c$alignr Move to Center
Super+Arrow$alignr Move
Alt+F3$alignr Dmenu
Alt+Super+Arrow$alignr Resize]]
```

```
$ sudo apt install volumeicon-alsa gnome-icon-theme
```

```
gnome-icon-theme is already the newest version (3.12.0-4).
Suggested packages:
  alsamixergui | aumix-gtk | kmix | gnome-alsamixer
```

## 高级剪贴板

```
$ sudo apt install parcellite
```

```
$ parcellite
Looking in '/etc/xdg/xdg-openbox/parcellite/parcelliterc'
Looking in '/etc/xdg/parcellite/parcelliterc'
Looking in '/etc/xdg/xdg-openbox/parcellite/parcelliterc'
Looking in '/etc/xdg/parcellite/parcelliterc'
parcelliteNo magic! Assume no history.
Attempt to unlock mutex that was not locked
Aborted (core dumped)
```

如果出问题，删除 $HOME/.local/share/parcellite 目录，就可以修复

```
The following additional packages will be installed:
  libayatana-appindicator1 libayatana-indicator7 libdbusmenu-gtk4
```

## 截图工具

```
$ sudo apt install shutter
```

```
The following additional packages will be installed:
  gir1.2-goocanvas-2.0 libcarp-always-perl libclass-accessor-perl
  libcommon-sense-perl libcrypt-openssl-bignum-perl
  libcrypt-openssl-random-perl libcrypt-openssl-rsa-perl libdigest-hmac-perl
  libfile-copy-recursive-perl libfile-which-perl libgoocanvas-2.0-9
  libgoocanvas-2.0-common libgoocanvas2-cairotypes-perl libgoocanvas2-perl
  libgtk3-imageview-perl libhttp-server-simple-perl libimage-exiftool-perl
  libimage-magick-perl libimage-magick-q16-perl libjson-perl libjson-xs-perl
  libmime-charset-perl libnet-dbus-glib-perl libnet-oauth-perl
  libnumber-bytes-human-perl libpath-class-perl libproc-simple-perl libsombok3
  libsort-naturally-perl libtypes-serialiser-perl libunicode-linebreak-perl
  libwww-mechanize-perl libx11-protocol-other-perl libxml-simple-perl
Suggested packages:
  libposix-strptime-perl imagemagick-doc libencode-hanextra-perl
  libpod2-base-perl
```

```
cp /usr/share/applications/shutter.desktop ~/.config/autostart/
```

## 基本编译工具

```
$ sudo apt install g++ make autoconf libtool automake cmake cmake-gui
```

```
Note, selecting 'cmake-qt-gui' instead of 'cmake-gui'
autoconf is already the newest version (2.71-2).
autoconf set to manually installed.
automake is already the newest version (1:1.16.5-1.3).
automake set to manually installed.
g++ is already the newest version (4:11.2.0-1ubuntu1).
g++ set to manually installed.
libtool is already the newest version (2.4.6-15build2).
libtool set to manually installed.
make is already the newest version (4.3-4.1build1).
The following additional packages will be installed:
  cmake-data dh-elpa-helper librhash0
Suggested packages:
  cmake-doc ninja-build cmake-format
```

## 屏保 xscreensaver

```
sudo apt install xscreensaver libopengl-xscreensaver-perl xscreensaver-data xscreensaver-data-extra xscreensaver-gl xscreensaver-gl-extra xscreensaver-screensaver-bsod xscreensaver-screensaver-dizzy xscreensaver-screensaver-webcollage fonts-freefont-ttf
```

```
fonts-freefont-ttf is already the newest version (20120503-10build1).
The following additional packages will be installed:
  dizzy fonts-sil-gentium fonts-sil-gentium-basic freeglut3 gsfonts-x11
  libalien-sdl-perl libclass-inspector-perl libconvert-color-perl
  libfile-sharedir-perl libfluidsynth3 libgdk-pixbuf-xlib-2.0-0 libgle3
  libinstpatch-1.0-2 libjpeg-turbo-progs libmad0 libmikmod3
  libmodule-pluggable-perl libopengl-perl libsdl-gfx1.2-5 libsdl-image1.2
  libsdl-mixer1.2 libsdl-pango1 libsdl-perl libsdl-ttf2.0-0 libsdl1.2debian
  libtie-simple-perl timgm6mb-soundfont
Suggested packages:
  fluid-soundfont-gm fortune xdaliclock xfishtank
The following packages will be REMOVED:
  libjpeg-progs
```

```
$ touch ~/.xinitrc
$ gedit ~/.xinitrc
$ cat ~/.xinitrc
xscreensaver -no-splash
```

## 补全网络工具

```
sudo apt install network-manager-dev network-manager-openvpn network-manager-pptp network-manager-vpnc network-manager-openconnect network-manager-iodine pppoe ppp pppoeconf pppconfig
```

```
network-manager-openvpn is already the newest version (1.8.18-1).
network-manager-pptp is already the newest version (1.2.10-1).
ppp is already the newest version (2.4.9-1+1ubuntu3).
pppconfig is already the newest version (2.3.26).
pppoeconf is already the newest version (1.21+nmu2ubuntu1).
The following additional packages will be installed:
  iodine libopenconnect5 libpskc0 libstoken1 libtomcrypt1 libtss2-tctildr0
  libxmlsec1-openssl openconnect python3-asn1crypto python3-mechanize vpnc
  vpnc-scripts
Suggested packages:
  fping | oping ipcalc network-manager-iodine-gnome resolvconf dnsmasq
```

## openbox环境的一些补充

```
$ sudo apt install openbox-dev
The following additional packages will be installed:
  bzip2-doc libbz2-dev libgif-dev libid3tag0-dev libimlib2-dev librsvg2-dev
  libwebp-dev
Suggested packages:
  librsvg2-doc
```

```
sudo apt install lxappearance-obconf adwaita-icon-theme-full
```

## 其他一些杂碎

```
sudo apt install libgtk2.0-dev libglib2.0-dev
```

```
$ sudo apt install libgconf2-dev
```

```
The following additional packages will be installed:
  gconf-service gconf-service-backend gconf2 gconf2-common gir1.2-gconf-2.0
  libdbus-1-dev libgconf-2-4 libgconf2-doc
Suggested packages:
  gconf-defaults-service
```

```
$ sudo apt install libgstreamer1.0-dev
```

```
The following additional packages will be installed:
  libdw-dev libelf-dev libunwind-dev
Suggested packages:
  gstreamer1.0-doc
```

```
$ sudo apt install libgst-dev
```

```
The following additional packages will be installed:
  libgst7
```

```
//sudo apt install python-pip
The following additional packages will be installed:
  libpython2-stdlib libpython2.7-minimal libpython2.7-stdlib
  python-pkg-resources python-setuptools python2 python2-minimal python2.7
  python2.7-minimal
Suggested packages:
  python-setuptools-doc python2-doc python-tk python2.7-doc binfmt-support
Recommended packages:
  python2-dev
```

```
$ sudo apt install python3-pip
The following additional packages will be installed:
  python3-setuptools python3-wheel
Suggested packages:
  python-setuptools-doc

sudo apt-get install python-is-python3
```

```
$ sudo apt install gtk-theme-switch gtk2-engines
gtk2-engines is already the newest version (1:2.20.2-5build2).
The following NEW packages will be installed:
  gtk-theme-switch
```

```
sudo apt install libreoffice-l10n-en-za libreoffice-l10n-en-gb libreoffice-help-en-gb hyphen-en-gb hunspell-en-ca mythes-en-au hunspell-en-za hunspell-en-au hunspell-en-gb gimp-help-common gimp-help-en thunderbird-locale-en-gb gimp gimp-data-extras
```

## home_andy_openbox_base.tar.bz2

解压出来到~

## 全局文件查找 mlocate

```
sudo apt install mlocate
sudo updatedb
```

## 配置pcmanfm

修改pcmanfm的默认shell

```
x-terminal-emulator %s
```

to

```
lxterminal
```

~/.config/libfm/libfm.conf

deb系的可以这配置terminal

```
sudo update-alternatives --config  x-terminal-emulator
```

pcmanfm的bookmark文件在

```
/home/andy/.config/gtk-3.0/bookmarks
```

## 配置lxterminal

回滚设置成10000行

光标闪烁cursor blink

字体monospace 12号

背景 透明度200

## 配置  volumeicon

```
$ sudo apt install alsamixergui
```

```
The following additional packages will be installed:
  libfltk1.1
```

```
$ sudo apt install xterm
```

```
The following additional packages will be installed:
  libutempter0
Suggested packages:
  xfonts-cyrillic
```

```
$ gedit ~/.config/volumeicon/volumeicon
```

从
`xterm -bg black -e 'alsamixer'`
改成
`alsamixergui`

从
`xterm -e 'alsamixer'`
改成
`alsamixergui`
不好看，换成lxterminal

```
$ gedit ~/.config/volumeicon/volumeicon
```

从
`xterm -e 'alsamixer'`
改成
`lxterminal -e 'alsamixer'`

## tint2 systraybar icons color keep going black

[https://forum.maboxlinux.org/t/problem-with-battery-icon/335/2](https://forum.maboxlinux.org/t/problem-with-battery-icon/335/2)
在 `tint2conf`里修改 `system tray`

`Icon saturation`为37
`Icon brightness`为48

都恢复为0好了

试试lxpanel，好像也不好

```
$ sudo apt install lxpanel
The following additional packages will be installed:
  libkeybinder0 libwnck-common libwnck22 lxpanel-data pavucontrol
```

---

# * * *

# 启用 swapfile

查看系统是否有交换分区：

`sudo swapon --show`

free命令用来查看空闲的内存空间，其中包括交换分区的空间。

`free -h`

检查当前磁盘的使用情况：

`df -h`

创建swap文件

使用以下命令创建swapfile

`sudo fallocate -l 8G /swapfile`

经过测试，OpenSuSE系统要使用以下命令才能成功创建swapfile

`sudo dd if=/dev/zero of=/swapfile count=4096 bs=1MiB`

使用以下命令查看是否正确创建。

`ls -lh /swapfile`

结果应该类似下面这样：

```
-rw-r--r-- 1 root root 8.0G Apr 26 17:04 /swapfile
```

修改swapfile权限

`sudo chmod 600 /swapfile`

查看效果

`ls -lh /swapfile`

结果应该类似下面这样：

```
-rw------- 1 root root 8.0G Apr 26 17:04 /swapfile
```

激活交换空间

`sudo mkswap /swapfile`
`sudo swapon /swapfile`

之后使用以下命令查看使用成功开启交换空间：

`sudo swapon --show`

结果类似下面这样：

```
NAME      TYPE SIZE USED PRIO

/swapfile file   8G   0B   -1
```

添加到fstab

这样每次开机系统就会自动吧swapfile挂载为交换空间。 首先请自行备份fstab文件。 然后把以下配置添加到fstab文件末尾。

```
/swapfile none swap sw 0 0
```

或者直接使用以下命令：

`sudo cp /etc/fstab /etc/fstab.bak`

`echo '/swapfile none swap sw 0 0' | sudo tee -a /etc/fstab`

---

# pasystray

```
sudo apt install xfce4-pulseaudio-plugin pulseaudio-utils pulseaudio-module-zeroconf pulseaudio-module-raop pulseaudio-module-lirc pulseaudio-module-jack pulseaudio-module-bluetooth pulseaudio-equalizer pulseaudio-dlna gstreamer1.0-pulseaudio mkchromecast-pulseaudio osspd-pulseaudio pulsemixer
sudo apt install pasystray paprefs pavumeter pulseaudio-module-zeroconf
sudo apt install bluetooth bluez bluez-cups bluez-tools btscanner gnome-bluetooth python3-bluez pulseaudio-module-bluetooth blueman rfkill bluez-meshd
```

---

# wine

## wine quick config

比如已经安装了winehq-7.21-staging，winetricks-20220411-next
`sudo apt-get install --install-recommends --fix-missing --reinstall winehq-staging=7.21~jammy-1 wine-staging=7.21~jammy-1 wine-staging-amd64=7.21~jammy-1 wine-staging-i386=7.21~jammy-1`

```
//rm -rf ~/.wine
rm -f ~/.local/share/applications/wine-extension*.desktop
rm -f ~/.local/share/icons/hicolor/*/*/application-x-wine-extension*
rm -f ~/.local/share/icons/????_*.{xpm,png}
rm -f ~/.local/share/icons/*-x-wine-*.{xpm,png}
rm -f ~/.local/share/icons/hicolor/*/*/????_*.{xpm,png}
rm -f ~/.local/share/icons/hicolor/*/*/*-x-wine-*.{xpm,png}
rm -f ~/.local/share/icons/hicolor/*/*/*.{xpm,png}
rm -f ~/.local/share/applications/mimeinfo.cache
rm -f ~/.local/share/mime/packages/x-wine*
rm -f ~/.local/share/mime/application/x-wine-extension*
rm -rf ~/.local/share/applications/*
rm -f ~/.config/menus/applications-merged/*
update-desktop-database ~/.local/share/applications/
update-mime-database ~/.local/share/mime/
```

~/.bashrc

```
export WINEPREFIX=$HOME/.wine/
# export WINEARCH=win32
export WINEARCH=win64
export LANG=zh_CN.UTF-8
# alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine wine'
alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=$HOME/.wine wine'
```

安装一些基础工具

```
winecfg
wine regedit
wine explorer
//wine iexplore
wine msiexec /i wine-mono-7.4.0-x86.msi
wine msiexec /i wine-gecko-2.47.3-x86.msi
wine msiexec /i wine-gecko-2.47.3-x86_64.msi

winetricks -q gdiplus riched20 riched30
winetricks -q allfonts
winetricks --force cjkfonts fakechinese fakejapanese fakekorean fakejapanese_ipamona fakejapanese_vlgothic pptfonts

然后把ms的一些fonts复制进来，并更新reg
wine regedit /S ch_font.reg

wine winrar-x64-611.exe    ## 默认文件类型关联即可
wine "Foxit Reader Pro 3.0 Build 1817.exe"   ## 勾选创建桌面快捷方式

winetricks -q vb6run vcrun6 vcrun6sp6 secur32 msvcirt mfc42 cmd comctl32 vcrun2003 msxml3 cmd comctl32 vcrun2005
```

批量修复desktop文件

```
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")
for files in `find -name '*.desktop'`; do echo $files | sed 's/$/"/' | sed 's/^/"/' | xargs perl -pi -e 's|^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$|$1$2|g' ; done
for files in `find -name '*.desktop'`; do echo $files | sed 's/$/"/' | sed 's/^/"/' | xargs perl -pi -e 's|^Exec\=env\ WINEPREFIX\=(.*)$|Exec\=env\ LANG=zh\_CN.UTF\-8\ WINEPREFIX\=$1|' ; done
```

## winehq版本（有缺陷我无法搞定）

[https://www.winehq.org](https://www.winehq.org)
[https://wiki.winehq.org/Ubuntu](https://wiki.winehq.org/Ubuntu)

```
sudo dpkg --add-architecture i386
//wget -O - https://dl.winehq.org/wine-builds/winehq.key | sudo apt-key add -
//sudo apt-key add /usr/share/keyrings/winehq-archive.key

sudo mkdir -pm755 /etc/apt/keyrings
sudo wget -O /etc/apt/keyrings/winehq-archive.key https://dl.winehq.org/wine-builds/winehq.key
sudo wget -NP /etc/apt/sources.list.d/ https://dl.winehq.org/wine-builds/ubuntu/dists/jammy/winehq-jammy.sources

```

这key名字不能修改，比如后缀改成gpg就是不行。

```
cat /etc/apt/sources.list.d/winehq-jammy.sources
Types: deb
URIs: https://dl.winehq.org/wine-builds/ubuntu
Suites: jammy
Components: main
Architectures: amd64 i386
Signed-By: /etc/apt/keyrings/winehq-archive.key
```

如果key没有设置对就有报错

```
$ sudo apt update
W: GPG error: https://dl.winehq.org/wine-builds/ubuntu jammy InRelease: The following signatures couldn't be verified because the public key is not available: NO_PUBKEY 76F1A20FF987672F
E: The repository 'https://dl.winehq.org/wine-builds/ubuntu jammy InRelease' is not signed
```

尝试解决，下面几句都不行，实际上wine的key文件的名字或者后缀不能修改，最好是按官方说明放 `/etc/apt/keyrings/winehq-archive.key`

```
$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-key 76F1A20FF987672F
$ sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 76F1A20FF987672F
$ gpg --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys 76F1A20FF987672F
```

解决了key问题就可以安装了，可以选winehq-stable，winehq-devel，winehq-staging, 这里我用winehq-staging(还是换回winehq-stable)
[https://wiki.winehq.org/Wine_User%27s_Guide#Wine_from_WineHQ](https://wiki.winehq.org/Wine_User%27s_Guide#Wine_from_WineHQ)

```
$ sudo apt update
$ sudo apt install --install-recommends winehq-staging --fix-missing
```

```
The following additional packages will be installed:
  gstreamer1.0-plugins-base:i386 i965-va-driver:i386 intel-media-va-driver:i386 libasound2:i386 libasound2-plugins:i386 libbz2-1.0:i386 libcdparanoia0:i386
  libcurl3-gnutls:i386 libcurl4:i386 libdb5.3:i386 libdecor-0-0:i386 libdecor-0-plugin-1-cairo:i386 libdrm-intel1:i386 libdw1:i386 libexif12:i386 libgd3:i386
  libgdbm-compat4:i386 libgdbm6:i386 libglu1-mesa:i386 libgphoto2-6:i386 libgphoto2-port12:i386 libgstreamer-plugins-base1.0-0:i386 libgstreamer1.0-0:i386
  libieee1284-3:i386 libigdgmm12:i386 libjack-jackd2-0:i386 libldap-2.5-0:i386 libltdl7:i386 libnghttp2-14:i386 libnspr4:i386 libnss3:i386 libodbc1:i386 libodbc1
  libodbc2 libodbc2:i386 libodbccr2 libodbccr2:i386 libopengl0:i386 libopenjp2-7:i386 liborc-0.4-0:i386 libosmesa6 libosmesa6:i386 libpcap0.8:i386 libpci3:i386
  libpciaccess0:i386 libperl5.34:i386 libpoppler-glib8:i386 libpoppler118:i386 libpsl5:i386 librtmp1:i386 libsamplerate0:i386 libsane1:i386 libsasl2-2:i386
  libsasl2-modules:i386 libsasl2-modules-db:i386 libsdl2-2.0-0:i386 libsnmp40:i386 libsqlite3-0:i386 libssh-4:i386 libtheora0:i386 libunwind8:i386 libusb-1.0-0:i386
  libv4l-0:i386 libv4lconvert0:i386 libva-drm2:i386 libva-x11-2:i386 libva2:i386 libvisual-0.4-0:i386 libwrap0:i386 libxpm4:i386 libxss1:i386 mesa-va-drivers:i386
  ocl-icd-libopencl1:i386 va-driver-all:i386 wine-staging wine-staging-amd64 wine-staging-i386:i386
Suggested packages:
  gvfs:i386 i965-va-driver-shaders:i386 libgd-tools:i386 gdbm-l10n:i386 gphoto2:i386 libvisual-0.4-plugins:i386 gstreamer1.0-tools:i386 jackd2:i386 odbc-postgresql
  tdsodbc odbc-postgresql:i386 tdsodbc:i386 hplip:i386 libsasl2-modules-gssapi-mit:i386 | libsasl2-modules-gssapi-heimdal:i386 libsasl2-modules-ldap:i386
  libsasl2-modules-otp:i386 libsasl2-modules-sql:i386 opencl-icd:i386
Recommended packages:
  sane-airscan:i386
```

```
$ sudo apt install --install-recommends winehq-stable

The following packages were automatically installed and are no longer required:
  i965-va-driver:i386 intel-media-va-driver:i386 libdrm-intel1:i386
  libigdgmm12:i386 libpciaccess0:i386 libva-drm2:i386 libva-x11-2:i386
  libva2:i386 mesa-va-drivers:i386 va-driver-all:i386 wine-staging
  wine-staging-amd64 wine-staging-i386:i386
Use 'sudo apt autoremove' to remove them.
The following additional packages will be installed:
  libcapi20-3:i386 libcapi20-3 libgsm1:i386 libopenal1:i386 libsndio7.0:i386
  libxslt1.1:i386 wine-stable wine-stable-amd64 wine-stable-i386:i386
Suggested packages:
  libportaudio2:i386 sndiod:i386
The following packages will be REMOVED:
  winehq-staging

$ sudo apt autoremove
The following packages will be REMOVED:
  i965-va-driver:i386 intel-media-va-driver:i386 libdrm-intel1:i386 libigdgmm12:i386 libpciaccess0:i386 libva-drm2:i386 libva-x11-2:i386 libva2:i386
  mesa-va-drivers:i386 va-driver-all:i386 wine-staging wine-staging-amd64 wine-staging-i386:i386
```

winetricks(最好从github下最新的)
[https://github.com/Winetricks/winetricks/tree/master/src](https://github.com/Winetricks/winetricks/tree/master/src)

vcrun6 and vcrun6sp6 don't install and break wine prefix
[https://github.com/Winetricks/winetricks/issues/1804](https://github.com/Winetricks/winetricks/issues/1804)

```
$ sudo apt install winetricks 
The following additional packages will be installed:
  fuseiso
Suggested packages:
  tor

$ winetricks --version
20210206 - sha256sum: 0f21da98811e0bfda16a7d6d6b8e860a9cedbd4e836c7dd9b02f068d3092ee2e
```

playonlinux（没啥卵用）
[https://www.playonlinux.com/en/](https://www.playonlinux.com/en/)
[https://www.playonlinux.com/en/documentation.html](https://www.playonlinux.com/en/documentation.html)
[https://www.how2shout.com/linux/how-to-install-playonlinux-on-ubuntu-22-04-lts-jammy/](https://www.how2shout.com/linux/how-to-install-playonlinux-on-ubuntu-22-04-lts-jammy/)
[https://linuxhint.com/run_32_bit_windows_64_bit_unbuntu/](https://linuxhint.com/run_32_bit_windows_64_bit_unbuntu/)

```
$ sudo apt install playonlinux 
The following additional packages will be installed:
  icoutils jq libjq1 libonig5 libwxbase3.0-0v5 libwxgtk3.0-gtk3-0v5 python3-natsort python3-numpy python3-wxgtk4.0
Suggested packages:
  libterm-readline-gnu-perl | libterm-readline-perl-perl winbind python-natsort-doc gfortran python-numpy-doc python3-pytest wx3.0-doc
```

```
$ playonlinux --version
PlayOnLinux 4.3.4
```

如果要删除

```
$ sudo apt autoremove playonlinux -y
```

Installing without Internet

```
sudo apt-get clean
sudo apt-get --download-only install winehq-<branch>
sudo apt-get --download-only dist-upgrade
```

To check the version

```
$ wine --version
wine-7.21 (Staging)
```

Setup Wine

```
$ export WINEARCH=win32
$ export WINEPREFIX=~/.wine32
$ winecfg
$ wine regedit     # 产生基本的*.desktop

$ ls ~/.cache/wine/
```

安装Mono

[https://wiki.winehq.org/Mono](https://wiki.winehq.org/Mono)

[https://wiki.winehq.org/Gecko](https://wiki.winehq.org/Gecko)

[http://mirrors.ustc.edu.cn/wine/wine/wine-mono/](http://mirrors.ustc.edu.cn/wine/wine/wine-mono/)

[http://mirrors.ustc.edu.cn/wine/wine/wine-gecko/](http://mirrors.ustc.edu.cn/wine/wine/wine-gecko/)

[https://dl.winehq.org/wine/wine-gecko/](https://dl.winehq.org/wine/wine-gecko/)

[https://dl.winehq.org/wine/wine-mono/](https://dl.winehq.org/wine/wine-mono/)

wine运行exe

```
env LANG=zh_CN.UTF-8 WINEPREFIX="/home/andy/.wine" wine XXXXXXXX.exe
```

```
export WINEPREFIX=$HOME/.wine/
export WINEARCH=win32
export LANG=zh_CN.UTF-8
wine xxx.exe
unset  WINEARCH=win32
```

```
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=/home/andy/.wine wine xxx.exe
```

~/.bashrc

```
export WINEPREFIX=$HOME/.wine/
# export WINEARCH=win32
export WINEARCH=win64
export LANG=zh_CN.UTF-8
# alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=/home/andy/.wine wine'
alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=/home/andy/.wine wine'
```

winehq-staging 自动安装的wine-mono-7.4.0-x86.msi等

winehq-stable 自动安装的wine-mono-7.0.0-x86.msi，wine-gecko-2.47.2-x64.msi，wine-gecko-2.47.2-x86.msi

winecfg时候自动安装mono，比如安装winrar-x64-611.exe之前会自动安装64位gecho，安装winrar-x32-611.exe之前会自动安装32位gecho

msi下载到 `~/.cache/wine`就自动安装，手动安装按下面命令

```
$ export WINEARCH=win32
$ export WINEPREFIX=~/.wine32
$ winecfg
$ wine msiexec /i wine-mono-7.4.0-x86.msi
$ wine msiexec /i wine-gecko-2.47.3-x86.msi
```

```
$ export WINEARCH=win64
$ export WINEPREFIX=~/.wine
$ winecfg
$ wine msiexec /i wine-mono-7.4.0-x86.msi
$ wine msiexec /i wine-gecko-2.47.3-x86.msi
$ wine msiexec /i wine-gecko-2.47.3-x86_64.msi
```

查看已经安装的

```
$ wine uninstaller
```

Running .msi files

```
wine msiexec /i whatever.msi
```

or

```
wine start whatever.msi
```

run Windows programs from the command line

```
cd '.wine/drive_c/Games/Tron'
wine tron.exe 
```

```
$ wine "C:\Program Files\appname\appname.exe"
$ wine start 'C:\Games\Tron\tron.exe'
$ wine start "C:\\Games\\Tron\\tron.exe"
$ wine start /unix "$HOME/installers/TronSetup.exe"
```

basic applications and control panel applets

```
$ wine uninstaller
$ wine control
$ wine wineconsole
$ wine regedit
$ wine clock
$ wine iexplore
$ wineserver -h
$ wine taskmgr
$ wine explorer
$ wine explorer /desktop=name,1024x768 program.exe
$ WINEDEBUG=+all,-relay wine program_name

$ wineboot

$ wineserver -k
$ wineserver -k9
```

WINEARCH

```
win32 (support only 32-bit applications)
win64 (support both 64-bit applications and 32-bit ones in WoW64 mode)
```

WINEPREFIX

```
export WINEPREFIX=~/.wine-new
wine winecfg 
```

```
WINEPREFIX=path_to_wineprefix wine winecfg 
```

```
WINEARCH=win32 WINEPREFIX=path_to_wineprefix winecfg
```

```
WINEPREFIX=path_to_wineprefix wine start /unix path_to_installer
```

```
WINEPREFIX="$HOME/.wine-second" wine second-program.exe 
```

重启wine

```
wineboot
```

用winetricks配置wine

```
$ winetricks --gui
```

wine winrar
[https://www.win-rar.com/download.html?&amp;L=0](https://www.win-rar.com/download.html?&L=0)
[https://linuxhint.com/install-wine-ubuntu-22-04/](https://linuxhint.com/install-wine-ubuntu-22-04/)

影响的文件所在位置

```
/home/andy/.config/menus/applications-merged/
/home/andy/.config/menus/cinnamon-applications-merged
/home/andy/.local/share/applications/wine
/home/andy/.local/share/applications
/home/andy/.local/share/icons/hicolor
/home/andy/.local/share/mime/application
/home/andy/.local/share/mime/packages/
```

```
Usage: update-mime-database [-hvVn] MIME-DIR
The databases in
/usr/share/gnome/applications, 
/usr/share/cinnamon/applications, 
/usr/share/gnome/applications, 
/home/andy/.local/share/flatpak/exports/share/applications, 
/var/lib/flatpak/exports/share/applications, 
/usr/local/share/applications, 
/usr/share/applications, 
/var/lib/snapd/desktop/applications
could not be updated.
```

## 删除wine关联

[https://appuals.com/unregister-wine-file-associations-linux/](https://appuals.com/unregister-wine-file-associations-linux/)
[https://wiki.winehq.org/FAQ#How_do_I_get_Wine_to_launch_an_application_in_a_virtual_desktop.3F](https://wiki.winehq.org/FAQ#How_do_I_get_Wine_to_launch_an_application_in_a_virtual_desktop.3F)

```
//rm -rf ~/.wine
rm -f ~/.local/share/applications/wine-extension*.desktop
rm -f ~/.local/share/icons/hicolor/*/*/application-x-wine-extension*
rm -f ~/.local/share/icons/????_*.{xpm,png}
rm -f ~/.local/share/icons/*-x-wine-*.{xpm,png}
rm -f ~/.local/share/icons/hicolor/*/*/????_*.{xpm,png}
rm -f ~/.local/share/icons/hicolor/*/*/*-x-wine-*.{xpm,png}
rm -f ~/.local/share/applications/mimeinfo.cache
rm -f ~/.local/share/mime/packages/x-wine*
rm -f ~/.local/share/mime/application/x-wine-extension*
rm -rf ~/.local/share/applications/*
rm -f ~/.config/menus/applications-merged/*
update-desktop-database ~/.local/share/applications/
update-mime-database ~/.local/share/mime/
```

命令行mime工具

```
xdg-mime query filetype [filename]
mimetype [filename]
mimeopen -d [/path/to/file]
```

图形化mime工具

```
$ sudo apt install xfce4-settings

The following additional packages will be installed:
  elementary-xfce-icon-theme exo-utils greybird-gtk-theme libexo-2-0 libexo-common libgarcon-1-0 libgarcon-common libxfce4ui-2-0 libxfce4ui-common libxfce4util-bin
  libxfce4util-common libxfce4util7 libxfconf-0-3 xfce4-helpers xfconf xiccd
Suggested packages:
  devhelp

$ xfce4-mime-settings

```

winehq目前发现缺陷

驱动器在通过desktop文件比如打开rar文件的时候丢失，于是打不开

```
Exec=env WINEPREFIX="/home/andy/.wine/dosdevices/e:/home/andy/.wine" wine start /ProgIDOpen WinRAR %f
```

如果没有同时打开winecfg，那么e盘会丢失，发现改成

```
Exec=env WINEPREFIX="/home/andy/.wine/dosdevices/z:/home/andy/.wine" wine start /ProgIDOpen WinRAR %f
```

就可以打开。

## 全删，用repo自带的wine版本

```
//$ sudo apt-get remove winehq-staging --purge
$ sudo apt autoremove winehq-staging playonlinux

The following packages will be REMOVED:
  fuseiso gstreamer1.0-plugins-base:i386 i965-va-driver:i386 icoutils intel-media-va-driver:i386 jq libasound2:i386 libasound2-plugins:i386 libcdparanoia0:i386
  libcurl3-gnutls:i386 libcurl4:i386 libdecor-0-0:i386 libdecor-0-plugin-1-cairo:i386 libdrm-intel1:i386 libdw1:i386 libexif12:i386 libgd3:i386 libgdbm-compat4:i386
  libgdbm6:i386 libglu1-mesa:i386 libgphoto2-6:i386 libgphoto2-port12:i386 libgstreamer-plugins-base1.0-0:i386 libgstreamer1.0-0:i386 libieee1284-3:i386
  libigdgmm12:i386 libjack-jackd2-0:i386 libjq1 libldap-2.5-0:i386 libltdl7:i386 libnghttp2-14:i386 libnspr4:i386 libnss3:i386 libodbc1:i386 libodbc1 libodbc2
  libodbc2:i386 libodbccr2 libodbccr2:i386 libonig5 libopengl0:i386 libopenjp2-7:i386 liborc-0.4-0:i386 libosmesa6:i386 libpcap0.8:i386 libpci3:i386 libpciaccess0:i386
  libperl5.34:i386 libpoppler-glib8:i386 libpoppler118:i386 libpsl5:i386 librtmp1:i386 libsamplerate0:i386 libsane1:i386 libsasl2-2:i386 libsasl2-modules:i386
  libsasl2-modules-db:i386 libsdl2-2.0-0:i386 libsnmp40:i386 libsqlite3-0:i386 libssh-4:i386 libtheora0:i386 libunwind8:i386 libusb-1.0-0:i386 libv4l-0:i386
  libv4lconvert0:i386 libva-drm2:i386 libva-x11-2:i386 libva2:i386 libvisual-0.4-0:i386 libwrap0:i386 libxpm4:i386 libxss1:i386 mesa-va-drivers:i386
  ocl-icd-libopencl1:i386 playonlinux python3-natsort va-driver-all:i386 wine-staging wine-staging-amd64 wine-staging-i386:i386 winehq-staging winetricks

```

```
$ sudo rm -rf /etc/apt/keyrings/
$ sudo rm /etc/apt/sources.list.d/winehq-jammy.sources 
$ sudo apt update
```

```
$ sudo apt-get --install-recommends install playonlinux

The following additional packages will be installed:
  fonts-wine glib-networking:i386 gstreamer1.0-plugins-base:i386 gstreamer1.0-plugins-good:i386 gstreamer1.0-x:i386 icoutils jq libaa1:i386 libasound2:i386
  libasound2-plugins:i386 libavc1394-0:i386 libcaca0:i386 libcapi20-3:i386 libcdparanoia0:i386 libcurl4:i386 libdecor-0-0:i386 libdecor-0-plugin-1-cairo:i386
  libdv4:i386 libdw1:i386 libexif12:i386 libfaudio0:i386 libgd3:i386 libgphoto2-6:i386 libgphoto2-port12:i386 libgsm1:i386 libgstreamer-plugins-base1.0-0:i386
  libgstreamer-plugins-good1.0-0:i386 libgstreamer1.0-0:i386 libiec61883-0:i386 libjack-jackd2-0:i386 libjq1 libldap-2.5-0:i386 libltdl7:i386 libmp3lame0:i386
  libmpg123-0:i386 libncurses6:i386 libncursesw6:i386 libnghttp2-14:i386 libodbc2:i386 libonig5 libopenal1:i386 liborc-0.4-0:i386 libosmesa6:i386 libpcap0.8:i386
  libproxy1v5:i386 libpsl5:i386 libraw1394-11:i386 librtmp1:i386 libsamplerate0:i386 libsasl2-2:i386 libsasl2-modules:i386 libsasl2-modules-db:i386 libsdl2-2.0-0:i386
  libshout3:i386 libslang2:i386 libsndio7.0:i386 libsoup2.4-1:i386 libspeex1:i386 libsqlite3-0:i386 libssh-4:i386 libstb0:i386 libtag1v5:i386 libtag1v5-vanilla:i386
  libtheora0:i386 libtwolame0:i386 libunwind8:i386 libusb-1.0-0:i386 libv4l-0:i386 libv4lconvert0:i386 libvisual-0.4-0:i386 libvkd3d1:i386 libvpx7:i386
  libwavpack1:i386 libwine:i386 libxpm4:i386 libxslt1.1:i386 libxss1:i386 libxv1:i386 libz-mingw-w64 ocl-icd-libopencl1:i386 python3-natsort wine wine32:i386
Suggested packages:
  gvfs:i386 libterm-readline-gnu-perl | libterm-readline-perl-perl libdv-bin:i386 oss-compat:i386 libgd-tools:i386 gphoto2:i386 libvisual-0.4-plugins:i386
  gstreamer1.0-tools:i386 jackd2:i386 odbc-postgresql:i386 tdsodbc:i386 libportaudio2:i386 libraw1394-doc:i386 libsasl2-modules-gssapi-mit:i386
  | libsasl2-modules-gssapi-heimdal:i386 libsasl2-modules-ldap:i386 libsasl2-modules-otp:i386 libsasl2-modules-sql:i386 sndiod:i386 speex:i386 gstreamer1.0-libav:i386
  gstreamer1.0-plugins-bad:i386 gstreamer1.0-plugins-ugly:i386 opencl-icd:i386 winbind python-natsort-doc q4wine winetricks wine-binfmt dosbox exe-thumbnailer
  | kio-extras wine32-preloader:i386
Recommended packages:
  libvkd3d-shader1:i386

```

```
$ sudo apt-get --install-recommends install wine

The following additional packages will be installed:
  fonts-wine glib-networking:i386 gstreamer1.0-plugins-base:i386 gstreamer1.0-plugins-good:i386 gstreamer1.0-x:i386 libaa1:i386 libasound2:i386 libasound2-plugins:i386
  libavc1394-0:i386 libcaca0:i386 libcapi20-3:i386 libcapi20-3 libcdparanoia0:i386 libcurl4:i386 libdecor-0-0:i386 libdecor-0-plugin-1-cairo:i386 libdv4:i386
  libdw1:i386 libexif12:i386 libfaudio0 libfaudio0:i386 libgd3:i386 libgphoto2-6:i386 libgphoto2-port12:i386 libgsm1:i386 libgstreamer-plugins-base1.0-0:i386
  libgstreamer-plugins-good1.0-0:i386 libgstreamer1.0-0:i386 libiec61883-0:i386 libjack-jackd2-0:i386 libldap-2.5-0:i386 libltdl7:i386 libmp3lame0:i386
  libmpg123-0:i386 libncurses6:i386 libncursesw6:i386 libnghttp2-14:i386 libodbc2 libodbc2:i386 libopenal1:i386 liborc-0.4-0:i386 libosmesa6:i386 libpcap0.8:i386
  libproxy1v5:i386 libpsl5:i386 libraw1394-11:i386 librtmp1:i386 libsamplerate0:i386 libsasl2-2:i386 libsasl2-modules:i386 libsasl2-modules-db:i386 libsdl2-2.0-0:i386
  libshout3:i386 libslang2:i386 libsndio7.0:i386 libsoup2.4-1:i386 libspeex1:i386 libsqlite3-0:i386 libssh-4:i386 libstb0 libstb0:i386 libtag1v5:i386
  libtag1v5-vanilla:i386 libtheora0:i386 libtwolame0:i386 libunwind8:i386 libusb-1.0-0:i386 libv4l-0:i386 libv4lconvert0:i386 libvisual-0.4-0:i386 libvkd3d1
  libvkd3d1:i386 libvpx7:i386 libwavpack1:i386 libwine libwine:i386 libxpm4:i386 libxslt1.1:i386 libxss1:i386 libxv1:i386 libz-mingw-w64 ocl-icd-libopencl1:i386
  wine32:i386 wine64
Suggested packages:
  gvfs:i386 libdv-bin:i386 oss-compat:i386 libgd-tools:i386 gphoto2:i386 libvisual-0.4-plugins:i386 gstreamer1.0-tools:i386 jackd2:i386 odbc-postgresql tdsodbc
  odbc-postgresql:i386 tdsodbc:i386 libportaudio2:i386 libraw1394-doc:i386 libsasl2-modules-gssapi-mit:i386 | libsasl2-modules-gssapi-heimdal:i386
  libsasl2-modules-ldap:i386 libsasl2-modules-otp:i386 libsasl2-modules-sql:i386 sndiod:i386 speex:i386 gstreamer1.0-plugins-bad gstreamer1.0-libav:i386
  gstreamer1.0-plugins-bad:i386 gstreamer1.0-plugins-ugly:i386 opencl-icd:i386 q4wine winbind winetricks playonlinux wine-binfmt dosbox exe-thumbnailer | kio-extras
  wine32-preloader:i386 wine64-preloader
Recommended packages:
  libvkd3d-shader1 libvkd3d-shader1:i386
```

```
$ sudo apt install winetricks fuseiso
$ winetricks --version
20210206 - sha256sum: 0f21da98811e0bfda16a7d6d6b8e860a9cedbd4e836c7dd9b02f068d3092ee2e
```

```
$ sudo apt install mono-runtime
$ sudo apt install mono-complete
The following additional packages will be installed:
  libjs-xmlextras libmono-2.0-1 libmono-profiler libmonoboehm-2.0-1
  mono-4.0-service mono-utils mono-xsp4 mono-xsp4-base monodoc-base
  monodoc-http monodoc-manual
Suggested packages:
  monodoc-gtk-manual monodoc-gecko-manual monodoc-nunit-manual
```

```
$ sudo cp /usr/share/doc/wine/examples/wine.desktop /usr/share/applications/
```

```
$ sudo apt autoremove wine playonlinux

The following packages will be REMOVED:
  fonts-wine fuseiso glib-networking:i386 gstreamer1.0-plugins-base:i386 gstreamer1.0-plugins-good:i386 gstreamer1.0-x:i386 icoutils jq libaa1:i386 libasound2:i386
  libasound2-plugins:i386 libavc1394-0:i386 libcaca0:i386 libcapi20-3:i386 libcapi20-3 libcdparanoia0:i386 libcurl4:i386 libdecor-0-0:i386
  libdecor-0-plugin-1-cairo:i386 libdv4:i386 libdw1:i386 libexif12:i386 libfaudio0 libfaudio0:i386 libgd3:i386 libgphoto2-6:i386 libgphoto2-port12:i386 libgsm1:i386
  libgstreamer-plugins-base1.0-0:i386 libgstreamer-plugins-good1.0-0:i386 libgstreamer1.0-0:i386 libiec61883-0:i386 libjack-jackd2-0:i386 libjq1 libldap-2.5-0:i386
  libltdl7:i386 libmp3lame0:i386 libmpg123-0:i386 libnghttp2-14:i386 libodbc2 libodbc2:i386 libonig5 libopenal1:i386 liborc-0.4-0:i386 libosmesa6:i386 libpcap0.8:i386
  libproxy1v5:i386 libpsl5:i386 libraw1394-11:i386 librtmp1:i386 libsamplerate0:i386 libsasl2-2:i386 libsasl2-modules:i386 libsasl2-modules-db:i386 libsdl2-2.0-0:i386
  libshout3:i386 libslang2:i386 libsndio7.0:i386 libsoup2.4-1:i386 libspeex1:i386 libsqlite3-0:i386 libssh-4:i386 libstb0 libstb0:i386 libtag1v5:i386
  libtag1v5-vanilla:i386 libtheora0:i386 libtwolame0:i386 libunwind8:i386 libusb-1.0-0:i386 libv4l-0:i386 libv4lconvert0:i386 libvisual-0.4-0:i386 libvkd3d1
  libvkd3d1:i386 libvpx7:i386 libwavpack1:i386 libwine libwine:i386 libxpm4:i386 libxslt1.1:i386 libxss1:i386 libxv1:i386 libz-mingw-w64 ocl-icd-libopencl1:i386
  playonlinux python3-natsort wine wine32:i386 wine64 winetricks
```

## 配置wine

如下只使用Builtin DLL

```
advapi32, capi2032, ddraw, gdi32, glu32, icmp, iphlpapi, kernel32, mswsock, ntdll, opengl32, stdole2.tlb, stdole32.tlb, twain_32, unicows, user32, vdmdbg, w32skrnl, winealsa.drv, wined3d, winejoystick.drv, wineoss.drv, wineps.drv, winex11.drv, winmm, wintab32, wnaspi32, wow32, ws2_32, wsock32
```

用repo自带的wine版本6.0.3, winecfg没有要安装wine-mono

```
$ sudo update-alternatives --config wine
There is only one alternative in link group wine (providing /usr/bin/wine): /usr/bin/wine-stable
```

环境变量是

```
export WINEPREFIX=$HOME/.wine/
# export WINEARCH=win32
export WINEARCH=win64
export LANG=zh_CN.UTF-8
# alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=/home/andy/.wine wine'
alias wine='env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=/home/andy/.wine wine'
```

安装 `winrar-x64-611.exe`，没有要安装wine-gecho

`/home/andy/.local/share/applications`里 自动生成的desktop大概像这样

```
Exec=env WINEPREFIX="/home/andy/.wine/" wine-stable start /ProgIDOpen WinRAR %f
```

不会有驱动器丢失问题，打开rar文件正常

```
$ wine msiexec /i wine-mono-7.0.0-x86.msi
$ wine msiexec /i wine-gecko-2.47.2-x86.msi
$ wine msiexec /i wine-gecko-2.47.2-x86_64.msi

$ sudo apt install winbind
Suggested packages:
  libnss-winbind libpam-winbind
```

[https://github.com/Winetricks/winetricks/src](https://github.com/Winetricks/winetricks/src)

```
$ sudo winetricks --self-update
$ winetricks --version
20220411-next - sha256sum: 013a9062d25b07ab3cc5d60e664bd171899a397a8614fa953bc2b8e9a9fff049
$ WINEPREFIX="/home/andy/.wine" winetricks -q mfc42 vcrun6sp6
```

```
winetricks --gui
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=/home/andy/.wine winetricks --gui

也可以像这样命令行添加
winetricks vb6run vcrun6 vcrun6sp6 secur32 msvcirt mfc42 riched20 riched30 ie6 gdiplus
winetricks cmd comctl32 gdiplus mfc42 vcrun2003 vcrun2005 vcrun2008 vcrun2010 riched20 riched30
winetricks msxml3 gdiplus riched20 riched30 vcrun6 vcrun2005 ie6 flash
winetricks win2k vcrun2005
winetricks vcrun2005sp1
winetricks win2k vcrun2005sp1
winetricks -q dotnet40
$ winetricks -q vb6run vcrun6 vcrun6sp6 secur32 msvcirt mfc42 riched20 riched30 gdiplus cmd comctl32 mfc42 vcrun2003 vcrun2008 vcrun2010 ie6 msxml3 flash win2k vcrun2005 vcrun2005sp1
```

64bit可行的几个

```
$ winetricks -q vb6run vcrun6 vcrun6sp6 secur32 msvcirt mfc42 cmd comctl32 mfc42 vcrun2003 msxml3
$ winetricks -q gdiplus riched20 riched30
$ winetricks -q allfonts
$ winetricks --force cjkfonts fakechinese fakejapanese fakekorean fakejapanese_ipamona fakejapanese_vlgothic pptfonts
```

```
com1 -> /dev/ttyS0
...
com32 -> /dev/ttyS31
```

```
$ find -name '*.desktop' | xargs perl -pi -e 's|^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$|$1$2|g'
$ for files in `find -name '*.desktop'`; do echo $files; echo $files | xargs perl -pi -e 's|^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$|$1$2|g'; done
$ a='Exec=env WINEPREFIX="/home/andy/.wine/dosdevices/e:/home/andy/.wine" wine start /ProgIDOpen WinRAR %f'
$ echo $a | sed -r -e 's/^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$/\1\2/'Exec=env WINEPREFIX="/home/andy/.wine" wine start /ProgIDOpen WinRAR %f
$ echo $a | perl -p -e 's|^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$|$1$2|'
$ echo './wine-extension-pdf.desktop' | sed 's/$/"/' | sed 's/^/"/'
```

批量修复desktop文件

```
SAVEIFS=$IFS
IFS=$(echo -en "\n\b")
for files in `find -name '*.desktop'`; do echo $files | sed 's/$/"/' | sed 's/^/"/' | xargs perl -pi -e 's|^(.*)?\/dosdevices\/e\:\/home\/andy\/\.wine(.*)$|$1$2|g' ; done
```

补齐winetricks缓存，应该要挂代理

```
$ winetricks dlls list | grep -e "\[可下载\]"
$ winetricks list-all | grep -e "\[可下载\]"
$ env WINEARCH=win32 WINEPREFIX=~/.wine32 winetricks xxx
$ winetricks dlls list | grep -e "\[可下载\]" | tee list.txt
```

---

# crossover

[https://www.crossoverchina.com/xiazai.html#linux](https://www.crossoverchina.com/xiazai.html#linux)
[https://cpv2.mairuan.com/crossoverchina.com/trial/Linux/crossover-22.deb](https://cpv2.mairuan.com/crossoverchina.com/trial/Linux/crossover-22.deb)

```
$ sudo dpkg -i crossover-22.deb
```

可以先不安装这玩意

---

# cvs

```
$ sudo apt-get install cvs 
Suggested packages:
  mksh rcs
```

---

# OpenGL支持

```
$ sudo apt-get install xlibmesa-glu-dev
Note, selecting 'libglu1-mesa-dev' instead of 'xlibmesa-glu-dev'
The following additional packages will be installed:
  libgl-dev libglx-dev
The following NEW packages will be installed:
  libgl-dev libglu1-mesa-dev libglx-dev
```

```
sudo apt-get install libglx-dev 
```

```
$ sudo apt install libgl1-mesa-dev

The following additional packages will be installed:
  libgles-dev libgles1 libglvnd-core-dev libglvnd-dev
```

---

# apt-show-versions

```
$ sudo apt install apt-show-versions
$ apt-show-versions | fgrep avail
```

---

# fakechroot

```
$ sudo apt install fakechroot schroot debootstrap

The following additional packages will be installed:
  libfakechroot schroot-common
Suggested packages:
  squid-deb-proxy-client debian-archive-keyring arch-test aufs-tools
  | unionfs-fuse qemu-user-static
```

---

# adb

```
$ sudo apt-get install android-tools-adb

Note, selecting 'adb' instead of 'android-tools-adb'
The following additional packages will be installed:
  android-libadb android-libbase android-libboringssl android-libcrypto-utils
  android-libcutils android-liblog android-sdk-platform-tools-common
```

---

# cpu-x

```
$ sudo apt install cpu-x libcpuid15 libglfw3
```

---

# python3-examples

```
$ sudo apt install python3-examples python3-extras

The following additional packages will be installed:
  python3-fixtures python3-pbr python3-testtools python3.10-examples
Suggested packages:
  python-testtools-doc
```

---

# peco

```
$ sudo apt install peco
```

---

# samba

```
$ sudo apt-get install samba samba-common samba-client

Note, selecting 'smbclient' instead of 'samba-client'
samba-common is already the newest version (2:4.15.9+dfsg-0ubuntu0.2).
smbclient is already the newest version (2:4.15.9+dfsg-0ubuntu0.2).
The following additional packages will be installed:
  ibverbs-providers libcephfs2 libgfapi0 libgfrpc0 libgfxdr0 libglusterfs0 libibverbs1 librados2 librdmacm1 python3-dnspython python3-markdown python3-pygments
  python3-requests-toolbelt samba-vfs-modules tdb-tools
Suggested packages:
  python3-sniffio python3-trio python-markdown-doc python-pygments-doc ttf-bitstream-vera bind9 bind9utils ctdb ldb-tools ntp | chrony smbldap-tools winbind
```

---

# sqlite

```
$ sudo apt install sqlite3 sqlite3-doc sqlitebrowser

sqlite3 is already the newest version (3.37.2-2ubuntu0.1).
sqlite3-doc is already the newest version (3.37.2-2ubuntu0.1).
The following additional packages will be installed:
  libqscintilla2-qt5-15 libqscintilla2-qt5-l10n libqt5printsupport5 libqt5xml5
Suggested packages:
  libqscintilla2-doc
```

```
$ sudo apt-get install libdb5.3-dev libgdbm-dev libsqlite3-dev libssl-dev

Suggested packages:
  db5.3-doc libssl-doc
```

repo的版本maximize按钮没有，从git拉取最新的编译出deb可以解决。需要安装qt5

PKGBUILD

```
# Maintainer: sakure <duarm at disroot dot org>
# Old Maintainer: nixi <nixi at cock dot li>
# Contributor: <darkfeline@felesatra.moe>
# Contributor: Sergej Pupykin <pupykin.s+arch@gmail.com>
# Contributor: Douglas Soares de Andrade <dsandrade@gmail.com>
# Contributor: Michael Fellinger <m.fellinger@gmail.com>

pkgname=sqlitebrowser-git
pkgver=3.12.99
pkgrel=1
pkgdesc="SQLite Database browser is a light GUI editor for SQLite databases, built on top of Qt"
arch=('i386' 'amd64')
url="http://sqlitebrowser.org/"
license=('GPL3')
provides=('sqlitebrowser')
conflicts=('sqlitebrowser')
#depends=('libc6' 'libgcc-s1' 'libqscintilla2-qt5-15' 'libqt5core5a' 'libqt5gui5' 'libqt5gui5-gles' 'libqt5network5' 'libqt5printsupport5' 'libqt5widgets5' 'libqt5xml5' 'libsqlite3-0' 'libstdc++6')
depends=('libc6' 'libgcc-s1' 'libqscintilla2-qt5-15' 'libqt5core5a' 'libqt5gui5' 'libqt5network5' 'libqt5printsupport5' 'libqt5widgets5' 'libqt5xml5' 'libsqlite3-0' 'libstdc++6')
makedepends=('cmake')
install=sqlitebrowser.install
source=($pkgname'::git+https://github.com/sqlitebrowser/sqlitebrowser.git')
md5sums=('SKIP')

#pkgver() {
#	cd "$pkgname"
#	git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/^non-daw-v//;s/-/./g'
#}

build() {
	cd $srcdir/$pkgname
	cmake -DUSE_QT5=TRUE -DCMAKE_INSTALL_PREFIX=/usr .
	make
}

package() {
	cd $srcdir/$pkgname
	make install DESTDIR=$pkgdir
	install -Dm0644 distri/sqlitebrowser.desktop $pkgdir/usr/share/applications/sqlitebrowser.desktop
	install -dm0755 $pkgdir/usr/share/icons/
	install -m0644 images/logo.svg $pkgdir/usr/share/icons/
}
```

sqlitebrowser.install

```
post_install() {
	[[ -x usr/bin/update-desktop-database ]] && update-desktop-database -q || true
	[[ -x usr/bin/gtk-update-icon-cache ]] && gtk-update-icon-cache -q -t -f usr/share/icons/hicolor || true
}

post_upgrade() {
	post_install
}


post_remove() {
	post_install
}
```

```
$ sudo apt remove sqlitebrowser
$ sudo dpkg -i sqlitebrowser-git_3.12.99-1_amd64.deb
```

---

# qt5

```
$ sudo apt install qtcreator qtbase5-dev qt5-qmake cmake
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
cmake is already the newest version (3.22.1-1ubuntu1.22.04.1).
The following additional packages will be installed:
  binfmt-support clang-14 clang-tidy clang-tidy-14 clang-tools-14
  libclang-common-14-dev libclang-cpp14 libclang1-14 libegl-dev
  libkf5syntaxhighlighting-data libkf5syntaxhighlighting5 libllvm14
  libncurses-dev libobjc-11-dev libobjc4 libpfm4 libqt5concurrent5
  libqt5designer5 libqt5designercomponents5 libqt5help5 libqt5opengl5
  libqt5opengl5-dev libqt5positioning5 libqt5qml5 libqt5qmlmodels5
  libqt5qmlworkerscript5 libqt5quick5 libqt5quicktest5 libqt5quickwidgets5
  libqt5sensors5 libqt5serialport5 libqt5sql5 libqt5sql5-sqlite libqt5test5
  libqt5webchannel5 libqt5webkit5 libqt5xmlpatterns5 libtinfo-dev
  libvulkan-dev libyaml-cpp0.7 libz3-4 libz3-dev llvm-14 llvm-14-dev
  llvm-14-linker-tools llvm-14-runtime llvm-14-tools qdoc-qt5
  qhelpgenerator-qt5 qml-module-qtgraphicaleffects qml-module-qtqml
  qml-module-qtqml-models2 qml-module-qtquick-controls
  qml-module-qtquick-layouts qml-module-qtquick-window2 qml-module-qtquick2
  qmlscene qt3d5-doc qt5-assistant qt5-doc qt5-qmake-bin
  qt5-qmltooling-plugins qtattributionsscanner-qt5 qtbase5-dev-tools
  qtbase5-doc qtcharts5-doc qtchooser qtconnectivity5-doc qtcreator-data
  qtcreator-doc qtdatavisualization5-doc qtdeclarative5-dev-tools
  qtdeclarative5-doc qtgamepad5-doc qtgraphicaleffects5-doc qtlocation5-doc
  qtmultimedia5-doc qtnetworkauth5-doc qtquickcontrols2-5-doc
  qtquickcontrols5-doc qtscript5-doc qtscxml5-doc qtsensors5-doc
  qtserialbus5-doc qtserialport5-doc qtsvg5-doc qttools5-dev-tools
  qttools5-doc qtvirtualkeyboard5-doc qtwayland5-doc qtwebchannel5-doc
  qtwebengine5-doc qtwebsockets5-doc qtwebview5-doc qtx11extras5-doc
  qtxmlpatterns5-dev-tools qtxmlpatterns5-doc
Suggested packages:
  clang-14-doc ncurses-doc llvm-14-doc default-libmysqlclient-dev firebird-dev
  libpq-dev unixodbc-dev clazy meson valgrind python3-pylsp
```

```
$ sudo apt install qtbase5-dev qt5-qmake qttools5-dev qttools5-dev-tools qtwebengine5-dev libqt5svg5-dev libqt5websockets5-dev

qttools5-dev-tools is already the newest version (5.15.3-1).
qttools5-dev-tools set to manually installed.
qt5-qmake is already the newest version (5.15.3+dfsg-2ubuntu0.2).
qtbase5-dev is already the newest version (5.15.3+dfsg-2ubuntu0.2).
The following additional packages will be installed:
  libminizip1 libqt5positioning5-plugins libqt5positioningquick5
  libqt5quickparticles5 libqt5quickshapes5 libqt5webchannel5-dev
  libqt5webengine-data libqt5webengine5 libqt5webenginecore5
  libqt5webenginewidgets5 libqt5websockets5 libre2-9 qtdeclarative5-dev
  qtpositioning5-dev
```

Could not find a package configuration file provided by "Qt5LinguistTools"

```
$ sudo apt install qttools5-dev qttools5-dev-tools
```

据说要设置CMAKE_PREFIX_PATH环境变量

```
$ printenv | grep CMAKE
CMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake/Qt5LinguistTools
```

```
$ sudo apt install libqt5x11extras5
```

---

# qt6

```
$ sudo apt install qt6-base-dev

The following additional packages will be installed:
  libb2-1 libopengl-dev libqt6concurrent6 libqt6core6 libqt6dbus6 libqt6gui6 libqt6network6 libqt6opengl6 libqt6opengl6-dev libqt6openglwidgets6 libqt6printsupport6
  libqt6sql6 libqt6sql6-sqlite libqt6test6 libqt6widgets6 libqt6xml6 libts0 qmake6 qmake6-bin qt6-base-dev-tools qt6-gtk-platformtheme qt6-qpa-plugins
```

```
$ sudo apt-get install libglu1-mesa-dev freeglut3-dev mesa-common-dev

libglu1-mesa-dev is already the newest version (9.0.2-1).
The following additional packages will be installed:
  libdrm-dev libpciaccess-dev libxt-dev
Suggested packages:
  libxt-doc
```

```
$ sudo apt install gcc g++ gdb binutils build-essential openssl libssl-dev libssl-dev libgl1-mesa-dev
$ sudo apt install build-essential cmake ninja-build git
```

```
$ sudo apt install qtcreator qmake6 qtchooser qt6-tools-dev assistant-qt6 designer-qt6 qt6-qmltooling-plugins

qmake6 is already the newest version (6.2.4+dfsg-2ubuntu1).
qmake6 set to manually installed.
qtchooser is already the newest version (66-2build1).
qtchooser set to manually installed.
qtcreator is already the newest version (6.0.2-2build1).
The following additional packages will be installed:
  libqt6designer6 libqt6designercomponents6 libqt6help6 libqt6qml6 libqt6qmlmodels6 libqt6quick6 libqt6quickwidgets6 libqt6uitools6
```

```
$ sudo apt install libglx-dev libgl1-mesa-dev
$ sudo apt install qt6-declarative-dev
The following additional packages will be installed:
  libqt6labsanimation6 libqt6labsfolderlistmodel6 libqt6labsqmlmodels6
  libqt6labssettings6 libqt6labssharedimage6 libqt6labswavefrontmesh6
  libqt6qmlcore6 libqt6qmllocalstorage6 libqt6qmlworkerscript6
  libqt6qmlxmllistmodel6 libqt6quickcontrols2-6 libqt6quickcontrols2impl6
  libqt6quickdialogs2-6 libqt6quickdialogs2quickimpl6
  libqt6quickdialogs2utils6 libqt6quicklayouts6 libqt6quickparticles6
  libqt6quickshapes6 libqt6quicktemplates2-6 libqt6quicktest6
  qt6-declarative-dev-tools

```

```
$ sudo apt install libgl1-mesa-dev libvulkan-dev libxcb-xinput-dev libxcb-xinerama0-dev libxkbcommon-dev libxkbcommon-x11-dev libxcb-image0 libxcb-keysyms1 libxcb-render-util0 libxcb-xkb1 libxcb-randr0 libxcb-icccm4
$ sudo apt install qt6-base-dev qt6-base-private-dev qt6-declarative-dev qt6-declarative-private-dev qt6-tools-dev qt6-tools-private-dev qt6-scxml-dev qt6-documentation-tools libqt6core5compat6-dev qt6-tools-dev-tools qt6-l10n-tools qt6-shader-baker libqt6shadertools6-dev qt6-quick3d-dev qt6-quick3d-dev-tools libqt6svg6-dev libqt6quicktimeline6-dev libqt6serialport6-dev

The following additional packages will be installed:
  libevdev-dev libgudev-1.0-dev libinput-dev libmtdev-dev libqt6core5compat6 libqt6quick3d6 libqt6quick3dassetimport6 libqt6quick3dassetutils6 libqt6quick3deffects6 libqt6quick3dhelpers6
  libqt6quick3diblbaker6 libqt6quick3dparticles6 libqt6quick3druntimerender6 libqt6quick3dutils6 libqt6quicktimeline6 libqt6scxml6 libqt6scxml6-bin libqt6scxmlqml6 libqt6serialport6 libqt6shadertools6
  libqt6statemachine6 libqt6statemachineqml6 libqt6svg6 libqt6svgwidgets6 libwacom-dev
Suggested packages:
  libevdev-doc
```

```
$ sudo apt install qt6-base-dev qt6-base-private-dev qt6-declarative-dev qt6-declarative-private-dev qt6-tools-dev qt6-tools-private-dev qt6-scxml-dev qt6-documentation-tools libqt6core5compat6-dev qt6-tools-dev-tools qt6-l10n-tools qt6-shader-baker libqt6shadertools6-dev qt6-quick3d-dev qt6-quick3d-dev-tools libqt6svg6-dev libqt6quicktimeline6-dev libqt6serialport6-dev
```

```
sudo apt install -y qtcreator qtbase5-dev qt5-qmake cmake
sudo apt install qtbase5-dev qt5-qmake qtcreator qtbase5-examples qtbase5-doc-html

sudo apt install -y libclang-dev
sudo apt install clang clangd
//sudo apt install clang-15 clangd-15 libclang-15-dev

$ sudo apt install build-essential libx11-dev ninja-build openssl libssl-dev libmd4c-dev libmd4c-html0-dev pkg-config mesa-utils libglu1-mesa-dev freeglut3-dev mesa-common-dev libglew-dev libglfw3-dev libglm-dev libao-dev libmpg123-dev
Suggested packages:
  glew-utils libglfw3-doc

```

## qtdesigner 使用qt6

```
PC一般在(man qtchooser 可查)
cat /usr/lib/x86_64-linux-gnu/qt-default/qtchooser/default.conf 
ls /usr/lib/x86_64-linux-gnu/qtchooser/
ls /usr/share/qtchooser                     # 软链接来源

比如aarch64平台的添加了5.9的conf，这样来启用特定版本
cd /usr/lib/aarch64-linux-gnu/qtchooser
sudo ln -s /usr/share/qtchooser/qt-5.9-aarch64-linux-gnu.conf qt5.9.conf
export QT_SELECT=qt5.9
qmake -v
```

```
$ cd /usr/share/qtchooser/
$ sudo cp qt5-x86_64-linux-gnu.conf qt6-x86_64-linux-gnu.conf
$ sudo gedit qt6-x86_64-linux-gnu.conf
/usr/lib/qt6/bin
/usr/lib/x86_64-linux-gnu
$ cd /usr/lib/x86_64-linux-gnu/qtchooser
$ sudo ln -s ../../../share/qtchooser/qt6-x86_64-linux-gnu.conf qt6.conf
$ sudo ln -s ../../../share/qtchooser/qt6-x86_64-linux-gnu.conf 6.conf
$ env QT_SELECT=qt6 designer
$ export QT_SELECT=qt6
$ qmake -v
QMake version 3.1
Using Qt version 6.2.4 in /usr/lib/x86_64-linux-gnu
```

## 使用qtchooser（示例）

```
$ qtchooser  -l
4
5
default
qt4-x86_64-linux-gnu
qt4
qt5-x86_64-linux-gnu
qt5

应该是对应
/usr/lib/x86_64-linux-gnu/qtchooser
下面的几个软链接

实际位置
/usr/share/qtchooser/
文件为
qt4-x86_64-linux-gnu.conf
qt5-x86_64-linux-gnu.conf

/usr/lib/x86_64-linux-gnu/qt-default/qtchooser
下面实际上是个软链接
指向/usr/share/qtchooser/中qt的某个conf文件

$ qtchooser -print-env
QT_SELECT="default"
QTTOOLDIR="/usr/lib/qt5/bin"
QTLIBDIR="/usr/lib/x86_64-linux-gnu"

qmake（/usr/bin/qmake）实际上只是qtchooser（/usr/bin/qtchooser）的符号链接。
$ file /usr/bin/qmake
/usr/bin/qmake: symbolic link to qtchooser


qtchooser -install qt5.10 /opt/Qt5.10.1/5.10.1/gcc_64/bin/qmake
/home/andy/.config/qtchooser/
会有
qt5.10.conf
内容是
/opt/Qt5.10.1/5.10.1/gcc_64/bin
/opt/Qt5.10.1/5.10.1/gcc_64/lib

$ export QT_SELECT=qt5.10

$ qmake -v
QMake version 3.1
Using Qt version 5.10.1 in /opt/Qt5.10.1/5.10.1/gcc_64/lib


qmake -qt=qt5.10 -v
和
export QT_SELECT=qt5.10是一样的
```

---

# build-essential

```
$ sudo apt install build-essential git cmake libsndfile1-dev libjack-jackd2-dev libfftw3-dev emacs libudev-dev

build-essential is already the newest version (12.9ubuntu3).
cmake is already the newest version (3.22.1-1ubuntu1.22.04.1).
git is already the newest version (1:2.34.1-1ubuntu1.5).
The following additional packages will be installed:
  emacs-bin-common emacs-common emacs-el emacs-gtk libfftw3-bin libfftw3-long3
  libfftw3-quad3 libflac-dev libm17n-0 libogg-dev libopus-dev libotf1
  libvorbis-dev m17n-db
Suggested packages:
  mailutils emacs-common-non-dfsg libfftw3-doc m17n-docs
```

```
$ sudo apt-get install libbz2-dev libreadline-dev libsqlite3-dev wget curl llvm

libbz2-dev is already the newest version (1.0.8-5build1).
libbz2-dev set to manually installed.
wget is already the newest version (1.21.2-2ubuntu1).
curl is already the newest version (7.81.0-1ubuntu1.6).
libsqlite3-dev is already the newest version (3.37.2-2ubuntu0.1).
The following additional packages will be installed:
  llvm-runtime
Suggested packages:
  readline-doc
```

```
sudo apt-get install bison flex
```

```
$ sudo apt-get install curl texinfo quilt dc libcrypt-ssleay-perl ccache quilt libusb-dev libexpect-perl mono-devel libgtk2.0-dev

dc is already the newest version (1.07.1-3build1).
libgtk2.0-dev is already the newest version (2.24.33-2ubuntu2).
curl is already the newest version (7.81.0-1ubuntu1.6).
The following additional packages will be installed:
  ca-certificates-mono cli-common libbytes-random-secure-perl libcrypt-random-seed-perl libgdiplus libhiredis0.14 libio-pty-perl libio-stty-perl
  libmath-random-isaac-perl libmath-random-isaac-xs-perl libmono-2.0-dev libmono-accessibility4.0-cil libmono-btls-interface4.0-cil libmono-cairo4.0-cil
  libmono-cecil-private-cil libmono-cil-dev libmono-codecontracts4.0-cil libmono-compilerservices-symbolwriter4.0-cil libmono-corlib4.5-cil libmono-corlib4.5-dll
  libmono-cscompmgd0.0-cil libmono-csharp4.0c-cil libmono-custommarshalers4.0-cil libmono-data-tds4.0-cil libmono-db2-1.0-cil libmono-debugger-soft4.0a-cil
  libmono-http4.0-cil libmono-i18n-cjk4.0-cil libmono-i18n-mideast4.0-cil libmono-i18n-other4.0-cil libmono-i18n-rare4.0-cil libmono-i18n-west4.0-cil
  libmono-i18n4.0-all libmono-i18n4.0-cil libmono-ldap4.0-cil libmono-management4.0-cil libmono-messaging-rabbitmq4.0-cil libmono-messaging4.0-cil
  libmono-microsoft-build-engine4.0-cil libmono-microsoft-build-framework4.0-cil libmono-microsoft-build-tasks-v4.0-4.0-cil
  libmono-microsoft-build-utilities-v4.0-4.0-cil libmono-microsoft-build4.0-cil libmono-microsoft-csharp4.0-cil libmono-microsoft-visualc10.0-cil
  libmono-microsoft-web-infrastructure1.0-cil libmono-oracle4.0-cil libmono-parallel4.0-cil libmono-peapi4.0a-cil libmono-posix4.0-cil libmono-rabbitmq4.0-cil
  libmono-relaxng4.0-cil libmono-security4.0-cil libmono-sharpzip4.84-cil libmono-simd4.0-cil libmono-smdiagnostics0.0-cil libmono-sqlite4.0-cil
  libmono-system-componentmodel-composition4.0-cil libmono-system-componentmodel-dataannotations4.0-cil libmono-system-configuration-install4.0-cil
  libmono-system-configuration4.0-cil libmono-system-core4.0-cil libmono-system-data-datasetextensions4.0-cil libmono-system-data-entity4.0-cil
  libmono-system-data-linq4.0-cil libmono-system-data-services-client4.0-cil libmono-system-data-services4.0-cil libmono-system-data4.0-cil
  libmono-system-deployment4.0-cil libmono-system-design4.0-cil libmono-system-drawing-design4.0-cil libmono-system-drawing4.0-cil libmono-system-dynamic4.0-cil
  libmono-system-enterpriseservices4.0-cil libmono-system-identitymodel-selectors4.0-cil libmono-system-identitymodel4.0-cil
  libmono-system-io-compression-filesystem4.0-cil libmono-system-io-compression4.0-cil libmono-system-json-microsoft4.0-cil libmono-system-json4.0-cil
  libmono-system-ldap-protocols4.0-cil libmono-system-ldap4.0-cil libmono-system-management4.0-cil libmono-system-messaging4.0-cil
  libmono-system-net-http-formatting4.0-cil libmono-system-net-http-webrequest4.0-cil libmono-system-net-http4.0-cil libmono-system-net4.0-cil
  libmono-system-numerics-vectors4.0-cil libmono-system-numerics4.0-cil libmono-system-reactive-core2.2-cil libmono-system-reactive-debugger2.2-cil
  libmono-system-reactive-experimental2.2-cil libmono-system-reactive-interfaces2.2-cil libmono-system-reactive-linq2.2-cil
  libmono-system-reactive-observable-aliases0.0-cil libmono-system-reactive-platformservices2.2-cil libmono-system-reactive-providers2.2-cil
  libmono-system-reactive-runtime-remoting2.2-cil libmono-system-reactive-windows-forms2.2-cil libmono-system-reactive-windows-threading2.2-cil
  libmono-system-reflection-context4.0-cil libmono-system-runtime-caching4.0-cil libmono-system-runtime-durableinstancing4.0-cil
  libmono-system-runtime-serialization-formatters-soap4.0-cil libmono-system-runtime-serialization4.0-cil libmono-system-runtime4.0-cil libmono-system-security4.0-cil
  libmono-system-servicemodel-activation4.0-cil libmono-system-servicemodel-discovery4.0-cil libmono-system-servicemodel-internals0.0-cil
  libmono-system-servicemodel-routing4.0-cil libmono-system-servicemodel-web4.0-cil libmono-system-servicemodel4.0a-cil libmono-system-serviceprocess4.0-cil
  libmono-system-threading-tasks-dataflow4.0-cil libmono-system-transactions4.0-cil libmono-system-web-abstractions4.0-cil
  libmono-system-web-applicationservices4.0-cil libmono-system-web-dynamicdata4.0-cil libmono-system-web-extensions-design4.0-cil libmono-system-web-extensions4.0-cil
  libmono-system-web-http-selfhost4.0-cil libmono-system-web-http-webhost4.0-cil libmono-system-web-http4.0-cil libmono-system-web-mobile4.0-cil
  libmono-system-web-mvc3.0-cil libmono-system-web-razor2.0-cil libmono-system-web-regularexpressions4.0-cil libmono-system-web-routing4.0-cil
  libmono-system-web-services4.0-cil libmono-system-web-webpages-deployment2.0-cil libmono-system-web-webpages-razor2.0-cil libmono-system-web-webpages2.0-cil
  libmono-system-web4.0-cil libmono-system-windows-forms-datavisualization4.0a-cil libmono-system-windows-forms4.0-cil libmono-system-windows4.0-cil
  libmono-system-workflow-activities4.0-cil libmono-system-workflow-componentmodel4.0-cil libmono-system-workflow-runtime4.0-cil libmono-system-xaml4.0-cil
  libmono-system-xml-linq4.0-cil libmono-system-xml-serialization4.0-cil libmono-system-xml4.0-cil libmono-system4.0-cil libmono-tasklets4.0-cil
  libmono-webbrowser4.0-cil libmono-webmatrix-data4.0-cil libmono-windowsbase4.0-cil libmono-xbuild-tasks4.0-cil libmonosgen-2.0-1 libmonosgen-2.0-dev libnunit-cil-dev
  libnunit-console-runner2.6.3-cil libnunit-core-interfaces2.6.3-cil libnunit-core2.6.3-cil libnunit-framework2.6.3-cil libnunit-mocks2.6.3-cil libnunit-util2.6.3-cil
  libtext-unidecode-perl libusb-0.1-4 mono-4.0-gac mono-csharp-shell mono-gac mono-mcs mono-runtime mono-runtime-common mono-runtime-sgen mono-xbuild tex-common
Suggested packages:
  distcc | icecc libgnomeui-0 libgamin0 libnunit-doc monodoc-nunit-manual default-mta | mail-transport-agent graphviz procmail texlive-base texlive-latex-base
  texlive-plain-generic texlive-fonts-recommended
Recommended packages:
  libgluezilla
```

```
$ sudo apt-get install xinetd tftpd nfs-kernel-server minicom build-essential libncurses5-dev u-boot-tools autoconf automake tree git-core subversion

Note, selecting 'git' instead of 'git-core'
autoconf is already the newest version (2.71-2).
automake is already the newest version (1:1.16.5-1.3).
build-essential is already the newest version (12.9ubuntu3).
tree is already the newest version (2.0.2-1).
tree set to manually installed.
git is already the newest version (1:2.34.1-1ubuntu1.5).
subversion is already the newest version (1.14.1-3ubuntu0.22.04.1).
The following additional packages will be installed:
  device-tree-compiler libevent-core-2.1-7 libfdt1 libnfsidmap1 libubootenv-tool libubootenv0.1 lrzsz nfs-common rpcbind
Suggested packages:
  open-iscsi watchdog
```

```
$ sudo apt-get install fakeroot pkg-config
$ sudo apt-get install tofrodos iproute2 gawk
$ sudo apt-get install gcc git make
$ sudo apt-get install xvfb
$ sudo apt-get install net-tools libncurses5-dev tftpd
sudo apt-get install gnupg wget diffstat chrpath socat xterm
```

```
$ sudo apt-get install zlib1g-dev zlib1g-dev:i386 libssl-dev flex bison libselinux1

bison is already the newest version (2:3.8.2+dfsg-1build1).
flex is already the newest version (2.6.4-8build2).
libselinux1 is already the newest version (3.3-1build2).
libssl-dev is already the newest version (3.0.2-0ubuntu1.7).
zlib1g-dev is already the newest version (1:1.2.11.dfsg-2ubuntu9.2).
zlib1g-dev set to manually installed.
Suggested packages:
  glibc-doc:i386
```

```
$ sudo apt-get install autoconf libtool tar unzip texinfo zlib1g-dev gcc-multilib build-essential libsdl1.2-dev libglib2.0-dev

autoconf is already the newest version (2.71-2).
build-essential is already the newest version (12.9ubuntu3).
gcc-multilib is already the newest version (4:11.2.0-1ubuntu1).
libglib2.0-dev is already the newest version (2.72.1-1).
libtool is already the newest version (2.4.6-15build2).
tar is already the newest version (1.34+dfsg-1build3).
texinfo is already the newest version (6.8-4build1).
unzip is already the newest version (6.0-26ubuntu3.1).
zlib1g-dev is already the newest version (1:1.2.11.dfsg-2ubuntu9.2).
The following additional packages will be installed:
  libasound2-dev libcaca-dev libpulse-dev libslang2-dev
Suggested packages:
  libasound2-doc
```

```
$ sudo apt-get install screen pax gzip tar

tar is already the newest version (1.34+dfsg-1build3).
gzip is already the newest version (1.10-4ubuntu4.1).
Suggested packages:
  byobu | screenie | iselect
```

```
$ sudo apt-get install lib32z1 libncurses5 libbz2-1.0:i386 lib32stdc++6 libncurses5:i386

libbz2-1.0:i386 is already the newest version (1.0.8-5build1).
libbz2-1.0:i386 set to manually installed.
libncurses5:i386 is already the newest version (6.3-2).
lib32stdc++6 is already the newest version (12.1.0-2ubuntu1~22.04).
lib32stdc++6 set to manually installed.
The following additional packages will be installed:
  libtinfo5
```

```
$ sudo apt-get install libncurses5 libncurses5-dev
```

---

# sh 设置

```
$ sudo dpkg-reconfigure dash
选否
Removing 'diversion of /bin/sh to /bin/sh.distrib by dash'
Adding 'diversion of /bin/sh to /bin/sh.distrib by bash'
Removing 'diversion of /usr/share/man/man1/sh.1.gz to /usr/share/man/man1/sh.distrib.1.gz by dash'
Adding 'diversion of /usr/share/man/man1/sh.1.gz to /usr/share/man/man1/sh.distrib.1.gz by bash'

$ ls -al /bin/sh
lrwxrwxrwx 1 root root 4 Nov 22 12:18 /bin/sh -> bash
```

---

# tftp

```
$ sudo apt-get install tftp-hpa tftpd-hpa xinetd

xinetd is already the newest version (1:2.3.15.3-1).
Suggested packages:
  pxelinux
The following packages will be REMOVED:
  tftpd
```

```
sudo gedit /etc/default/tftpd-hpa
```

修改

```
# /etc/default/tftpd-hpa

TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/srv/tftp"
TFTP_ADDRESS=":69"
TFTP_OPTIONS="--secure"
```

为

```
TFTP_USERNAME="tftp"
TFTP_DIRECTORY="/tftpboot"
TFTP_ADDRESS="0.0.0.0:69"
TFTP_OPTIONS="-l -c -s"
```

```
sudo mkdir -p /tftpboot
sudo chmod 777 /tftpboot
sudo chown nobody /tftpboot
sudo service tftpd-hpa restart
sudo systemctl start tftpd-hpa.service
sudo systemctl enable tftpd-hpa.service
sudo systemctl status tftpd-hpa.service
sudo systemctl stop xinetd.service
sudo systemctl disable xinetd.service
sudo systemctl status xinetd.service
```

确认tftp服务是否已经开启

```
netstat -an | more | grep udp | grep 69
```

显示

```
udp        0      0 0.0.0.0:69              0.0.0.0:*
```

```
netstat -au | grep tftp
```

显示

```
udp        0      0 0.0.0.0:tftp            0.0.0.0:*                *:*
```

本机测试,需要tftp客户端

```
tftp <ip>
get <testfile>
```

目标板上

```
tftp -g -r <testfile> <ip>
```

---

# ftp client

```
$ sudo apt-get install gftp

The following additional packages will be installed:
  gftp-common gftp-gtk gftp-text
```

```
$ sudo apt-get install filezilla

The following additional packages will be installed:
  filezilla-common libfilezilla-common libfilezilla24 libpugixml1v5
```

---

# BitTorrent client

```
$ sudo apt install deluge

The following additional packages will be installed:
  deluge-common deluge-gtk gir1.2-appindicator3-0.1 libboost-python1.74.0 libmodplug1 libopusfile0 libportmidi0 libsdl2-image-2.0-0 libsdl2-mixer-2.0-0
  libsdl2-ttf-2.0-0 libtorrent-rasterbar2.0 python3-attr python3-automat python3-constantly python3-geoip python3-hamcrest python3-hyperlink python3-incremental
  python3-libtorrent python3-openssl python3-pyasn1 python3-pyasn1-modules python3-pygame python3-rencode python3-service-identity python3-twisted
  python3-zope.interface
Suggested packages:
  python-attr-doc python-openssl-doc python3-openssl-dbg python-pygame-doc timidity python3-pampy python3-serial python3-tk

```

```
$ sudo apt install transmission transmission-gtk
```

---

# torbrowser

```
$ sudo apt-get install torbrowser-launcher 
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  python3-pyqt5 python3-pyqt5.sip python3-socks tor tor-geoipdb torsocks
Suggested packages:
  mixmaster apparmor-utils nyx obfs4proxy
```

```
$ sudo apt-get install apparmor-utils nyx obfs4proxy

The following additional packages will be installed:
  python3-apparmor python3-libapparmor python3-stem
Suggested packages:
  vim-addon-manager
```

`/home/andy/.cache/torbrowser/download`

删掉torbrowser-launcher

```
sudo apt purge torbrowser-launcher 
sudo apt install python3-gpg python3-packaging
```

直接下载解压用，不要打包成deb，一大堆权限要解决

---

# usbview

```
$ sudo apt-get install usbview
$ sudo usbview
```

---

# qr code 二维码工具

```
$ sudo apt install qtqr

The following additional packages will be installed:
  libqrencode4 libzbar0 python3-qrtools python3-zbar qrencode
```

---

# cutecom

```
$ sudo apt install cutecom
```

---

# tree

```
$ sudo apt install tree
```

---

# java

## openjre and openjdk

[https://www.cloudbooklet.com/how-to-install-java-on-ubuntu-22-04/](https://www.cloudbooklet.com/how-to-install-java-on-ubuntu-22-04/)

```
$ java --version
openjdk 11.0.17 2022-10-18
OpenJDK Runtime Environment (build 11.0.17+8-post-Ubuntu-1ubuntu222.04)
OpenJDK 64-Bit Server VM (build 11.0.17+8-post-Ubuntu-1ubuntu222.04, mixed mode, sharing)


$ sudo apt-get install openjdk-11-jre-headless default-jre openjdk-17-jre-headless openjdk-18-jre-headless openjdk-8-jre-headless

default-jre is already the newest version (2:1.11-72build2).
openjdk-11-jre-headless is already the newest version (11.0.17+8-1ubuntu2~22.04).
The following NEW packages will be installed:
  openjdk-17-jre-headless openjdk-18-jre-headless openjdk-8-jre-headless

$ java --version
openjdk 18.0.2-ea 2022-07-19
OpenJDK Runtime Environment (build 18.0.2-ea+9-Ubuntu-222.04)
OpenJDK 64-Bit Server VM (build 18.0.2-ea+9-Ubuntu-222.04, mixed mode, sharing)

$ sudo update-alternatives --config java
There are 4 choices for the alternative java (providing /usr/bin/java).

  Selection    Path                                            Priority   Status
------------------------------------------------------------
* 0            /usr/lib/jvm/java-18-openjdk-amd64/bin/java      1811      auto mode
  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/java      1111      manual mode
  2            /usr/lib/jvm/java-17-openjdk-amd64/bin/java      1711      manual mode
  3            /usr/lib/jvm/java-18-openjdk-amd64/bin/java      1811      manual mode
  4            /usr/lib/jvm/java-8-openjdk-amd64/jre/bin/java   1081      manual mode

Press <enter> to keep the current choice[*], or type selection number:


$ sudo apt install openjdk-17-jdk openjdk-18-jdk openjdk-11-jdk openjdk-8-jdk 

The following additional packages will be installed:
  openjdk-11-jdk-headless openjdk-17-jdk-headless openjdk-17-jre openjdk-18-jdk-headless openjdk-18-jre openjdk-8-jdk-headless openjdk-8-jre
Suggested packages:
  openjdk-11-demo openjdk-11-source visualvm openjdk-17-demo openjdk-17-source openjdk-18-demo openjdk-18-source openjdk-8-demo openjdk-8-source

$ sudo update-alternatives --config javac
There are 4 choices for the alternative javac (providing /usr/bin/javac).

  Selection    Path                                          Priority   Status
------------------------------------------------------------
* 0            /usr/lib/jvm/java-18-openjdk-amd64/bin/javac   1811      auto mode
  1            /usr/lib/jvm/java-11-openjdk-amd64/bin/javac   1111      manual mode
  2            /usr/lib/jvm/java-17-openjdk-amd64/bin/javac   1711      manual mode
  3            /usr/lib/jvm/java-18-openjdk-amd64/bin/javac   1811      manual mode
  4            /usr/lib/jvm/java-8-openjdk-amd64/bin/javac    1081      manual mode

Press <enter> to keep the current choice[*], or type selection number: 

$ ls /usr/lib/jvm/
default-java               java-1.17.0-openjdk-amd64  java-11-openjdk-amd64  java-1.8.0-openjdk-amd64  java-8-openjdk-amd64  openjdk-17
java-1.11.0-openjdk-amd64  java-1.18.0-openjdk-amd64  java-17-openjdk-amd64  java-18-openjdk-amd64     openjdk-11            openjdk-18

```

可以环境变量，或者在调用前export

```
$ sudo nano /etc/environment
添加比如
JAVA_HOME="/usr/lib/jvm/java-11-openjdk-amd64"
```

整理版本

```
$ sudo apt autoremove openjdk-17-jre-headless openjdk-18-jre-headless openjdk-8-jre-headless

The following packages will be REMOVED:
  openjdk-17-jdk openjdk-17-jdk-headless openjdk-17-jre openjdk-17-jre-headless openjdk-18-jdk openjdk-18-jdk-headless openjdk-18-jre openjdk-18-jre-headless
  openjdk-8-jdk openjdk-8-jdk-headless openjdk-8-jre openjdk-8-jre-headless
```

确认openjdk-11这俩安装了

```
$ sudo apt install default-jre openjdk-11-jdk openjdk-11-jdk-headless
```

## oracle java

[https://www.oracle.com/news/announcement/oracle-releases-java-18-2022-03-22/](https://www.oracle.com/news/announcement/oracle-releases-java-18-2022-03-22/)
[https://www.oracle.com/java/technologies/javase/jdk18-archive-downloads.html](https://www.oracle.com/java/technologies/javase/jdk18-archive-downloads.html)
[https://www.oracle.com/java/technologies/downloads/](https://www.oracle.com/java/technologies/downloads/)
[https://www.java.com/en/download/](https://www.java.com/en/download/)
[https://www.oracle.com/hk/java/technologies/javase/javase8u211-later-archive-downloads.html](https://www.oracle.com/hk/java/technologies/javase/javase8u211-later-archive-downloads.html)

java17LTS

```
$ sudo apt install libc6-x32 libc6-i386
//$ wget https://download.oracle.com/java/19/latest/jdk-19_linux-x64_bin.deb
$ wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.deb
//$ wget https://download.oracle.com/java/18/archive/jdk-18.0.2.1_linux-x64_bin.deb
```

java8和java11

```
https://download.oracle.com/otn/java/jdk/8u351-b10/10e8cce67c7843478f41411b7003171c/jdk-8u351-linux-x64.tar.gz
https://download.oracle.com/otn/java/jdk/11.0.17%2B10/8bd089539add49a9b99e2f27eb0c4329/jdk-11.0.17_linux-x64_bin.deb
```

参考 deb解包 和 `openjdk-8-jdk.tar.gz` `openjdk-8-jdk-headless.tar.gz`的结构及脚本

用下面这些这些替换preinst，postinst，prerm里的对应部分

```
appletviewer extcheck idlj jar jarsigner java javac javadoc javafxpackager javah javap javapackager java-rmi.cgi javaws jcmd jconsole jcontrol jdb jdeps jhat jinfo jjs jmap jps jrunscript jsadebugd jstack jstat jstatd jvisualvm keytool native2ascii orbd pack200 policytool rmic rmid rmiregistry schemagen serialver servertool tnameserv unpack200 wsgen wsimport xjc
```

打包成 `jdk-8_1.8.0-351_amd64-auto.deb`

参考 deb解包 和 `jdk-18.0.2.1_linux-x64_bin.deb`

把 `jdk-8u351-linux-x64.tar.gz` 打包成 `jdk-8_1.8.0-351_amd64.deb`

添加update-alternatives备选

```
//$ sudo tar zxvf jdk-8u291-linux-x64.tar.gz -C /usr/lib/jvm
$ sudo update-alternatives --install "/usr/bin/java" "java" "/usr/lib/jvm/jdk1.8.0_291/bin/java" 1112
$ sudo update-alternatives --install "/usr/bin/javac" "javac" "/usr/lib/jvm/jdk1.8.0_291/bin/javac" 1112
$ sudo update-alternatives --install "/usr/bin/javah" "javah" "/usr/lib/jvm/jdk1.8.0_291/bin/javah" 1112
```

查看update-alternatives备选

```
$ sudo update-alternatives --config java
$ sudo update-alternatives --config javac
$ sudo update-alternatives --config javah
```

总结：

只安装 `jdk-8_1.8.0-351_amd64-auto.deb`和 `jdk-11_11.0.17-1_amd64-auto.deb`

---

# 重新打包deb

## deb解包

```
mkdir extract
mkdir extract/DEBIAN
mkdir build
dpkg -X xxx.deb extract
dpkg -e xxx.deb extract/DEBIAN/
```

## 修改deb包内容

## 修改extract/DEBIAN/control的Installed-Size

```
$ cd extract
$ du -ks usr|cut -f 1
```

## DEBIAN/md5sums文件生成（可选）

```
$ md5sum $(find * -type f -not -path 'DEBIAN/*') > DEBIAN/md5sums
```

上面那句 比这句好

```
$ md5sum $(find ./usr/ -type f | awk '!/^\.\/DEBIAN/ { print substr($0, 3) }')
```

## 打包出deb

从已有的可以执行文件，同样按照这个方法可以打包出deb

```
$ cd extract/..
$ fakeroot
# dpkg-deb -b extract/ build/
```

生成的deb在build目录

```
$ sudo dpkg -i build/jdk-8_1.8.0-351_amd64.deb
```

---

# notepadqq

```
$ sudo apt install notepadqq

The following additional packages will be installed:
  libjs-highlight.js libjs-modernizr libjs-requirejs
```

---

# cups-pdf

```
$ sudo apt install printer-driver-cups-pdf libcups2 libcups2:i386
```

---

# retext

```
$ sudo apt install retext

The following additional packages will be installed:
  docutils-common python3-docutils python3-enchant python3-markups
  python3-mdx-math python3-pyqt5.qtwebkit python3-regex python3-roman
  python3-textile
Suggested packages:
  docutils-doc fonts-linuxlibertine | ttf-linux-libertine texlive-lang-french
  texlive-latex-base texlive-latex-recommended
```

---

# 默认浏览器设置为 opera

```
$ xdg-settings --list
$ xdg-settings get default-web-browser
$ xdg-settings set default-web-browser opera.desktop
//$ sudo update-alternatives --config x-www-browser
//$ sudo update-alternatives --config gnome-www-browser 
```

---

# protontricks（暂时用不着）

Protontricks is a simple wrapper script that allows you to easily run Winetricks commands for Steam Play / Proton games. This is often useful when a game requires closed-source runtime libraries that are not included with Proton. Installation of Steam is required to use Protontricks.

## repo里就有 protontricks

```
$ sudo apt install protontricks

The following additional packages will be installed:
  python3-vdf steam:i386 steam-devices
Suggested packages:
  libnvidia-gl-390:i386 | libnvidia-gl-470:i386 | libnvidia-gl-495:i386 pipewire:i386
```

## pip方式安装 protontricks

```
sudo apt install pipx
sudo apt install -y python3-pip python3-setuptools python3-venv
python3 -m pip install --user pipx
python3 -m pipx ensurepath
```

Close and reopen the terminal again

```
pipx install protontricks
```

具体细节

```
$ sudo apt install pipx

The following additional packages will be installed:
  fonts-font-awesome libjs-bootstrap4 libjs-lunr libjs-popper.js libjs-sizzle mkdocs node-jquery python-babel-localedata python3-argcomplete python3-babel
  python3-jinja2 python3-livereload python3-pip-whl python3-setuptools-whl python3-tornado python3-userpath python3-venv python3.10-venv sphinx-rtd-theme-common
Suggested packages:
  libjs-es5-shim ghp-import mkdocs-doc nodejs python-jinja2-doc coffeescript node-less node-uglify python-livereload-doc python3-django python3-flask python3-slimmer
  python-tornado-doc

```

user模式安装在

```
/home/andy/.local/lib/python3.10/site-packages/argcomplet
```

~/.bashrc添加了

```
# Created by `pipx` on 2022-11-25 06:07:49
export PATH="$PATH:/home/andy/.local/bin"
```

删除

先还原bashrc

然后

```
$ python3 -m pip uninstall argcomplete
Found existing installation: argcomplete 2.0.0
Uninstalling argcomplete-2.0.0:
  Would remove:
    /home/andy/.local/bin/activate-global-python-argcomplete
    /home/andy/.local/bin/python-argcomplete-check-easy-install-script
    /home/andy/.local/bin/python-argcomplete-tcsh
    /home/andy/.local/bin/register-python-argcomplete
    /home/andy/.local/lib/python3.10/site-packages/argcomplete-2.0.0.dist-info/*
    /home/andy/.local/lib/python3.10/site-packages/argcomplete/*
Proceed (Y/n)? y
  Successfully uninstalled argcomplete-2.0.0
```

```
$ rm -rf /home/andy/.local/lib    ## 确保没有其他文件夹了
$ rm -rf /home/andy/.local/pipx
```

---

# git empty folder

```
find -name .git -prune -o -type d -empty -exec touch {}/.gitkeep \;
git add .
```

---

# unzip

在 `$HOME/.bashrc`添加

```
alias unzip='unzip -O cp936'
```

---

# URL字符编码解码

url-encode

```
#!/usr/bin/perl
 
use URI::Escape;

print "Input original string:\n";
my $string = <STDIN>;
print "\nOriginal string:\n$string\n";

my $encode = uri_escape($string);
print "URL Encoded string:\n$encode\n\n";
```

url-decode

```
#!/usr/bin/perl
 
use URI::Escape;

print "Input original string:\n";
my $string = <STDIN>;
print "\nOriginal string:\n$string\n";

my $decode = uri_unescape($string);
print "URL Decoded string:\n$decode\n";

my $encode = uri_escape($decode);
print "URL Encoded string:\n$encode\n\n";
```

都chmod 777，就可以转换了，复制到/bin去。

---

# 显示进度的复制

```
$ sudo apt-get install gcp
```

---

# screenfetch

```
$ sudo apt install screenfetch
```

---

# xdot

```
$ sudo apt install xdot

The following additional packages will be installed:
  graphviz libann0 libcdt5 libcgraph6 libgts-0.7-5 libgts-bin libgvc6 libgvpr2
  liblab-gamut1 libpathplan4
Suggested packages:
  graphviz-doc
```

从dot文件产生图片

```
dot -Tpng test.dot -o test.png
dot -Tjpg test.dot -o test.jpg
```

xdot可以直接查看dot文件

---

# 开机服务时间占用分析

```
systemd-analyze blame            #开机启动项耗时
systemd-analyze critical-chain   #启动时间树状图
systemd-analyze time             #总的开机时间
systemd-analyze plot > ~/SystemdAnalyzePlot.svg    #生产开机时间分析图
```

---

# 删除 snap(没有必要)

[https://www.simplified.guide/ubuntu/remove-snapd](https://www.simplified.guide/ubuntu/remove-snapd)
[https://www.debugpoint.com/remove-snap-ubuntu/](https://www.debugpoint.com/remove-snap-ubuntu/)
[https://fedingo.com/how-to-remove-snap-in-ubuntu/](https://fedingo.com/how-to-remove-snap-in-ubuntu/)

```
$ snap list
Name                       Version           Rev    Tracking         Publisher   Notes
bare                       1.0               5      latest/stable    canonical✓  base
core20                     20221027          1695   latest/stable    canonical✓  base
firefox                    107.0.1-1         2154   latest/stable/…  mozilla✓    -
gnome-3-38-2004            0+git.6f39565     119    latest/stable/…  canonical✓  -
gtk-common-themes          0.1-81-g442e511   1535   latest/stable/…  canonical✓  -
snap-store                 41.3-66-gfe1e325  638    latest/stable/…  canonical✓  -
snapd                      2.57.6            17883  latest/stable    canonical✓  snapd
snapd-desktop-integration  0.1               14     latest/stable/…  canonical✓  -
```

```
sudo snap remove --purge firefox
sudo snap remove --purge snap-store
sudo snap remove --purge gnome-3-38-2004
sudo snap remove --purge gtk-common-themes
sudo snap remove --purge snapd-desktop-integration
sudo snap remove --purge bare
sudo snap remove --purge core20
sudo snap remove --purge snapd

sudo systemctl stop snapd.socket
sudo systemctl stop snapd.apparmor.service
sudo systemctl stop snapd.seeded.service
sudo systemctl disable snapd.socket
sudo systemctl disable snapd.apparmor.service
sudo systemctl disable snapd.seeded.service
sudo rm /etc/systemd/system/default.target.wants/ -rf

sudo apt purge snapd
sudo apt remove --purge --assume-yes snapd gnome-software-plugin-snap
rm -rf ~/snap/
sudo rm -rf /var/cache/snapd/ 

已经从mint源安装了firefox就不用下面几个了
sudo apt install --install-suggests gnome-software
sudo add-apt-repository ppa:mozillateam/ppa
sudo apt update
sudo apt install -t 'o=LP-PPA-mozillateam' firefox

确保不再安装snap
sudo gedit /etc/apt/preferences.d/nosnap.pref
```

```
Package: snapd
Pin: release a=*
Pin-Priority: -10
```

恢复安装snap

```
sudo rm /etc/apt/preferences.d/nosnap.pref
sudo apt update && sudo apt upgrade
sudo apt install snap snapd
sudo snap install snap-store
sudo apt install firefox
```

---

# 启动速度分析优化

```
$ systemd-analyze blame
7.261s NetworkManager-wait-online.service
4.685s privoxy.service
3.904s systemd-journal-flush.service
3.741s logrotate.service
3.628s ModemManager.service
3.589s networkd-dispatcher.service
3.570s systemd-udev-settle.service
2.138s dev-sdc2.device
2.055s accounts-daemon.service
1.775s kerneloops.service
1.442s polkit.service
1.363s avahi-daemon.service
1.352s NetworkManager.service
1.310s thermald.service
1.308s systemd-logind.service
1.298s wpa_supplicant.service
1.279s ubuntu-system-adjustments.service
1.105s systemd-udevd.service
 924ms gpu-manager.service
 857ms cups.service
 781ms networking.service
 659ms rsyslog.service
 537ms udisks2.service
 533ms ssh.service
 524ms lightdm.service
 520ms plymouth-quit-wait.service
 412ms systemd-fsck@dev-disk-by\x2duuid-187B\x2dEBA3.service
 405ms e2scrub_reap.service
 372ms apparmor.service
 366ms grub-common.service
 337ms zfs-load-module.service
 309ms grub-initrd-fallback.service
 302ms systemd-modules-load.service
 295ms lvm2-monitor.service
 285ms systemd-udev-trigger.service
 253ms systemd-sysusers.service
 238ms systemd-random-seed.service
 224ms update-notifier-download.service
 222ms systemd-resolved.service
 206ms systemd-tmpfiles-setup.service
 181ms casper-md5check.service
 180ms lm-sensors.service
 172ms colord.service
 161ms ubiquity.service
 161ms systemd-backlight@backlight:intel_backlight.service
 150ms keyboard-setup.service
 128ms user@1000.service
 127ms systemd-tmpfiles-setup-dev.service
 126ms blueman-mechanism.service
 115ms systemd-sysctl.service
 109ms upower.service
  99ms plymouth-start.service
  92ms systemd-journald.service
  91ms swapfile.swap
  84ms alsa-restore.service
  77ms modprobe@chromeos_pstore.service
  61ms systemd-timesyncd.service
  58ms boot-efi.mount
  57ms systemd-rfkill.service
  48ms zfs-volume-wait.service
  45ms setvtrgb.service
  40ms systemd-remount-fs.service
  36ms dev-hugepages.mount
  35ms dev-mqueue.mount
  35ms sys-kernel-debug.mount
  34ms sys-kernel-tracing.mount
  29ms kmod-static-nodes.service
  28ms zfs-mount.service
  27ms dns-clean.service
  27ms ifupdown-pre.service
  27ms modprobe@configfs.service
  26ms modprobe@drm.service
  25ms openvpn.service
  25ms modprobe@fuse.service
  24ms systemd-user-sessions.service
  19ms console-setup.service
  16ms systemd-update-utmp.service
  14ms finalrd.service
  13ms rtkit-daemon.service
  13ms plymouth-read-write.service
  11ms ufw.service
   8ms systemd-update-utmp-runlevel.service
   8ms user-runtime-dir@1000.service
   6ms zfs-share.service
   5ms modprobe@efi_pstore.service
   4ms modprobe@pstore_blk.service
   4ms modprobe@pstore_zone.service
   3ms modprobe@ramoops.service
   3ms e2scrub_all.service
   1ms sys-kernel-config.mount
   1ms sys-fs-fuse-connections.mount
  34us blk-availability.service
```

```
cat /etc/fstab
lsblk -f
ll /dev/disk/by-uuid/
systemd-analyze blame
systemd-analyze critical-chain
sudo systemctl disable NetworkManager-wait-online.service
sudo systemctl disable NetworkManager-dispatcher.service 
sudo systemctl mask plymouth-quit-wait.service
sudo aa-status
sudo apparmor_status
ls /etc/apparmor.d/
sudo systemctl disable apparmor.service 
sudo systemctl mask lvm2-monitor.service
sudo systemctl mask systemd-udev-settle.service
```

```
ll /lib/systemd/system
ll /etc/systemd/system/multi-user.target.wants
```

```
sudo systemctl enable apparmor.service 
sudo systemctl unmask lvm2-monitor.service
sudo systemctl unmask systemd-udev-settle.service
```

```
sudo systemctl unmask apport-forward.socket
sudo systemctl disable apport-forward.socket
sudo systemctl disable tor.service
sudo systemctl disable power-profiles-daemon.service  ## 多节电模式
sudo systemctl disable switcheroo-control.service     ## 多gpu
sudo systemctl disable binfmt-support.service         ## 多bin格式
sudo systemctl disable systemd-oomd.service           ## 高内存占用清理
sudo systemctl disable whoopsie.path                  ## 报告错误
```

```
systemctl --failed
```

```
journalctl -xeu networking.service
journalctl -xf
journalctl --unit systemd-rfkill.service -f
sudo systemctl enable NetworkManager-wait-online.service
sudo systemctl enable NetworkManager-dispatcher.service 
sudo systemctl unmask plymouth-quit-wait.service
```

---

# systemctl status networking.service 报错

```
/etc/network/if-up.d/resolved: line 12: mystatedir: command not found
```

```
sudo apt remove ifupdown ## 顺带删了 pppoeconf
```

就可以networking.service不报错

那么 ifupdown 有bug

```
sudo rm /etc/systemd/system/basic.target.wants/ -rf
sudo rm /etc/systemd/system/network.target.wants/ -rf
```

```
$ sudo ifup -av
run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
run-parts: executing /etc/network/if-pre-up.d/ethtool
run-parts: executing /etc/network/if-pre-up.d/wireless-tools
run-parts: executing /etc/network/if-pre-up.d/wpasupplicant
ip link set up dev lo 2>/dev/null

ifup: configuring interface lo=lo (inet)
run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
run-parts: executing /etc/network/if-pre-up.d/ethtool
run-parts: executing /etc/network/if-pre-up.d/wireless-tools
run-parts: executing /etc/network/if-pre-up.d/wpasupplicant
run-parts --exit-on-error --verbose /etc/network/if-up.d
run-parts: executing /etc/network/if-up.d/avahi-autoipd
run-parts: executing /etc/network/if-up.d/ethtool
run-parts: executing /etc/network/if-up.d/openvpn
run-parts: executing /etc/network/if-up.d/resolved
/etc/network/if-up.d/resolved: line 12: mystatedir: command not found
/etc/network/if-up.d/resolved: line 20: return: can only `return' from a function or sourced script
run-parts: /etc/network/if-up.d/resolved exited with return code 2
ifup: failed to bring up lo
run-parts --exit-on-error --verbose /etc/network/if-up.d
run-parts: executing /etc/network/if-up.d/avahi-autoipd
run-parts: executing /etc/network/if-up.d/ethtool
run-parts: executing /etc/network/if-up.d/openvpn
run-parts: executing /etc/network/if-up.d/resolved
run-parts: executing /etc/network/if-up.d/wpasupplicant

```

```
$ sudo /sbin/ifup -av --read-environment
run-parts --exit-on-error --verbose /etc/network/if-pre-up.d
run-parts: executing /etc/network/if-pre-up.d/ethtool
run-parts: executing /etc/network/if-pre-up.d/wireless-tools
run-parts: executing /etc/network/if-pre-up.d/wpasupplicant
run-parts --exit-on-error --verbose /etc/network/if-up.d
run-parts: executing /etc/network/if-up.d/avahi-autoipd
run-parts: executing /etc/network/if-up.d/ethtool
run-parts: executing /etc/network/if-up.d/openvpn
run-parts: executing /etc/network/if-up.d/resolved
run-parts: executing /etc/network/if-up.d/wpasupplicant

```

关闭服务

```
sudo systemctl disable networking.service
```

---

# livecd backup + ACLs（Access Control List） acl权限

[https://unix.stackexchange.com/questions/391/what-to-use-to-backup-files-preserving-acls](https://unix.stackexchange.com/questions/391/what-to-use-to-backup-files-preserving-acls)

方法1:

```
star -c -p -acl artype=exustar -f archive.tar  files...
star -x -acl -f archive.tar
```

方法2:

```
getfacl -R /a_folder > folder.acl
tar -czvf folder.tar.gz /a_folder
tar -xvf folder.tar.gz
setfacl --restore=folder.acl
```

方法3:

```
tar --acls -cpf backup.tar some-dir-or-file
tar --acls -xpf backup.tar
```

方法4:(bsdtar backups extended ACL by default, it uses the same syntax as GNU tar, and the archives it produces are readable by GNU tar)

```
bsdtar cf archive.tar /my/folder/using/extd_acl 
bsdtar xf archive.tar 
```

方法5:

```
ZSTD_CLEVEL=19 tar --acls --xattrs -caPf systemd-network-conf.tzst --directory=/etc systemd/network systemd/networkd.conf.d
sudo tar --acls --xattrs -xvf systemd-network-conf.tzst
```

复制注意

```
rsync with the -A and/or -X options.
```

手动修改目录ACL属性例子

```
setfacl -m u:umesh:rw Codespace
getfacl Codespace
# file: Codespace/
# owner: root
# group: root
user::rwx
user:umesh:rw-
group::r-x
mask::rwx
other::r-x

setfacl -x u:umesh Codespace/
getfacl Codespace
# file: Codespace/
# owner: root
# group: root
user::rwx
group::r-x
mask::rwx
other::r-x
```

已知要

`sudo setfacl -m u:andy:rx /media/andy`

`sudo setfacl -m u:andy:r /var/log/journal/442b07a4c9b14abd98e876955e27980d/user-1000@ac516f3b49894d2793c8b9ad4f7b4243-00000000000006f8-0005ee98336a9c14.journal`

查找的办法

```
$ sudo getfacl -R / > /home/andy/Downloads/folder.acl
$ sudo cat folder.acl | grep -C 5 "user:andy:"

# file: var/log/journal/b0d275fb46fa48c6820be57edaa22cf5/user-1000.journal
# owner: root
# group: systemd-journal
user::rw-
user:andy:r--
group::r-x	#effective:r--
group:adm:r-x	#effective:r--
mask::r--
other::---

--

# file: var/log/journal/b0d275fb46fa48c6820be57edaa22cf5/user-1000@0005edd1f7919d0d-2de7b960b28e0a38.journal~
# owner: root
# group: systemd-journal
user::rw-
user:andy:r--
group::r-x	#effective:r--
group:adm:r-x	#effective:r--
mask::r--
other::---

--

# file: var/lib/systemd/coredump/core.file-roller.1000.5ec63b10cdf842bd92f4e02a6882716b.6066.1669533484000000.zst
# owner: root
# group: root
user::rw-
user:andy:r--
group::r--
mask::r--
other::---

# file: var/lib/systemd/timesync
--

# file: media/andy
# owner: root
# group: root
user::rwx
user:andy:r-x
group::---
mask::r-x
other::---

# file: media/andy/e93f7f27-d29a-4a58-bbec-243395df32ad

```

---

# grep显示多行信息

```
grep -C 5 foo file  #显示file文件中匹配foo字串那行以及上下5行
grep -B 5 foo file  #显示foo及前5行
grep -A 5 foo file  #显示foo及后5行

```

---

# openbox brightness

```
sudo apt install xfce4-power-manager
journalctl -xf
acpi_listen
```

有类似

```
/usr/sbin/xfpm-power-backlight-helper
```

---

# proftpd 一个 tfp server

proftpd 是 webmin 推荐使用的，和vsftpd是冲突的

```
sudo apt install proftpd proftpd-doc
```

---

# webmin

[https://github.com/webmin/webmin/releases](https://github.com/webmin/webmin/releases)

```
$ sudo apt-get install libauthen-pam-perl
$ sudo dpkg -i webmin_2.001_all.deb
$ sudo /usr/share/webmin/changepass.pl /etc/webmin root [密码]
Password for Webmin user root updated successfully
```

说明：
root是webmin的用户名，不是OS的
xxx为密码
/etc/webmin是webmin的配置目录

```
https://localhost:10000
```

---

# DSVIEW

```
sudo apt install fftw-dev libboost-all-dev
sudo apt install git gcc g++ make cmake libglib2.0-dev zlib1g-dev doxygen libusb-1.0-0-dev libboost-dev libfftw3-dev python3-dev libudev-dev pkg-config doxygen-gui
```

PKGBUILD

```
# Maintainer: Anatol Pomozov
# Co-Maintainer: Abdelhak Bougouffa <abougouffa@fedoraproject.org>
# Contributor: Thomas Krug <t.krug@elektronenpumpe.de>

pkgname=dsview-git
pkgver=1.2.0.r15.g9264bce
pkgrel=1
pkgdesc='GUI programe for supporting various instruments from DreamSourceLab, including logic analyzer, oscilloscope, etc.'
arch=(i686 amd64)
url='http://www.dreamsourcelab.com/'
license=(GPL3)
# Upstream added VCS dependency to libsigrokdecode :/
depends=(libboost-all-dev qtbase5-dev fftw-dev)
makedepends=(cmake)
source=(git+https://github.com/DreamSourceLab/DSView)
sha1sums=('SKIP')

#pkgver() {
#  cd DSView
#  git describe --tags | sed -r 's/^v//;s/([^-]*-g)/r\1/;s/-/./g'
#}

prepare() {
  cd DSView
  sed 's|/usr/local/|/usr/|' -i DSView/DSView.desktop
  sed 's| /lib/udev/rules.d| /usr/lib/udev/rules.d|' -i CMakeLists.txt
}

build() {
  cd DSView

  cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_BUILD_TYPE=Release
  make
}

package() {
  cd DSView

  make DESTDIR="$pkgdir" install
  #install -Dm644 icons/logo_color.png "$pkgdir/usr/share/pixmaps/dsview.png"
}
```

```
makedeb
会 fatal: No tags can describe . Try --always, or create some tags.
git fetch --prune --unshallow 就可以解决
```

---

# electronic-wechat

[https://github.com/zzy-ac/electronic-wechat/releases](https://github.com/zzy-ac/electronic-wechat/releases)

```
sudo dpkg -i electronic-wechat_2.3.2_amd64.deb
```

---

# Xilinx vivado vitis

```
sudo source /opt/Xilinx/.xinstall/Vitis_2020.1/scripts/installAIeDepLibs.sh
sudo apt install blt libcanberra-gtk-module libcanberra-gtk0
sudo apt install gcc-multilib libexpat1-dev 
sudo apt install texinfo libncurses5-dev libapr1 libapr1-dev libaprutil1 libsctp-dev uuid-dev
sudo apt install lib32atomic1 lib32gomp1 lib32itm1 lib32quadmath0 lib32stdc++6 libasound2-dev libbison-dev libc6-dev-i386 libc6-dev-x32 libc6-i386 libc6-x32 libcaca-dev libfl-dev libfl2 libpulse-dev libslang2-dev libtext-unidecode-perl libtinfo-dev libx32atomic1 libx32gomp1 libx32itm1  libx32quadmath0 libx32stdc++6 python3-astroid python3-gitdb python3-isort python3-lazy-object-proxy python3-logilab-common python3-mccabe python3-smmap python3-tk python3-wrapt tk8.6-blt2.5
sudo apt install libtinfo-dev
sudo apt install libstdc++6:i386 libgtk2.0-0:i386 dpkg-dev:i386
sudo apt install libtinfo5 libncurses5
sudo apt install libapr1 libapr1-dev libaprutil1 libc6-dev-i386 net-tools graphviz lsb
```

ERROR: ld.so: object '/usr/lib/x86_64-linux-gnu/libgtk3-nocsd.so.0' from LD_PRELOAD cannot be preloaded (cannot open shared object file): ignored.

```
sudo apt-get install libgtk3-nocsd0
```

删除多余库

```
rm /opt/Xilinx/Vitis/2020.1/lib/lnx64.o/Ubuntu/libstdc++.so.6
rm /opt/Xilinx/Vivado/2020.1/lib/lnx64.o/Ubuntu/libstdc++.so.6
```

安装驱动

```
cd /opt/Xilinx/Vivado/2020.1/data/xicom/cable_drivers/lin64/install_script/install_drivers/
sudo ./install_drivers.sh
```

---

# geany

```
sudo apt-get install geany libvte9 geany-plugins geany-plugins-common
```

---

# 修改mac地址

```
sudo gedit /etc/rc.local
```

```
#!/bin/sh
#ifconfig eth0 hw ether e0:d5:5e:f8:a6:7a
ifconfig eth0 hw ether 00:d8:61:a6:62:b7
exit 0
```

```
sudo chmod +x /etc/rc.local
sudo systemctl status rc-local
sudo gedit /etc/systemd/system/rc-local.service
```

```
#  This file is part of systemd.
#
#  systemd is free software; you can redistribute it and/or modify it
#  under the terms of the GNU General Public License as published by
#  the Free Software Foundation; either version 2 of the License, or
#  (at your option) any later version.

[Unit]
Description=/etc/rc.local Compatibility
ConditionPathExists=/etc/rc.local

[Service]
Type=forking
ExecStart=/etc/rc.local start
TimeoutSec=0
StandardOutput=tty
RemainAfterExit=yes
SysVStartPriority=99

[Install]
WantedBy=multi-user.target
```

```
sudo systemctl enable rc-local
sudo systemctl start rc-local
sudo systemctl status rc-local
```

---

# "modelsim" Fontconfig error: Cannot load default config file

```
/opt/modelsim/modeltech/lib
删掉libfontconfig.so.1和libfontconfig.so.1.6.2，因为系统库有
/usr/lib/x86_64-linux-gnu/libfontconfig.so
/usr/lib/x86_64-linux-gnu/libfontconfig.so.1
/usr/lib/x86_64-linux-gnu/libfontconfig.so.1.12.0
```

---

# github "X11 forwarding request failed on channel 0"

test

```
ssh -T git@github.com
```

```
$ git clone git@github.com:Itseez/opencv.git
Cloning into 'opencv'
Warning: Permanently added the RSA host key for IP address '192.30.252.128' to the list of known hosts.
X11 forwarding request failed on channel 0
(...)
```

disable ForwardX11 just for github.com in `~/.ssh/config` or `/etc/ssh/ssh_config`

```
Host github.com
    ForwardX11 no

Host *
    ForwardX11 yes
```

---

# upgrade20230208

```
sudo apt install grub-efi-amd64 grub-efi-amd64-bin grub-efi-amd64-signed
sudo apt autoremove
The following packages will be REMOVED:
libllvm13:i386 libvulkan1:i386 mesa-vulkan-drivers:i386
sudo apt install casper fonts-noto-color-emoji gnome-initial-setup ubiquity-casper ubuntu-advantage-tools update-notifier update-notifier-common apport-gtk
```

---

# 星空图stellarium

```
sudo apt install stellarium
```

---

# wps

```
wget https://wdl1.pcfg.cache.wpscdn.com/wpsdl/wpsoffice/download/linux/11664/wps-office_11.1.0.11664.XA_amd64.deb
sudo dpkg -i wps-office_11.1.0.11664.XA_amd64.deb
sudo apt install wps-office ttf-mscorefonts-installer wps2odt wps2epub
```

some formula symbols might be not display correctly due to missing fonts Symbol,wingdings,wingdings 2,wingdings 3,webding

```
sudo dpkg -i symbol-fonts_1.2_all.deb
```

manual install symbol-fonts

```
For this tutorial we will use the /tmp directory to temporary save the files.

Change to the /tmp directory.
cd /tmp

Clone the Git repository.
git clone https://github.com/iamdh4/ttf-wps-fonts.git

Create a sub directory in your system's fonts directory. This is usually /usr/share/fonts, otherwise consult your distribution's documentation.
sudo mkdir /usr/share/fonts/wps-fonts

Move fonts to the new directory.
sudo mv ttf-wps-fonts/* /usr/share/fonts/wps-fonts

Fix the file permissions.
sudo chmod 644 /usr/share/fonts/wps-fonts/*

Rebuild the font cache.
sudo fc-cache -vfs

Clean up the tmp directory.
rm -rf /tmp/ttf-wps-fonts
```

---

# qalculate

```
sudo apt install qalculate-gtk
Suggested packages:
  gnuplot-doc
The following NEW packages will be installed:
  aglfn gnuplot-data gnuplot-x11 liblua5.4-0 libqalculate-data libqalculate22 qalc qalculate-gtk
```

---

# 安装docker

速度更快的办法，用国内源

```
curl -fsSL https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://mirrors.tuna.tsinghua.edu.cn/docker-ce/linux/ubuntu \
  jammy stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
```

see
[https://docs.docker.com/engine/install/linux-postinstall/](https://docs.docker.com/engine/install/linux-postinstall/)

[https://docs.docker.com/engine/install/ubuntu/](https://docs.docker.com/engine/install/ubuntu/)

```
$ sudo apt-get remove docker docker-engine docker.io containerd runc
$ sudo apt-get update
$ sudo apt-get install \
    ca-certificates \
    curl \
    gnupg \
    lsb-release
$ sudo mkdir -m 0755 -p /etc/apt/keyrings
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg
$ echo \
  "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \
  jammy stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null
$ sudo apt update
$ sudo apt install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
$ sudo docker run hello-world
$ sudo groupadd docker
$ sudo usermod -aG docker $USER
$ newgrp docker
$ docker run hello-world
$ sudo systemctl enable docker.service
$ sudo systemctl enable containerd.service
```

## docker 源加速

/etc/docker/daemon.json，加上如下的键值:

```
{
  "registry-mirrors": ["https://registry.docker-cn.com"]
}
```

## 阿里云镜像加速docker

[https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors](https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors)

修改daemon配置文件 `/etc/docker/daemon.json`来使用加速器

```
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://3m45wpca.mirror.aliyuncs.com"]
}
EOF

sudo systemctl daemon-reload
sudo systemctl restart docker
```

验证

```
docker info
```

---

# apt加速

apt临时加速(shadowsocks通过privoxy把socks5映射为http/https..,默认privoxy的端口8118)

```
sudo apt-get -o Acquire::http::proxy="http://127.0.0.1:8118/" upgrade
sudo apt-get -o Acquire::https::proxy="http://127.0.0.1:8118/" upgrade
sudo apt-get -o Acquire::http::proxy="http://127.0.0.1:8118/" install xxx
sudo apt-get -o Acquire::https::proxy="http://127.0.0.1:8118/" install xxx
```

新建~/apt_proxy_conf
`gedit ~/apt_proxy_conf`

```
Acquire::http::proxy "http://127.0.0.1:8118";
Acquire::ftp::proxy "http://127.0.0.1:8118";
Acquire::https::proxy "http://127.0.0.1:8118";
```

运行

```
sudo apt-get -c ~/apt_proxy_conf update
sudo apt-get -c ~/apt_proxy_conf upgrade
```

---

# pycharm

[https://github.com/RisesunStudios/ide-eval-resetter](https://github.com/RisesunStudios/ide-eval-resetter)

```
plugins -> Manage Plugin Repositories -> add "https://plugins.zhile.io" -> search "IDE Eval Reset"
```

添加路径

```
/home/andy/.local/share/JetBrains/PyCharm2020.3/ide-eval-resetter
```

---

# 一些零件

```
sudo apt install inxi libxml-dumper-perl fancontrol read-edid i2c-tools python3-smbus
sudo apt install lxrandr
sudo apt install lxde
sudo apt install task-lxde-desktop
sudo apt install lxde
sudo apt install desktop-base

lspci
inxi -Fxpmrz

```

---

# RTL8723DE wifi网卡驱动失效

```
git clone https://github.com/lwfinger/rtw88.git
cd rtw88
make && sudo make install
sudo reboot -h now
```

---

# 硬盘分区挂载出现“you do not have permission necessary to view the contents of“的问题 (), ACL权限

```
$ ll /media
total 12
drwxr-xr-x  3 root root 4096 Dec  2 11:48 ./
drwxr-xr-x 20 root root 4096 May 26 09:50 ../
drwxr-x---  5 root root 4096 May 26 14:10 andy/

$ sudo setfacl -m u:andy:rx /media/andy

$ ll /media
total 12
drwxr-xr-x   3 root root 4096 Dec  2 11:48 ./
drwxr-xr-x  20 root root 4096 May 26 09:50 ../
drwxr-x---+  5 root root 4096 May 26 14:10 andy/

```

---

# qqmusic

```
sudo dpkg -i qqmusic_1.1.5_amd64.deb
```

---

# 安装 nutstore

可以直接在官网下载

```
wget https://pkg-cdn.jianguoyun.com/static/exe/installer/ubuntu/nautilus_nutstore_amd64.deb
```

```
$ sudo apt install libnautilus-extension-dev
$ pkg-config --cflags libnautilus-extension
```

从 aur 下载 nutstore 的 PKGBUILD 文件，修改编译

```
# Maintainer: Bhoppi Chaw <bhoppi#outlook,com>

pkgname=nutstore-experimental
pkgver=5.1.7
pkgrel=1
pkgdesc='Nutstore experimental version.'
arch=(amd64)
url='https://www.jianguoyun.com/'
license=(custom)
depends=(
#    libappindicator-gtk3
#    libnotify
#    python-gobject
#    webkit2gtk
)
optdepends=('nautilus-nutstore: Nautilus plugin')
provides=(nutstore)
conflicts=(nutstore)
source=(nutstore license)
source_amd64=("https://pkg-cdn.jianguoyun.com/static/exe/ex/$pkgver/nutstore_client-$pkgver-linux-x86_64-public.tar.gz")
sha256sums=('a4aa358d45b306cbeac449f2256f00a5b81a95197394eba7efa96eaae820cf5b'
            'd320e071403cdad44881beb880f5ccfa8ec0a625718a9f572dce0cc9fff81ade')
sha256sums_x86_64=('b55d3ab8744da92151949ab088171cfae1f80464b356fd1720f24be0708f15c4')

build() {
    cd $srcdir/gnome-config
    sed -i '/Exec=/s|~/\.nutstore/dist/bin/nutstore-pydaemon.py|/usr/bin/nutstore|' menu/nutstore-menu.desktop
    sed -i '/Exec=/s|~/\.nutstore/dist|/opt/nutstore|' autostart/nutstore-daemon.desktop
    cd $srcdir/bin
    sed -i '/gvfs-set-attribute/s|gvfs-set-attribute|gio set|' nutstore-pydaemon.py
    python3 -m compileall .
}

package() {
    cd $srcdir
    install -D -m755 nutstore $pkgdir/usr/bin/nutstore
    install -D -m644 license $pkgdir/usr/share/licenses/nutstore/license
    rm nutstore license *.tar.gz
    mkdir -p $pkgdir/opt/nutstore && cp -aR ./ $pkgdir/opt/nutstore
    install -D -m644 gnome-config/menu/nutstore-menu.desktop $pkgdir/usr/share/applications/nutstore.desktop
    install -D -m644 app-icon/nutstore.png $pkgdir/usr/share/icons/hicolor/512x512/apps/nutstore.png
}
```

```
$ makedeb
$ sudo dpkg -i nutstore-experimental_5.1.7-1_amd64.deb
```

## nautilus-nutstore

```
# Maintainer: Bhoppi Chaw <bhoppi#outlook,com>

pkgname=nautilus-nutstore
pkgver=5.1.7
pkgrel=1
pkgdesc='Nutstore integration for Nautilus.'
arch=(amd64)
url='https://www.jianguoyun.com/'
license=(CCPL:by-nd GPL2)
depends=(libnautilus-extension-dev nutstore)
source=("https://www.jianguoyun.com/static/exe/installer/nutstore_linux_src_installer.tar.gz")
sha256sums=('545e0d393f3e529d0c0a8f51fe652749a1067f84c78dfb445ffb6023c5a7bfa1')

build() {
    cd $srcdir/nutstore_linux_src_installer
    ./configure || return 1
    make || return 1
}

package() {
    cd $srcdir/nutstore_linux_src_installer
    make DESTDIR=$pkgdir install
    install -D -m 644 COPYING $pkgdir/usr/share/licenses/$pkgname/COPYING
}
```

```
$ makedeb
$ sudo dpkg -i nautilus-nutstore_5.1.7-1_amd64.deb
```

[https://github.com/chrisjbillington/git-nautilus-icons](https://github.com/chrisjbillington/git-nautilus-icons)

[https://aur.archlinux.org/packages/git-nautilus-icons](https://aur.archlinux.org/packages/git-nautilus-icons)

```
$ sudo apt-get install python3-gi python3-caja python3-nautilus python-nemo pypy-enum34 python3-pip
```

## 安装 nutstore 之后 markdown 有关的 mime 修复

要修改

```
~/.local/share/applications/defaults.list  # 去掉 application/x-md=nutstore-lightapp.desktop
~/.local/share/applications/mimeinfo.cache # 去掉 application/x-md=nutstore-lightapp.desktop;text/markdown=nutstore-lightapp.desktop;text/x-markdown=nutstore-lightapp.desktop;
~/.local/share/applications/nutstore-lightapp.desktop # 去掉 application/x-md;text/markdown;text/x-markdown;
~/.local/share/mime/types # 去掉 application/x-md
mv ~/.local/share/mime/application/x-md.xml ~/.local/share/mime/application/x-md.xml.bk
mv ~/.local/share/mime/packages/nutstore-lightapp.xml ~/.local/share/mime/packages/nutstore-lightapp.xml.bk
mv ~/.local/share/icons/hicolor/scalable/mimetypes/application-x-md.svg ~/.local/share/icons/hicolor/scalable/mimetypes/application-x-md.svg.bk

update-mime-database ~/.local/share/mime
```

这样 markdown 文件就在 pcmanfm 里面显示为 Markdown document, 顺带的 pdf thumbnails (见evince)也正常了

## 重置所有坚果云设置(ref)

```
rm ~/.config/autostart/nutstore-daemon.desktop
rm ~/.local/share/applications/nutstore-menu.desktop
rm ~/.local/share/icons/hicolor/64x64/apps/nutstore.png
gtk-update-icon-cache --ignore-theme-index "~/.local/share/icons/hicolor" > /dev/null 2>&1
rm -r ~/.nutstore/dist
```

---

# vbox

```
$ sudo dpkg -i virtualbox-7.0_7.0.8-156879~Ubuntu~jammy_amd64.deb
$ cat /etc/group | grep vbox
vboxusers:x:146:
$ sudo usermod -a -G vboxusers andreas
$ cat /etc/group | grep vbox
vboxusers:x:146:andy
$ sudo /sbin/vboxconfig
$ sudo /sbin/rcvboxdrv setup
$ sudo modprobe vboxdrv
```

## 安装 vbox 扩展包

`sudo virtualbox`

安装 `extension`包

或者用命令行添加

```
VBoxManage extpack install [--replace] <tarball> |
                   uninstall [--force] <name> |
                   cleanup
```

---

# codeblocks

```
$ sudo apt install codeblocks
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  codeblocks-common libastyle3 libcodeblocks0
Suggested packages:
  codeblocks-contrib libwxgtk3.0-dev

```

---

# virtualenv

```
$ sudo apt install virtualenv
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  python3-distlib python3-filelock python3-pip-whl python3-platformdirs python3-setuptools-whl python3-virtualenv python3-wheel-whl
Suggested packages:
  python2-pip-whl python2-setuptools-whl

```

---

# wps office

```
$ sudo dpkg -i wps-office_11.1.0.11698.XA_amd64.deb
$ sudo dpkg -i wps-office-fonts_1.0_all.deb
$ sudo dpkg -i symbol-fonts_1.2_all.deb
$ sudo apt-get install wps-office ttf-mscorefonts-installer wps2odt wps2epub
```

---

# google-chrome

```
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
sudo dpkg -i google-chrome-stable_current_amd64.deb
sudo apt -f install

$ ls -l /usr/bin/google-chrome
lrwxrwxrwx 1 root root 31 4月  11 15:13 /usr/bin/google-chrome -> /etc/alternatives/google-chrome
andreas@Vostro-5880:~
$ ls -l /usr/bin/google-chrome-stable 
lrwxrwxrwx 1 root root 32 4月   2 02:38 /usr/bin/google-chrome-stable -> /opt/google/chrome/google-chrome
andreas@Vostro-5880:~
$ sudo update-alternatives --config  google-chrome
[sudo] password for andreas: 
There is only one alternative in link group google-chrome (providing /usr/bin/google-chrome): /usr/bin/google-chrome-stable
Nothing to configure.
```

---

# baidunetdisk 百度云盘

```
$ sudo dpkg -i baidunetdisk_4.17.7_amd64.deb
```

---

# pyqt5 etc.

```
$ sudo apt install pyqt5-examples pyqt5-dev-tools python3-pyqt5.qtmultimedia python3-pyqt5.qtopengl python3-pyqt5.qtquick python3-pyqt5.qtsvg

```

---

# 最新snap状态

```
$ snap list 
Name                       Version           Rev    Tracking         Publisher      Notes
bare                       1.0               5      latest/stable    canonical✓     base
chromium                   114.0.5735.106    2497   latest/stable    canonical✓     -
core20                     20230503          1891   latest/stable    canonical✓     base
core22                     20230531          750    latest/stable    canonical✓     base
cups                       2.4.2-5           872    latest/stable    openprinting✓  -
firefox                    113.0.1-1         2667   latest/stable/…  mozilla✓       -
gnome-3-38-2004            0+git.6f39565     140    latest/stable/…  canonical✓     -
gnome-42-2204              0+git.ff35a85     111    latest/stable    canonical✓     -
gtk-common-themes          0.1-81-g442e511   1535   latest/stable/…  canonical✓     -
snap-store                 41.3-71-g709398e  959    latest/stable/…  canonical✓     -
snapd                      2.59.4            19361  latest/stable    canonical✓     snapd
snapd-desktop-integration  0.9               83     latest/stable/…  canonical✓     -

```

---

# vscode key

## 方法1（不是最好的）

```
$ sudo apt update
...
W: https://packages.microsoft.com/ubuntu/22.04/prod/dists/jammy/InRelease: Key is stored in legacy trusted.gpg keyring (/etc/apt/trusted.gpg), see the DEPRECATION section in apt-key(8) for details.
```

```
sudo apt-key list
sudo apt-key export BE1229CF | sudo gpg --dearmour -o /usr/share/keyrings/microsoft.gpg
```

```
sudo gedit /etc/apt/sources.list.d/vscode.list 
```

```
deb [signed-by=/usr/share/keyrings/microsoft.gpg arch=amd64,arm64,armhf] http://packages.microsoft.com/repos/code stable main
```

```
sudo apt-key del BE1229CF
```

## 方法2(最好)

```
sudo rm /usr/share/keyrings/microsoft.gpg
sudo rm /etc/apt/sources.list.d/vscode.list
sudo apt remove code
sudo dpkg -i code_1.79.1-1686587647_amd64.deb
apt-key list
cat /etc/apt/sources.list.d/vscode.list
```

## 方法3(实际就是deb包的postinst的动作)

```
$ eval $(apt-config shell APT_SOURCE_PARTS Dir::Etc::sourceparts/d)
$ echo $APT_SOURCE_PARTS
/etc/apt/sources.list.d/

$ eval $(apt-config shell APT_TRUSTED_PARTS Dir::Etc::trustedparts/d)
$ echo $APT_TRUSTED_PARTS
/etc/apt/trusted.gpg.d/

$ sudo echo "### THIS FILE IS AUTOMATICALLY CONFIGURED ###
# You may comment out this entry, but any other modifications may be lost.
deb [arch=amd64,arm64,armhf] http://packages.microsoft.com/repos/code stable main" > $CODE_SOURCE_PART


$ sudo echo "-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1.4.7 (GNU/Linux)

mQENBFYxWIwBCADAKoZhZlJxGNGWzqV+1OG1xiQeoowKhssGAKvd+buXCGISZJwT
LXZqIcIiLP7pqdcZWtE9bSc7yBY2MalDp9Liu0KekywQ6VVX1T72NPf5Ev6x6DLV
7aVWsCzUAF+eb7DC9fPuFLEdxmOEYoPjzrQ7cCnSV4JQxAqhU4T6OjbvRazGl3ag
OeizPXmRljMtUUttHQZnRhtlzkmwIrUivbfFPD+fEoHJ1+uIdfOzZX8/oKHKLe2j
H632kvsNzJFlROVvGLYAk2WRcLu+RjjggixhwiB+Mu/A8Tf4V6b+YppS44q8EvVr
M+QvY7LNSOffSO6Slsy9oisGTdfE39nC7pVRABEBAAG0N01pY3Jvc29mdCAoUmVs
ZWFzZSBzaWduaW5nKSA8Z3Bnc2VjdXJpdHlAbWljcm9zb2Z0LmNvbT6JATUEEwEC
AB8FAlYxWIwCGwMGCwkIBwMCBBUCCAMDFgIBAh4BAheAAAoJEOs+lK2+EinPGpsH
/32vKy29Hg51H9dfFJMx0/a/F+5vKeCeVqimvyTM04C+XENNuSbYZ3eRPHGHFLqe
MNGxsfb7C7ZxEeW7J/vSzRgHxm7ZvESisUYRFq2sgkJ+HFERNrqfci45bdhmrUsy
7SWw9ybxdFOkuQoyKD3tBmiGfONQMlBaOMWdAsic965rvJsd5zYaZZFI1UwTkFXV
KJt3bp3Ngn1vEYXwijGTa+FXz6GLHueJwF0I7ug34DgUkAFvAs8Hacr2DRYxL5RJ
XdNgj4Jd2/g6T9InmWT0hASljur+dJnzNiNCkbn9KbX7J/qK1IbR8y560yRmFsU+
NdCFTW7wY0Fb1fWJ+/KTsC4=
=J6gs
-----END PGP PUBLIC KEY BLOCK-----
" | gpg --dearmor > $CODE_TRUSTED_PART

apt-key list
cat /etc/apt/sources.list.d/vscode.list
```

---

# evince

```
$ sudo apt install evince evince-common libevince-dev gir1.2-evince-3.0
$ cat /usr/share/thumbnailers/evince.thumbnailer
```

---

```
$ sudo apt install ffmpegthumbnailer tumbler
```

```
tumbler: Image files. This must also be installed to expand thumbnailing capabilities to other file types
poppler-glib or evince: Adobe .pdf files
ffmpegthumbnailer: Video files
freetype2: Font files
libgsf: .odf files
raw-thumbnailer: .raw files
```

---

# pcmanfm pdf thumbnails and markdown type recognise as text file (not solved)

```
mimeopen ubuntu22.04-usbstick.md
mimetype ubuntu22.04-usbstick.md
xdg-mime query default text/markdown
xdg-mime query default inode/directory
cat ~/.local/share/applications/defaults.list
cat /usr/share/mime/types
/home/$USER/.config/mimeapps.list
/home/$USER/.local/share/applications/mimeapps.list

sudo apt install qtxdg-dev-tools
qtxdg-mat defapp inode/directory

sudo apt install libfile-mimeinfo-perl
```

---

# Nemo 有关

```
//sudo apt install nemo-terminal # （默认 F4 切换） 不喜欢这样的

Edit > Preferences > Toolbar > Open in terminal (不是很好)
```

## Nemo F4 打开 terminal

默认 终端 terminal 修改见前面 `修改 默认 终端`

```
mkdir -p ~/.gnome2/accels
touch ~/.gnome2/accels/nemo
gedit ~/.gnome2/accels/nemo
```

```
(gtk_accel_path "<Actions>/DirViewActions/OpenInTerminal" "F4")
```

```
nemo -q

NEMO_DEBUG=thumbnails nemo --debug

nemo
```

会自动生成其他参考的键，但是都是注释状态，参考看就是了

In case you want not to replace, but to add "Open in Terminator" in your right-click menu,(参考)

1. go to `/home/$USER/.local/share/nemo/actions` folder,
2. create `open_in_terminator.nemo_action` file:

```
 [Nemo Action]

 Name=Open in Terminator
 Comment=Open the 'terminator' terminal in the selected folder
 Exec=terminator --working-directory="%F"
 Icon-Name=terminator
 Selection=any
 Extensions=dir;
```

References:

1. [Blog post: &#34;Add Right-Click Commands in Linux Mint / Ubuntu&#34;, by Angelos Kyritsis](https://www.pcsteps.com/4434-add-right-click-commands-linux-mint-ubuntu/)
2. [Sample Nemo right-click menu action file from /usr/share/nemo/actions/sample.nemo_action](https://github.com/linuxmint/nemo/blob/master/files/usr/share/nemo/actions/sample.nemo_action)

---

# ubuntu shortcuts, nautilus shortcuts

```
https://help.ubuntu.com/stable/ubuntu-help/shell-keyboard-shortcuts.html.en
https://keycombiner.com/collections/nautilus/
http://www.fifi.org/doc/gnome-users-guide/html/gnome-users-guide/C/shortcuts.html
```

## change Nautilus shortcuts

1. Change the configuration to allow to change the shortcuts, either from command line:

* `gsettings set org.gnome.desktop.interface can-change-accels true`

*   or alternatively by using graphical interface of  `dconf-editor` to change this option.

2. Open Nautilus without global menu by `UBUNTU_MENUPROXY=0 nautilus` and highlight the menu item whose key binding you want to change, either with your mouse or via the keyboard, and press the key(s) you want to use as the shortcut.

3. After you finished with it, change back `can-change-accels` to false.


```
$ gsettings get org.gnome.desktop.interface can-change-accels
false
$ gsettings set org.gnome.desktop.interface can-change-accels true
$ nautilus -q
$ UBUNTU_MENUPROXY=0 nautilus
$ gsettings set org.gnome.desktop.interface can-change-accels false

$ gsettings get org.gnome.Terminal.Legacy.Keybindings:/org/gnome/terminal/legacy/keybindings/ next-tab
'<Control>Page_Down'

$ gsettings get org.gnome.Terminal.Legacy.Keybindings:/org/gnome/terminal/legacy/keybindings/ prev-tab
'<Control>Page_Up'

$ gsettings list-recursively | grep --ignore-case nautilus
```

添加 `~/.config/nautilus/accels`， 无效，据说Ubuntu 14.04 and up可用

```
(gtk_accel_path "<Actions>/DirViewActions/OpenInTerminal" "F4")
```

添加 `~/.config/nautilus/accels`，也无效，据说Ubuntu 15.10 and 16.04可用

```
(gtk_accel_path "<Actions>/ExtensionsMenuGroup/TerminalNautilus:OpenFolderLocal" "F4")
```

早期的版本要 `sudo apt-get install dconf-tools nautilus-open-terminal`

下面方法适用 Ubuntu 18.10 GNOME Shell 3.30.1 以上

Since version 3.15.4 Nautilus doesn't load the accel file anymore [(Souece)](https://gitlab.gnome.org/GNOME/nautilus/blob/master/NEWS#L422)

Fortunatelly there's a better aproach in order to get what you want. Long explanation/useful resources can be found [here](https://help.ubuntu.com/community/NautilusScriptsHowto) and also [here](https://askubuntu.com/questions/680016/keyboard-shortcut-for-open-terminal-nautilus-3-16/696901#696901).
[参考1](https://github.com/echo-devim/nautilusaccelsmanager)
[参考2](https://gist.github.com/dreua/2e399ffcfb42c4b6932de73a5ad5f268#file-nautilus_terminal_shortcut-md)

In short:

1. Create a script called `Terminal` (yes, without a extension) inside the folder `~/.local/share/nautilus/scripts` with the following content:

```
#!/bin/sh
gnome-terminal
```

```
touch ~/.local/share/nautilus/scripts/Terminal
chmod +x ~/.local/share/nautilus/scripts/Terminal
gedit ~/.local/share/nautilus/scripts/Terminal
```

2. Make it executable, then close any Nautilus instance:

```
$ chmod +x Terminal
$ nautilus -q
```

3. Create (or edit) the `~/.config/nautilus/scripts-accels` file adding these lines:

```
F4 Terminal
; Commented lines must have a space after the semicolon
; Examples of other key combinations:
; <Control>F12 Terminal
; <Alt>F12 Terminal
; <Shift>F12 Terminal
```

4. Test it! Open Nautilus, right click, and choose Scripts > Terminal. Or, use the keyboard shortcut that you've just configured :)

改进的脚本，没有再实验下去，前面的已经达到我的目的

Changed `~/.local/share/nautilus/scripts/Terminal` script to:

```
#! /bin/sh
export F=$@
gnome-terminal
```

And added to `~/.bashrc`:

```
if [ -n "$F" ]; then 
	# F is set (i.e. this was called from Nautilus and my special script)
	echo "\$F is set to $F"
fi
```

Another Change for spaces and multiple arguments:

Script:

```
#!/bin/sh
# Sadly it's not possible to properly "export" an array,
# so we use a newline as delimiter. Expect this to break if you have
# newline characters in your paths. (Yes, this is possible in linux
# but not recommended.)

# join function https://stackoverflow.com/a/17841619/4529404
function join_by { local IFS="$1"; shift; echo "$*"; }
export F=$(join_by $'\n' "$@")
gnome-terminal
```

.bashrc:

```
if [ -n "$F" ]; then 
	# F is set (i.e. this was called from Nautilus and my special script)
	#printf "%s" "$IFS" | od -bc
	IFS=$'\n' read -rd '' -a y <<<"$F" # split at \n
	#printf "%s" "$IFS" | od -bc
	# I checked it: IFS is changed only for one command
	if [ ${#y[@]} = 1 ] ; then
		export F=${y[0]}
		set -- "$F"
		echo "\$F and \$@ are set to $F"
		if [[ -f $F && -x "$F" ]]; then
			echo "File '$F' is executable. Run f to execute it."
			function f() {
				./$F
			}
		fi
	else
		export F="" # can not export arrays :/
		set -- "${y[@]}"
		echo "\$@ consists of ${#y[@]} entries:"
	
		for i in "$@"; do
			echo " - " $i
		done
		echo "Use via 'command \"\$@\"'"
	fi
fi
```

---

# mate-desktop

```
$ sudo apt update
$ sudo apt install mate-session-manager gdm3
$ sudo apt install tasksel
$ sudo tasksel install mate-desktop
$ sudo systemctl get-default 
graphical.target
//$ sudo systemctl set-default graphical.targets
```

---

# cinnamon

Installing Cinnamon Desktop on Ubuntu 20.04 and Above

```
//sudo add-apt-repository universe # 默认就应该有
//sudo apt update
sudo apt install cinnamon-desktop-environment task-cinnamon-desktop nemo-python
sudo tasksel install cinnamon-desktop
sudo reboot
screenfetch
```

如果要删除

```
sudo apt purge cinnamon-desktop-environment
sudo apt autoremove
```

ref:

```
sudo add-apt-repository ppa:linuxmint-daily-build-team/daily-builds
sudo apt update
sudo apt install cinnamon nemo-python

sudo apt remove cinnamon nemo-python
sudo add-apt-repository -r ppa:linuxmint-daily-build-team/daily-builds
```

---

# add “open in terminal” to the right-click mouse menu for caja

Installing caja-open-terminal via :

```
sudo apt-get install caja-open-terminal caja-actions caja-actions-common
```

change `mate-terminal` to `lxterminal`：
[https://github.com/mate-desktop/caja-extensions/issues/31](https://github.com/mate-desktop/caja-extensions/issues/31)

## 可以配置F4快捷键打开terminal

方法1
在 `gedit ~/.config/caja/accels` 添加

```
(gtk_accel_path "<Actions>/ExtensionsMenuGroup/CajaOpenTerminal::open_terminal" "F4")
```

```
$ gsettings get org.mate.caja-open-terminal desktop-opens-home-dir
false
$ gsettings set org.mate.caja-open-terminal desktop-opens-home-dir true

$ gsettings get org.mate.applications-terminal exec
'mate-terminal'
$ gsettings get org.mate.applications-terminal exec-arg
'-x'
想换terminal，就改这个好了
```

方法2

```
touch ~/.config/caja/scripts/open-terminal-here
chmod +x ~/.config/caja/scripts/open-terminal-here
gedit ~/.config/caja/scripts/open-terminal-here
```

内容

```
#!/bin/sh
#
# This script opens a gnome-terminal in the current directory.
#
# Distributed under the terms of GNU GPL version 2 or later
#
# Original author: Keith Conger <acid@twcny.rr.com>
#
# Sourced from
# https://forums.linuxmint.com/viewtopic.php?p=773382&sid=9939ce160bd97313f849367231eb721a#p773382
# http://g-scripts.sourceforge.net/nautilus-scripts/Execute/Open%20terminal/terminal-here
#
# Put this file in your ~/.config/caja/scripts/ directory.
# You need to have caja-actions installed to use scripts.

cd $CAJA_SCRIPT_CURRENT_URI
exec lxterminal
```

在 `gedit ~/.config/caja/accels` 添加

```
(gtk_accel_path "<Actions>/ScriptsGroup/script_file:\\s\\s\\shome\\sandy\\s.config\\scaja\\sscripts\\sopen-terminal-here" "F4")
```

After type in terminal

```
caja -q
```

ref：

```
Is there a way to configure the Caja open-in-terminal extension to open the user's preferred terminal rather than mate-terminal?
Not specifically for CAJA, but it honors the general setting that you can change:
from the menu: System => Preferences =>Personal => Preferred Applications => System => Terminal Emulator.
from the Control Center: (either type mate-control-center or from the menu: System =>Control Center) in the Personal group.

Alt+F2 and command mate-terminal
find $HOME ! -user $USER -type f
sudo chmod 755 -R ~/.cache
sudo chown $USER:$USER -R /home/$USER/.cache

Change terminal when using open terminal here
gsettings get org.gnome.desktop.default-applications.terminal exec
gsettings set org.gnome.desktop.default-applications.terminal exec /usr/bin/mate-terminal
gsettings set org.gnome.desktop.default-applications.terminal exec-arg "-x"

You could either find our how to change Xfce’s default terminal (exo-open is Xfce’s command to open the default program) or just change it to

mate-terminal --working-directory=%f
```

---

# gtk-update-icon-cache

```
//sudo touch /usr/share/icons/hicolor ~/.local/share/icons/hicolor
//sudo gtk-update-icon-cache

也可以把这玩意删了
mv ~/.local/share/icons/hicolor/icon-theme.cache ~/.local/share/icons/hicolor/icon-theme.cache.bk
```

---

# Cinnamon menu ("start") bar

```
$ gsettings get org.cinnamon favorite-apps
['opera.desktop', 'cinnamon-settings.desktop', 'pidgin.desktop', 'org.gnome.Terminal.desktop', 'nemo.desktop']
$ dconf-editor # 编辑就可以
$ dconf list /
$ dconf list /org/
$ dconf read /org/cinnamon/favorite-apps 
['opera.desktop', 'cinnamon-settings.desktop', 'pidgin.desktop', 'org.gnome.Terminal.desktop', 'nemo.desktop']
//$ dconf write /org/cinnamon/favorite-apps "['opera.desktop', 'cinnamon-settings.desktop', 'pidgin.desktop', 'org.gnome.Terminal.desktop', 'nemo.desktop']"
~/.config/dconf/user
man dconf
The database is typically located in $XDG_CONFIG_HOME/dconf (i.e., ~/.config/dconf by default)，The files in /etc/dconf are for affecting settings system-wide though
```

It's ok to save all donf settings like this :

```
dconf dump / > dconf-settings.ini
```

But you have to restore them like that ! :

```
dconf load / < dconf-settings.ini
```

or

```
cat dconf-settings.ini | dconf load /
```

find files last modified less than 5 minutes

```
find ~/.[!.]* -mmin -5
```

---

# Customize keyboard shortcuts in Cinnamon Desktop Environment

[How to add custom keybindings with gsettings](https://community.linuxmint.com/tutorial/view/1171)

[https://wiki.archlinux.org/title/cinnamon](https://wiki.archlinux.org/title/cinnamon)

```
备份
$ dconf dump /org/cinnamon/desktop/keybindings/ > dconf-settings.conf
载入
$ dconf load /org/cinnamon/desktop/keybindings/ < dconf-settings.conf

$ dconf-editor

$ gsettings get org.cinnamon.desktop.keybindings.media-keys terminal
['<Primary><Alt>t']
其实默认的ctrl+alt+t挺好的，通用
//$ gsettings set org.cinnamon.desktop.keybindings.media-keys terminal "['<Super>t']"
or
$ cinnamon-settings keyboard
start menu ==> keyboard ==> shortcuts ==> Launchers ==> Launch terminal ==> Keyboard bindings, 输入按键组合就更新了。
```

---

# 提取已安装的软件并重新打包

##方法1，手动重打包

```
/var/lib/dpkg/info  # 旧版本在/usr/lib/dpkg-db/info
这个目录里面保留了安装包的"conffiles", “md5sums”, “postinst”, "prerm"四个文件，以及一个list文件
DEBIAN文件夹内也是这四个文件加上额外的control文件

control文件，则都被保存到了/var/lib/dpkg/status(旧版本在/usr/lib/dpkg-db/status)这个文本文件中
这样手动提取
//释放安装内容
//dpkg -X mingw-w64-binutils_2.36.1-1_amd64.deb extract
//释放控制信息
//dpkg -e mingw-w64-binutils_2.36.1-1_amd64.deb extract/DEBIAN/
重新打包到build目录
dpkg-deb -b extract/ build/

Use folowing steps to repackage dep package:
1: Extract deb package
# dpkg-deb -x <package.deb> <dir>
2: Extract control-information from a package
# dpkg-deb -e <package.deb> <dir/DEBIAN>
3. After completed to make changes to the package, repack the deb
# dpkg-deb -b <dir> <new-package.deb>
```

##方法2，用 dpkg-repack

```
sudo apt install dpkg-repack
fakeroot -u dpkg-repack xed
```

这样xed仅control相比原始deb添加了一个dpkg-repack说明而已

```
sudo dpkg -i <package-name>
# install the dependencies
sudo apt-get -f install
```

We can print the dependencies on the main server running the original software

```
apt-cache depends Package_name |awk '{print $2}'
```

You can create a script to automate the dependency installation :

```
package=package
dpkg-repack $(apt-cache depends --false-suggests $package |awk '{print $2}') $package
```

However, dpkg-repack utility will not copy your custom settings. dpkg-repack is helpful to get the original deb file we used on our main server. That is helpful in a certain scenario where an exact copy of the settings is not desired.

## 方法3，用 apt-clone

apt-clone is another utility which copies all the settings and create a debian installation file :

```
sudo apt-get install apt-clone
```

打包

```
//apt-clone clone xed --with-dpkg-repack
apt-clone clone xed
```

恢复

```
sudo apt-get install apt-clone
sudo apt-clone restore xed.apt-clone.tar.gz
```

---

# Change the number of the partition from sdx1 to sdx2

保存分区表 backup the disk partition table

```
# sfdisk --dump /dev/sdx > sdx.bkp
# cp sdx.bkp sdx.new 
```

编辑分区表

from

```
# partition table of /dev/sdx
unit: sectors

/dev/sdx1 : start=  1026048, size=975747120, Id=83
/dev/sdx2 : start=     2048, size=   204800, Id=83
/dev/sdx3 : start=   206848, size=   819200, Id= b
/dev/sdx4 : start=        0, size=        0, Id= 0
```

to

```
# partition table of /dev/sdx
unit: sectors

/dev/sdx1 : start=     2048, size=   204800, Id=83
/dev/sdx2 : start=   206848, size=   819200, Id= b
/dev/sdx3 : start=  1026048, size=975747120, Id=83
/dev/sdx4 : start=        0, size=        0, Id= 0
```

throw it back to the disk partition table (carefull)

```
# sfdisk /dev/sdx < sdx.new
```

If the last command does not work, change it for

```
# sfdisk --no-reread --force /dev/sdx < sdx.new
```

---

# ltspice-mod(不如直接wine的)

PKGBUILD

```
# Maintainer: Jan-Henrik Bruhn <aur@jhbruhn.de>

pkgname=ltspice
pkgver=17.0.18.0
pkgrel=1
pkgdesc="SPICE simulator, schematic capture and waveform viewer of electronic circuits."
arch=('amd64')
url="http://www.linear.com/designtools/software/"
license=('custom')
depends=('wine')
makedepends=('git')
source=("$pkgname::git+https://github.com/jhbruhn/$pkgname#branch=${pkgver//_/-}"
        "$pkgname.sh"
        "$pkgname-help.sh")
sha256sums=('SKIP'
            'SKIP'
            'SKIP')

package()
{
    cd "$pkgname"

    # Install License
    install -Dm644 License.txt "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
    #rm License.txt

    # Install docs to /usr/share/doc/
    install -Dm644 LTspiceHelp.chm "${pkgdir}/usr/share/doc/${pkgname}/ltspice.chm"

    # Install binary files to /usr/share
    install -m755 -d "$pkgdir/usr/share/$pkgname"
    cp -r * "$pkgdir/usr/share/$pkgname"
    #chmod 755 -R "$pkgdir/usr/share/$pkgname"

    #Install /usr/bin startscript
    install -Dm755 "$srcdir/$pkgname.sh" "$pkgdir/usr/bin/$pkgname"
    install -Dm755 "$srcdir/$pkgname-help.sh" "$pkgdir/usr/bin/$pkgname-help"
}
```

ltspice.sh

```
#!/bin/sh
if [ ! -d "$HOME"/.wine ] ; then
   mkdir -p "$HOME"/.wine
   touch "$HOME"/.wine/LTspiceXVII.ini
fi
export WINEPREFIX=$HOME/.wine
wine /usr/share/ltspice/XVIIx64.exe -ini "$HOME"/.wine/LTspiceXVII.ini "$@"
```

ltspice-help.sh

```
#!/bin/sh
export WINEPREFIX=$HOME/.wine
wine hh /usr/share/doc/ltspice/ltspice.chm "$@"
```

---

# ubuntukylin 有一些有趣的deb包

[https://archive.ubuntukylin.com/ubuntukylin/pool/partner/](https://archive.ubuntukylin.com/ubuntukylin/pool/partner/)

[http://mirrors.163.com/ubuntukylin/pool/partner/](http://mirrors.163.com/ubuntukylin/pool/partner/)
可以下载dingtalk，xunlei，weixin什么的deb包

```
源添加
deb http://archive.ubuntukylin.com/ubuntukylin jammy-partner main
deb http://archive.ubuntukylin.com/ubuntukylin jammy main
添加公钥
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys D259B7555E1D3C58
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 9C949F2093F565FF
sudo add-apt-repository ppa:ubuntukylin-members/ubuntukylin
sudo apt update
sudo add-apt-repository -r ppa:ubuntukylin-members/ubuntukylin
```

or for 22.04

```
wget https://archive.ubuntukylin.com/ubuntukylin/pool/main/k/kylin-software-keyring/kylin-software-keyring_2022.03.30_all.deb
sudo dpkg -i kylin-software-keyring_2022.03.30_all.deb

还要添加源
deb http://archive.ubuntukylin.com/ubuntukylin jammy main
```

```
$ sudo apt install ubuntu-kylin-software-center 

The following additional packages will be installed:
  apt-xapian-index language-pack-zh-hans language-pack-zh-hans-base python3-piston-mini-client python3-xapian ubuntukylin-keyring
Suggested packages:
  xapian-doc

```

```
$ sudo apt install kylin-software-center
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following package was automatically installed and is no longer required:
  python3-piston-mini-client
Use 'sudo apt autoremove' to remove it.
The following additional packages will be installed:
  wmctrl
The following packages will be REMOVED:
  ubuntu-kylin-software-center

```

```
sudo apt install libukui-log4qt1
sudo aptitude install kylin-camera
The following NEW packages will be installed:
  kwayland-data{a} kwayland-integration{a} kylin-camera kylincameralibs{a} libfaac0{a} libgpac11{a} libkf5guiaddons-bin{a} libkf5guiaddons-data{a} libkf5guiaddons5{a} libkf5idletime5{a} 
  libkf5waylandclient5{a} libkf5windowsystem-data{a} libkf5windowsystem5{a} libqt5waylandclient5{a} libqt5waylandcompositor5{a} qtwayland5{a} 

```

```
sudo apt install com.xunlei.download com.alibabainc.dingtalk indicator-china-weather skypeforlinux xmind-vana
//sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys  1F3045A5DF7587C3
sudo rm /etc/apt/sources.list.d/skype-stable.list
//sudo rm /etc/apt/trusted.gpg
sudo apt-key del 1F3045A5DF7587C3
or
删掉
deb [arch=amd64] https://repo.skype.com/deb stable main
```

```
$ sudo apt install kylin-burner 
The following additional packages will be installed:
  cdrskin libgsettings-qt-dev libiso9660-11 libvcdinfo0 vcdimager
Suggested packages:
  xorriso

```

```
sudo apt-get install kylin-kwre-wechat # (not work) 不如直接wine或者crossover安装个呢
```

---

# ynote youdao-dict

```
ynote youdao-dict 
```

都大量报错，设置环境变量也不成，python版本问题吧，懒得处理了。目前环境只有3.10版本

```
$ youdao-dict
...
Load "youdao" plugin error: setX(self, int): argument 1 has unexpected type 'float'
Traceback (most recent call last):
  File "/usr/share/youdao-dict/dae/plugins.py", line 81, in load
    assets.pluginobjects += self.get_plugin_object(plugin_name)
  File "/usr/share/youdao-dict/dae/plugins.py", line 72, in get_plugin_object
    for obj in plugin.export_objects():
  File "/usr/share/youdao-dict/app/plugins/youdao/__init__.py", line 64, in export_objects
    splash_window.showCenter()
  File "/usr/share/youdao-dict/app/plugins/youdao/window.py", line 290, in showCenter
    self.setX(x)
TypeError: setX(self, int): argument 1 has unexpected type 'float'
```

patch

```
--- a/src/app/plugins/youdao/window.py	2022-01-24 00:21:08.317867190 +0800
+++ b/src/app/plugins/youdao/window.py	2022-01-24 00:22:33.509467326 +0800
@@ -287,8 +287,8 @@
         geometry = desktop.screenGeometry(desktop.primaryScreen())
         x = geometry.x() + (geometry.width() - self.width())/2
         y = geometry.y() + (geometry.height() - self.height())/2
-        self.setX(x)
-        self.setY(y)
+        self.setX(int(x))
+        self.setY(int(y))
         self.show()
 
     @QtCore.pyqtSlot()
--- a/src/dae/window.py	2022-01-24 00:21:08.301200209 +0800
+++ b/src/dae/window.py	2022-01-24 00:21:44.845222361 +0800
@@ -641,5 +641,5 @@
         geometry = screen.availableGeometry()
         x = geometry.x() + (geometry.width() - self.width())/2
         y = geometry.y() + (geometry.height() - self.height())/2
-        self.move(x, y)
+        self.move(int(x), int(y))
         self.show()
```

```
sudo gedit /usr/share/youdao-dict/dae/window.py
sudo gedit /usr/share/youdao-dict/app/plugins/youdao/window.py
```

就好了

ynote报错

```
gpu_data_manager_impl_private.cc(445)] GPU process isn't usable. Goodbye.
```

运行时候加--no-sandbox就ok了

```
ynote-desktop --no-sandbox
```

---

# uget

```
sudo apt install uget
```

---

# vlc

```
sudo apt install vlc vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2 vlc-plugin-video-splitter vlc-plugin-visualization

The following additional packages will be installed:
  libcddb2 libdvbpsi10 libebml5 libixml10 libmatroska7 libopenmpt-modplug1 libprotobuf-lite23 libproxy-tools libresid-builder0c2a libsidplay2 libspatialaudio0 libupnp13 libvlc-bin libvlc5
  libvlccore9 libxcb-composite0 vlc-bin vlc-data vlc-l10n vlc-plugin-access-extra vlc-plugin-base vlc-plugin-video-output
Suggested packages:
  vlc-plugin-fluidsynth vlc-plugin-jack vlc-plugin-svg libdvdcss2
```

---

# qqmusic启动失败

```
[76516:0620/164308.168641:FATAL:gpu_data_manager_impl_private.cc(1034)] The display compositor is frequently crashing. Goodbye.
```

Electron 在新的GPU驱动上使用有这个问题，启动时加上 --no-sandbox 参数就好了

```
qqmusic --no-sandbox

```

---

# crossover

```
sh -c "apt-get update --allow-releaseinfo-change-Suite; echo -n Waiting for the dpkg lock; while fuser /var/lib/dpkg/lock /var/lib/dpkg/lock-frontend /var/run/unattended-upgrades.lock >/dev/null 2>&1; do echo -n .; sleep 1; done; DEBIAN_FRONTEND=noninteractive; export DEBIAN_FRONTEND; apt-get install -y gstreamer1.0-plugins-good:i386 gstreamer1.0-plugins-ugly:i386 libnss-mdns:i386 libvulkan1:i386"

The following additional packages will be installed:
  glib-networking:i386 gstreamer1.0-x:i386 liba52-0.7.4:i386 libaa1:i386
  libavc1394-0:i386 libcaca0:i386 libcdio19:i386 libdv4:i386 libdvdread8:i386
  libgstreamer-plugins-good1.0-0:i386 libiec61883-0:i386 libmp3lame0:i386
  libmpeg2-4:i386 libmpg123-0:i386 libncurses6:i386 libncursesw6:i386
  libopencore-amrnb0:i386 libopencore-amrwb0:i386 libproxy1v5:i386
  libraw1394-11:i386 libshout3:i386 libsidplay1v5:i386 libslang2:i386
  libsoup2.4-1:i386 libspeex1:i386 libtag1v5:i386 libtag1v5-vanilla:i386
  libtwolame0:i386 libvpx7:i386 libwavpack1:i386 libx264-163:i386 libxv1:i386
  mesa-vulkan-drivers:i386
Suggested packages:
  libdv-bin:i386 libdvdcss2:i386 avahi-autoipd:i386 | zeroconf:i386
  libraw1394-doc:i386 sidplay-base:i386 speex:i386

```

---

# playonlinux(弃用)

```
$ sudo apt-get install playonlinux 
The following additional packages will be installed:
  icoutils jq libjq1 libonig5 python3-natsort python3-wxgtk4.0
Suggested packages:
  libterm-readline-gnu-perl | libterm-readline-perl-perl winbind
  python-natsort-doc wx3.0-doc
$ sudo apt-get purge playonlinux
$ sudo apt autoremove
```

---

# iptux 降级

```
sudo apt-get install git libgtk2.0-dev libglib2.0-dev libgstreamer1.0-dev libjsoncpp-dev g++ make cmake
用0.7.6版本编译
```

```
$ sudo make install
[ 64%] Built target iptux
[ 72%] Built target libiptux_test
[ 76%] Built target iptuxbin
[100%] Built target translations_1
Install the project...
-- Install configuration: ""
-- Installing: /usr/local/bin/iptux
-- Up-to-date: /usr/local/share/locale/de/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/en_GB/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/es/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/fr/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/gl/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/it/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/lb/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/pl/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/pt_BR/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/ru/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/zh_CN/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/locale/zh_TW/LC_MESSAGES/iptux.mo
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-dog.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-daemon.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-rabbit.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-cow.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-penguin.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-scream.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-konqui.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-ghost.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-teddybear.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-blowfish.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-frog.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-tux.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-qq.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-monkey.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-elephant.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-pig.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-turtle.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-bug.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/icon/icon-lion.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/menu
-- Up-to-date: /usr/local/share/iptux/pixmaps/menu/menu-board.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/menu/menu-share.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/menu/menu-group.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/menu/menu-detect.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-hide.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-send.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-error.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-finish.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-recv.png
-- Up-to-date: /usr/local/share/iptux/pixmaps/tip/tip-show.png
-- Up-to-date: /usr/local/share/iptux/sound/msg.ogg
-- Up-to-date: /usr/local/share/iptux/sound/trans.ogg
-- Up-to-date: /usr/local/share/applications/iptux.desktop
-- Up-to-date: /usr/local/share/icons/hicolor
-- Up-to-date: /usr/local/share/icons/hicolor/32x32
-- Up-to-date: /usr/local/share/icons/hicolor/32x32/apps
-- Up-to-date: /usr/local/share/icons/hicolor/32x32/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/32x32/apps/iptux.png
-- Up-to-date: /usr/local/share/icons/hicolor/48x48
-- Up-to-date: /usr/local/share/icons/hicolor/48x48/apps
-- Up-to-date: /usr/local/share/icons/hicolor/48x48/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/48x48/apps/iptux.png
-- Up-to-date: /usr/local/share/icons/hicolor/22x22
-- Up-to-date: /usr/local/share/icons/hicolor/22x22/apps
-- Up-to-date: /usr/local/share/icons/hicolor/22x22/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/22x22/apps/iptux.png
-- Up-to-date: /usr/local/share/icons/hicolor/24x24
-- Up-to-date: /usr/local/share/icons/hicolor/24x24/apps
-- Up-to-date: /usr/local/share/icons/hicolor/24x24/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/24x24/apps/iptux.png
-- Up-to-date: /usr/local/share/icons/hicolor/16x16
-- Up-to-date: /usr/local/share/icons/hicolor/16x16/apps
-- Up-to-date: /usr/local/share/icons/hicolor/16x16/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/16x16/apps/iptux.png
-- Up-to-date: /usr/local/share/icons/hicolor/64x64
-- Up-to-date: /usr/local/share/icons/hicolor/64x64/apps
-- Up-to-date: /usr/local/share/icons/hicolor/64x64/apps/iptux-i.png
-- Up-to-date: /usr/local/share/icons/hicolor/64x64/apps/iptux.png

```

## PKGBUILD

[https://wiki.archlinux.org/title/CMake_package_guidelines](https://wiki.archlinux.org/title/CMake_package_guidelines)

```
# Maintainer: andreas <yxgi5@163.com>

pkgname=iptux
pkgver=0.7.6
pkgrel=1
pkgdesc='LAN messenger and file sender, an IP Messenger client'
arch=('x86_64')
url='https://github.com/iptux-src/iptux/'
license=('GPL2')
depends=('libgoogle-glog0v5' 'libjsoncpp25' 'libgtk-3-0' 'libglib2.0-0' 'libgdk-pixbuf-2.0-0' 'libgcc-s1' 'libc6' 'libpango-1.0-0' 'libsigc++-2.0-0v5' 'libstdc++6')
source=("iptux-0.7.6.tar.gz"
        "googletest-release-1.8.0.tar.gz") # https://github.com/google/googletest/archive/release-1.8.0.tar.gz
sha256sums=('SKIP'
            'SKIP')


build()
{
    cd "${srcdir}/${pkgname}-${pkgver}"
    #[[ -d build ]] && rm -r build
    mkdir -p build
    mkdir -p build/src/googletest-download/googletest-prefix/src/
    cp "$srcdir/googletest-release-1.8.0.tar.gz" build/src/googletest-download/googletest-prefix/src/release-1.8.0.tar.gz
    #cd build
    #cmake .. && make

    cd "${srcdir}"
    cmake -B build -S "$pkgname-$pkgver" \
        -DCMAKE_BUILD_TYPE='None' \
        -DCMAKE_INSTALL_PREFIX='/usr' \
        -Wno-dev
    cmake --build build
}

check()
{
    ctest --test-dir build --output-on-failure
}

package()
{
    DESTDIR="$pkgdir" cmake --install build
}


```

---

# netease-cloud-music

[https://blog.csdn.net/leibris/article/details/124895824](https://blog.csdn.net/leibris/article/details/124895824)

```
$ sudo dpkg -i netease-cloud-music_1.2.1_amd64_ubuntu_20190428.deb

$ netease-cloud-music 
/opt/netease/netease-cloud-music/netease-cloud-music: /opt/netease/netease-cloud-music/libs/libselinux.so.1: no version information available (required by /lib/x86_64-linux-gnu/libgio-2.0.so.0)
/opt/netease/netease-cloud-music/netease-cloud-music: symbol lookup error: /lib/x86_64-linux-gnu/libgio-2.0.so.0: undefined symbol: g_module_open_full


```

```
sudo apt install libssl-dev \
    libxdo-dev libxtst-dev libx11-dev \
    libxkbcommon-dev libwxgtk3.0-gtk3-dev libdbus-1-dev \
    wget git file build-essential pkg-config
sudo apt install libqt5webchannel5
```

```
sudo cp /opt/netease/netease-cloud-music/netease-cloud-music.bash /opt/netease/netease-cloud-music/netease-cloud-music.bash.bk
sudo gedit /opt/netease/netease-cloud-music/netease-cloud-music.bash
```

```
#!/bin/sh
HERE="$(dirname "$(readlink -f "${0}")")"
export LD_LIBRARY_PATH="${HERE}"/libs:$LD_LIBRARY_PATH
export QT_PLUGIN_PATH="${HERE}"/plugins
export QT_QPA_PLATFORM_PLUGIN_PATH="${HERE}"/plugins/platforms
cd /lib/x86_64-linux-gnu/
exec "${HERE}"/netease-cloud-music $@
```

好了

---

# winetricks更新、加速

## winetricks要尽量更新

```
su
export https_proxy="127.0.0.1:8118"
export http_proxy="127.0.0.1:8118"
winetricks --self-update

实际上会备份并
sudo chmod -x /usr/bin/winetricks.bak
```

最好安装winbind

```
$ sudo apt install winbind 
Suggested packages:
  libnss-winbind libpam-winbind
The following NEW packages will be installed:
  winbind
```

## winetricks安装组建

实际上维护x64的arch就够了

```
export https_proxy="127.0.0.1:8118"
export http_proxy="127.0.0.1:8118"
rm ~/.wine_x86/ -rf
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winecfg
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks --gui
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks --help

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks allfonts # 特别是wenquanyi，opensymbol什么的
//env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks cjkfonts
//env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks pptfonts
//env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks fakechinese fakejapanese fakekorean
//env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks --force fakejapanese_vlgothic
思源字体要单独补
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 wine sourcescfont3.exe # 暂时放到sourcehansans里

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q corefonts # 至少需要安装的字体
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun6 # 包括了msvcirt mfc42
//env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q dotnet11sp1 # 不安装这个额。包括了dotnet11 与 dotnet20 dotnet20sp1 dotnet20sp2 冲突
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q dotnet20sp2 # if failed，update winetricks, 没有必要安装 dotnet20 dotnet20sp1
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q dotnet35sp1 # 没有必要安装dotnet35, dotnet30sp1, dotnet30

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q dotnet48 # 没有必要安装dotnet40 dotnet40_kb2468871

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks list-all | grep msxml3
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q msxml3
$ find ~/.cache/winetricks -type f -name "InstMsiW.exe"
/home/andy/.cache/winetricks/msls31/InstMsiW.exe
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q msls31

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q ie8

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q riched30 riched20

env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vb6run
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun6sp6 # with fixes in ATL and MFC
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2003
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2005
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2008
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2010
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2012
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2013
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q vcrun2015
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q gdiplus
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q secur32
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q mfc40
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q cmd
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q comctl32
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win32 WINEPREFIX=$HOME/.wine_x86 winetricks -q comctl32ocx
```

tips

```
~/.cache/winetricks/
wine winecfg -v win7
wine winecfg -v winxp
wine C:\\windows\\command\\start.exe /Unix /home/...
env WINEPREFIX="/home/pc/.wine" wine C:\\windows\\command\\start.exe /Unix /home/pc/.wine/dosdevices/c:/users/pc/AppData/Roaming/Microsoft/Windows/Start\ Menu/Programs/Tracker\ Software/PDF-XChange\ Editor.lnk Z:%U
strings filename.lnk

https://unix.stackexchange.com/questions/509360
It explains how to add a program to the Wine menu:
wine winemenubuilder /path/to/link.lnk

重启wine
wineboot

wineserver -k
```

## ie8

```
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=$HOME/.wine winecfg -v win7
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=$HOME/.wine winetricks -q -f ie8
To start ie8 (32-bit), from a terminal shell, use the command "wine" 'C:\Program Files (x86)\Internet Explorer\iexplore.exe'
To start ie8 (64-bit), from a terminal shell, use the command "wine" 'C:\Program Files\Internet Explorer\iexplore.exe'
如果不行就到winetricks里面删掉ie再更新一个版本咯

测试.lnk文件看是否能打开
env LC_ALL=zh_CN.UTF-8 LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX=$HOME/.wine wine start Notepad++.lnk
不行就放弃这次更改
```

## created .desktop files

```
scans your Wine drive for windows .lnk files
creates a Linux .desktop file for each .lnk file
creates a folder $HOME/.local/share/applications/wine
places all of the newly created .desktop files in there

```

```
find $HOME/.wine -name '*.lnk' -type f -exec bash -c 'wine winemenubuilder "$0"' {} \;
```

---

# 安装feeluown及插件

## 准备工作参考官方文档

[https://feeluown.readthedocs.io/en/latest/quickstart.html#id2](https://feeluown.readthedocs.io/en/latest/quickstart.html#id2)

```
# 安装 Python 3 和 pip3（大部分系统已经安装好了）
sudo apt-get install python3 python3-pip

# 安装 libmpv1
sudo apt-get install libmpv1

# 安装 PyQt5
sudo apt-get install python3-pyqt5
sudo apt-get install python3-pyqt5.qtopengl
sudo apt-get install python3-pyqt5.qtsvg

# 安装 dbus-python
sudo apt-get install python3-dbus
sudo apt-get install python3-dbus.mainloop.pyqt5

# 安装 pyopengl 等（可以不安装，会自动依赖）
sudo -H pip3 install pyopengl pyqtwebengine

# （可能还需要安装）使用 fcitx 输入法的用户可能需要安装
sudo apt-get install fcitx-frontend-qt5

# netcat
sudo apt-get install netcat
```

## 安装feeluown及插件(3.8.8)

```
export https_proxy="127.0.0.1:8118"
export http_proxy="127.0.0.1:8118"
sudo -H pip3 install feeluown fuo-netease fuo-qqmusic fuo-kuwo fuo-xiami fuo-ytmusic fuo-bilibili --upgrade

Requirement already satisfied: feeluown in /usr/local/lib/python3.10/dist-packages (3.8.12)
Requirement already satisfied: fuo-local in /usr/local/lib/python3.10/dist-packages (0.3)
Requirement already satisfied: fuo-netease in /usr/local/lib/python3.10/dist-packages (0.9.6)
Requirement already satisfied: fuo-qqmusic in /usr/local/lib/python3.10/dist-packages (0.4.1)
Requirement already satisfied: fuo-kuwo in /usr/local/lib/python3.10/dist-packages (0.1.6)
Requirement already satisfied: fuo-xiami in /usr/local/lib/python3.10/dist-packages (0.2.4)
Requirement already satisfied: fuo-ytmusic in /usr/local/lib/python3.10/dist-packages (0.2.0)
Requirement already satisfied: fuo-bilibili in /usr/local/lib/python3.10/dist-packages (0.1.3)
Requirement already satisfied: tomlkit in /usr/local/lib/python3.10/dist-packages (from feeluown) (0.7.0)
Requirement already satisfied: qasync in /usr/local/lib/python3.10/dist-packages (from feeluown) (0.22.0)
Requirement already satisfied: packaging in /usr/lib/python3/dist-packages (from feeluown) (21.3)
Requirement already satisfied: mutagen>=1.37 in /usr/lib/python3/dist-packages (from feeluown) (1.45.1)
Requirement already satisfied: pydantic>=1.8.1 in /usr/local/lib/python3.10/dist-packages (from feeluown) (1.8.2)
Requirement already satisfied: requests in /usr/lib/python3/dist-packages (from feeluown) (2.25.1)
Requirement already satisfied: janus in /usr/local/lib/python3.10/dist-packages (from feeluown) (0.6.1)
Requirement already satisfied: fuzzywuzzy in /usr/local/lib/python3.10/dist-packages (from fuo-local) (0.18.0)
Requirement already satisfied: marshmallow>=3.0 in /usr/local/lib/python3.10/dist-packages (from fuo-local) (3.13.0)
Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.10/dist-packages (from fuo-netease) (4.9.3)
Requirement already satisfied: pycryptodome in /usr/local/lib/python3.10/dist-packages (from fuo-netease) (3.10.1)
Requirement already satisfied: pytube in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (15.0.0)
Requirement already satisfied: ytmusicapi in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (1.1.0)
Requirement already satisfied: cachetools in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (5.3.1)
Requirement already satisfied: aiohttp in /usr/local/lib/python3.10/dist-packages (from fuo-bilibili) (3.7.4.post0)
Requirement already satisfied: bilibili-api>=9.0.1 in /usr/local/lib/python3.10/dist-packages (from fuo-bilibili) (9.1.0)
Requirement already satisfied: brotli~=1.0.9 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (1.0.9)
Requirement already satisfied: lxml~=4.6.1 in /usr/local/lib/python3.10/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (4.6.5)
Requirement already satisfied: urllib3~=1.26.3 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (1.26.5)
Requirement already satisfied: colorama~=0.4.4 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (0.4.4)
Requirement already satisfied: pyyaml~=5.4.1 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (5.4.1)
Requirement already satisfied: chardet<5.0,>=2.0 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (4.0.0)
Requirement already satisfied: attrs>=17.3.0 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (21.2.0)
Requirement already satisfied: yarl<2.0,>=1.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (1.9.2)
Requirement already satisfied: multidict<7.0,>=4.5 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (6.0.4)
Requirement already satisfied: async-timeout<4.0,>=3.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (3.0.1)
Requirement already satisfied: typing-extensions>=3.6.5 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (3.10.0.2)
Requirement already satisfied: soupsieve>1.2 in /usr/lib/python3/dist-packages (from beautifulsoup4->fuo-netease) (2.3.1)
Requirement already satisfied: idna>=2.0 in /usr/lib/python3/dist-packages (from yarl<2.0,>=1.0->aiohttp->fuo-bilibili) (3.3)


sudo -H pip3 install feeluown==3.8.3 fuo-local fuo-netease fuo-qqmusic fuo-kuwo fuo-xiami fuo-ytmusic fuo-bilibili --upgrade
feeluown-3.8.3 fuo-netease-0.9.2 fuo-ytmusic-0.1.1


sudo -H pip3 install feeluown==3.8.1 fuo-local fuo-netease fuo-qqmusic fuo-kuwo fuo-xiami fuo-ytmusic fuo-bilibili --upgrade
feeluown-3.8.1 fuo-netease-0.8 fuo-netease-0.9.2


3.8.8 need fuo-local
Requirement already satisfied: feeluown==3.8.8 in /usr/local/lib/python3.10/dist-packages (3.8.8)
Requirement already satisfied: fuo-local in /usr/local/lib/python3.10/dist-packages (0.3)
Requirement already satisfied: fuo-netease in /usr/local/lib/python3.10/dist-packages (0.9.2)
Requirement already satisfied: fuo-qqmusic in /usr/local/lib/python3.10/dist-packages (0.4.1)
Requirement already satisfied: fuo-kuwo in /usr/local/lib/python3.10/dist-packages (0.1.6)
Requirement already satisfied: fuo-xiami in /usr/local/lib/python3.10/dist-packages (0.2.4)
Requirement already satisfied: fuo-ytmusic in /usr/local/lib/python3.10/dist-packages (0.1.1)
Requirement already satisfied: fuo-bilibili in /usr/local/lib/python3.10/dist-packages (0.1.3)
Requirement already satisfied: pydantic>=1.8.1 in /usr/local/lib/python3.10/dist-packages (from feeluown==3.8.8) (1.8.2)
Requirement already satisfied: janus in /usr/local/lib/python3.10/dist-packages (from feeluown==3.8.8) (0.6.1)
Requirement already satisfied: qasync in /usr/local/lib/python3.10/dist-packages (from feeluown==3.8.8) (0.22.0)
Requirement already satisfied: tomlkit in /usr/local/lib/python3.10/dist-packages (from feeluown==3.8.8) (0.7.0)
Requirement already satisfied: packaging in /usr/lib/python3/dist-packages (from feeluown==3.8.8) (21.3)
Requirement already satisfied: requests in /usr/lib/python3/dist-packages (from feeluown==3.8.8) (2.25.1)
Requirement already satisfied: mutagen>=1.37 in /usr/lib/python3/dist-packages (from fuo-local) (1.45.1)
Requirement already satisfied: fuzzywuzzy in /usr/local/lib/python3.10/dist-packages (from fuo-local) (0.18.0)
Requirement already satisfied: marshmallow>=3.0 in /usr/local/lib/python3.10/dist-packages (from fuo-local) (3.13.0)
Requirement already satisfied: beautifulsoup4 in /usr/local/lib/python3.10/dist-packages (from fuo-netease) (4.9.3)
Requirement already satisfied: pycryptodome in /usr/local/lib/python3.10/dist-packages (from fuo-netease) (3.10.1)
Requirement already satisfied: cachetools in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (5.3.1)
Requirement already satisfied: pytube in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (15.0.0)
Requirement already satisfied: ytmusicapi in /usr/local/lib/python3.10/dist-packages (from fuo-ytmusic) (1.1.0)
Requirement already satisfied: bilibili-api>=9.0.1 in /usr/local/lib/python3.10/dist-packages (from fuo-bilibili) (9.1.0)
Requirement already satisfied: aiohttp in /usr/local/lib/python3.10/dist-packages (from fuo-bilibili) (3.7.4.post0)
Requirement already satisfied: colorama~=0.4.4 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (0.4.4)
Requirement already satisfied: lxml~=4.6.1 in /usr/local/lib/python3.10/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (4.6.5)
Requirement already satisfied: brotli~=1.0.9 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (1.0.9)
Requirement already satisfied: urllib3~=1.26.3 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (1.26.5)
Requirement already satisfied: pyyaml~=5.4.1 in /usr/lib/python3/dist-packages (from bilibili-api>=9.0.1->fuo-bilibili) (5.4.1)
Requirement already satisfied: async-timeout<4.0,>=3.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (3.0.1)
Requirement already satisfied: attrs>=17.3.0 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (21.2.0)
Requirement already satisfied: multidict<7.0,>=4.5 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (6.0.4)
Requirement already satisfied: typing-extensions>=3.6.5 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (3.10.0.2)
Requirement already satisfied: chardet<5.0,>=2.0 in /usr/lib/python3/dist-packages (from aiohttp->fuo-bilibili) (4.0.0)
Requirement already satisfied: yarl<2.0,>=1.0 in /usr/local/lib/python3.10/dist-packages (from aiohttp->fuo-bilibili) (1.9.2)
Requirement already satisfied: soupsieve>1.2 in /usr/lib/python3/dist-packages (from beautifulsoup4->fuo-netease) (2.3.1)
Requirement already satisfied: idna>=2.0 in /usr/lib/python3/dist-packages (from yarl<2.0,>=1.0->aiohttp->fuo-bilibili) (3.3)


3.8.9 开始内嵌  fuo-local 识别曲名有缺陷，最好安装 3.8.8/3.8.3/3.8.1

sudo -H pip3 uninstall fuo-local
sudo -H pip3 install feeluown==3.8.10 fuo-netease fuo-qqmusic fuo-kuwo fuo-xiami fuo-ytmusic fuo-bilibili --upgrade

```

## 再安装一个下载插件(这个屌软件最有价值的就这个了，按理说和3.8.1配合最好)

```
git clone git@github.com:feeluown/feeluown-download.git
cd feeluown-download
sudo python3.8 setup.py build (实际上install就可以)
sudo python3.8 setup.py install
下载位置在~/.FeelUOwn/songs
```

```
// 普通用户模式安装（不采用）
pip3 install 'feeluown>=3.0[battery]' --upgrade --user
pip3 install pyopengl
```

## 如果出错

```
sudo -H pip3 uninstall pyopengl pyqt5 pyqtwebengine feeluown fuo-local fuo-netease fuo-qqmusic fuo-kuwo PyQt5-sip PyQt5-Qt5 PyQtWebEngine-Qt5 mutagen packaging janus requests pydantic tomlkit qasync fuzzywuzzy marshmallow pycryptodome beautifulsoup4 typing-extensions

sudo apt-get install --reinstall python3 python3-pip libmpv1 python3-pyqt5 python3-pyqt5.qtopengl python3-pyqt5.qtsvg python3-dbus python3-dbus.mainloop.pyqt5 fcitx-frontend-qt5 python3-pyqt5.sip pyqt5-dev-tools pyqt5-examples pyqt5-dev python3-pyqt5.qtmultimedia python3-pyqt5.qtquick python3-pyqt5.qtwebkit python3-opengl libqt6opengl6 libqt6opengl6-dev libqt6openglwidgets6 libqt5opengl5 libopengl0 libopengl0:i386 libopengl-perl libopengl-dev  qtwebengine5-dev qtwebengine5-doc python3-sip python3-pyqt6.sip

sudo -H pip3 install feeluown==3.8.1 fuo-local fuo-netease fuo-ytmusic --upgrade
sudo -H pip3 install feeluown==3.8.3 fuo-local fuo-netease fuo-ytmusic --upgrade

pip3 show xxx

pip3 list | grep feeluown

pip3 list | grep fuo

feeluown -d

```

## 试安装是否成功

```
feeluown -h
```

## 生成桌面图标

```
feeluown-genicon
```

直接双击桌面 FeelUOwn 图标，这时启动 GUI/Daemon 混合模式

## Daemon 模式

```
feeluown -nw    # 使用 Daemon 模式启动 feeluown


fuo status  # 查看播放器状态
fuo search 周杰伦  # 搜索歌曲
fuo play fuo://netease/songs/470302665
fuo pause
fuo resume

nc localhost 23333  # 使用netcat连接Daemon
# 输入 `status` 命令，可以查看播放器状态
# 输入 `fuo play fuo://netease/songs/470302665` 可以播放音乐
```

##开启调试模式

```
feeluown -d
```

## 配置文件

[https://feeluown.readthedocs.io/en/stable/fuorc.html](https://feeluown.readthedocs.io/en/stable/fuorc.html)

In `~/.fuorc`

```
import os


# 自定义配置
#config.THEME = 'dark'
config.COLLECTIONS_DIR = '~/.FeelUOwn/songs'
config.AUDIO_SELECT_POLICY = '>>>'


# 一个小功能：切换歌曲时，发送系统通知
def notify_song_changed(song):
    if song is not None:
        title = song.title_display
        artists_name = song.artists_name_display
        song_str = f'{title}-{artists_name}'
        os.system(f'notify-send "{song_str}"')

when('app.playlist.song_changed', notify_song_changed)

# 让编辑器识别这是一个 Python 文件
#
# Local Variables:
# mode: python
# End:
#
# vim: ft=python

# config.ytmusic.HTTP_PROXY='http://127.0.0.1:8118' # 报错了

def load_plugin_rcfiles(plugin):
    if plugin.name == 'fuo_local':
        config.fuo_local.MUSIC_FOLDERS = [os.path.expanduser('~') + '/Music']
        #config.fuo_local.MUSIC_FOLDERS = [os.path.expanduser('~') + '/Music', '/home/andy/.FeelUOwn/songs']
        config.fuo_local.MUSIC_FORMATS = ['mp3', 'ogg', 'wma', 'm4a', 'm4v', 'mp4', 'flac']

when('app.plugin_mgr.about_to_enable', load_plugin_rcfiles, use_symbol=True, aioqueue=False)


```

## pip3 conf

配置文件可用位置

```
$ sudo pip3 config -v list
For variant 'global', will try loading '/etc/xdg/pip/pip.conf'
For variant 'global', will try loading '/etc/pip.conf'
For variant 'user', will try loading '/root/.pip/pip.conf'
For variant 'user', will try loading '/root/.config/pip/pip.conf'
For variant 'site', will try loading '/usr/pip.conf'

```

```
[global]
timeout = 6000
  index-url = http://pypi.douban.com/simple
```

```
[global]
timeout = 600
index-url = http://pypi.v2ex.com/simple
[install]
use-mirrors = true
mirrors = https://pypi.tuna.tsinghua.edu.cn/simple/
```

临时的就加上参数
`-i https://pypi.tuna.tsinghua.edu.cn/simple/`
例如
`pip install --upgrade tensorflow -i http://pypi.douban.com/simple --trusted-host pypi.douban.com`

其他国内镜像还有

```
http://pypi.hustunique.com/
http://pypi.sdutlinux.org/
https://pypi.mirrors.ustc.edu.cn/simple/
http://mirrors.aliyun.com/pypi/simple/
http://pypi.douban.com/simple/
```

pip设置代理

```
[global]
index-url = https://pypi.tuna.tsinghua.edu.cn/simple
proxy     = http://XXXX.com:port
[install]
trusted-host=pypi.tuna.tsinghua.edu.cn
```

```
直接在pip时设置代理也是可以的：

pip install -r requirements.txt --proxy=代理服务器IP:端口号
```

## pip tips

```
python3 -m pip install --upgrade pip
/root/.cache/pip/wheels
sudo ls /root/.cache/pip/wheels  # 类似位置存放下载后的wheels

sudo apt install python3-pyqt5 python3-pyqt5.qtopengl python3-pyqt5.qtsvg python3-dbus python3-dbus.mainloop.pyqt5 python3-pyqt5.qtopengl python3-pyqt5.qtwebengine python3-pyqt5.qtwebkit --reinstall

```

---

# music players

```
sudo apt install audacious audacious-dev audacious-plugins audacious-plugins-data osdlyrics rhythmbox rhythmbox-plugins rhythmbox-dev 
sudo apt install pkg-config libtag1-dev libicu-dev libcue-dev libtag1-dev libavutil-dev libavcodec-dev libavformat-dev libdtkcore-dev qt5-qmake libqt5svg5-dev qttools5-dev-tools qtmultimedia5-dev libkf5codecs-dev libdtkwidget-dev
```

---

# python2（尽量用虚拟环境）

```
$ sudo apt-get install python-is-python3
$ sudo apt-get install python2 python2-dev  python2-setuptools-whl python2-pip-whl python2-minimal   # 不要安装python-pip， 不然要补sudo apt-get install python3-pip python3-virtualenv virtualenv 

Suggested packages:
  python2-doc python-tk python2.7-doc
The following NEW packages will be installed:
  libpython2-dev libpython2-stdlib libpython2.7 libpython2.7-dev libpython2.7-minimal libpython2.7-stdlib python2 python2-dev python2-minimal python2-pip-whl python2-setuptools-whl python2.7 python2.7-dev
  python2.7-minimal


```

## virtualenv

因为冲突不安装python-pip，那么没有pip2怎么办呢？ 可以用 `virtualenv`

```
$ sudo python2 -m pip install --upgrade pip
/usr/bin/python2: No module named pip

$ sudo python2 -m ensurepip 
ensurepip is disabled in Debian/Ubuntu for the system python.

Python modules For the system python are usually handled by dpkg and apt-get.

    apt-get install python-<module name>

Install the python-pip package to use pip itself.  Using pip together
with the system python might have unexpected results for any system installed
module, so use it on your own risk, or make sure to only use it in virtual
environments.

```

```
$ sudo apt install virtualenv
$ virtualenv -p /usr/bin/python2 --system-site-packages ~/python2_env # (Or wherever you want your environment to live)
```

如果只想使用本地安装的软件包(例如，使用pip安装的软件包，而不是使用pacman安装的软件包)，则在创建环境时请删除--system-site-packages选项
`~/.bash_profile`或 `~/.profile`(或任何您喜欢的shell配置文件)中，进行如下设置：

```
source ~/python2_env/bin/activate
```

```
(python2_env):
$ python -V
Python 2.7.18

(python2_env):
$ python -m pip install --upgrade pip
DEPRECATION: Python 2.7 reached the end of its life on January 1st, 2020. Please upgrade your Python as Python 2.7 is no longer maintained. pip 21.0 will drop support for Python 2.7 in January 2021. More details about Python 2 support in pip can be found at https://pip.pypa.io/en/latest/development/release-process/#python-2-support pip 21.0 will remove support for this functionality.
Requirement already up-to-date: pip in /home/andy/env/lib/python2.7/site-packages (20.3.4)

(python2_env):
$ python -m ensurepip --upgrade

ensurepip is disabled in Debian/Ubuntu for the system python.

Python modules For the system python are usually handled by dpkg and apt-get.

    apt-get install python-<module name>

Install the python-pip package to use pip itself.  Using pip together
with the system python might have unexpected results for any system installed
module, so use it on your own risk, or make sure to only use it in virtual
environments.

easy_install看来不能直接用, 下面这样安装

(python2_env):
$ python -m pip install easy_install

```

tips

```
python -m ensurepip
easy_install pip
python -m pip install --upgrade pip
```

关闭虚拟环境：

```
(python2_env):
$ deactivate
```

---

# 安装 anaconda

[https://docs.anaconda.com/anaconda/install/linux/](https://docs.anaconda.com/anaconda/install/linux/)

```
$ wget https://repo.anaconda.com/archive/Anaconda3-2023.03-1-Linux-x86_64.sh
$ sudo apt-get install libgl1-mesa-glx libegl1-mesa libxrandr2 libxrandr2 libxss1 libxcursor1 libxcomposite1 libasound2 libxi6 libxtst6 fish
$ bash Anaconda3-2023.03-1-Linux-x86_64.sh




$ source ~/anaconda3/bin/activate
$ conda config --set auto_activate_base false
$ conda init
必须自动修改
~/.bashrc
~/.condarc
```

迁移过来的要找修改的

```
find . -type f -name "*" | xargs grep -i "andreas"
```

实际上在.bashrc添加了

```
# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
__conda_setup="$('/home/andy/anaconda3/bin/conda' 'shell.bash' 'hook' 2> /dev/null)"
if [ $? -eq 0 ]; then
    eval "$__conda_setup"
else
    if [ -f "/home/andy/anaconda3/etc/profile.d/conda.sh" ]; then
        . "/home/andy/anaconda3/etc/profile.d/conda.sh"
    else
        export PATH="/home/andy/anaconda3/bin:$PATH"
    fi
fi
unset __conda_setup
# <<< conda initialize <<<
```

~/.condarc

```
channels:
  - defaults
auto_activate_base: false
```

在~/anaconda3/condabin/conda里面第一行是

```
#!/home/andreas/anaconda3/bin/python
```

其他影响：
conda base环境引起了gitk的字体变化，还是sans但是无法显示全部中文，字体怪异。推出base环境就恢复正常。
最好的办法，正常不启用base环境，就是~/.bashrc下面这个添加的部分注释掉，需要的时候
`$ source ~/anaconda3/bin/activate`
或者
`$ source ~/anaconda3/bin/activate <env_name>`
<env_name>就是在~/anaconda3/envs内的目录名

生效环境变量

```
re-open terminal 或者source ~/.bashrc
$ conda --version
$ conda list
$ conda --help
$ conda -h
$ which conda
$ conda info
```

To use conda with fish shel

```
$ conda init fish
```

~/.config/fish/config.fish

```
# >>> conda initialize >>>
# !! Contents within this block are managed by 'conda init' !!
if test -f /home/andy/anaconda3/bin/conda
    eval /home/andy/anaconda3/bin/conda "shell.fish" "hook" $argv | source
end
# <<< conda initialize <<<
```

using the GUI (.pkg) installer

```
$ anaconda-navigator
```

update pkg or all pkg

```
$ conda update conda anaconda-navigator
$ conda update --update-all
or
$ conda update --all
or
$ conda upgrade --all

```

uninstall

```
rm -rf ~/.condarc ~/.conda ~/.continuum ~/anaconda3
修改~/.bashrc
```

查看之前安装的镜像

```
$ conda config --show channels
默认是
channels:
  - defaults
```

删除所有的镜像源，恢复到默认

```
$ conda config --remove-key channels 
```

删除指定的镜像源

```
$ conda config --remove channels [urls]
```

配置国内镜像源[网速可以的话不设置也行]

```
$ conda config --add channels https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
$ conda config --set show_channel_urls yes
$ conda config --show channels
channels:
- https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/free/
- defaults
```

可以修改~/.condarc

```
channels:
  - defaults
show_channel_urls: true
default_channels:
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/main
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/r
  - https://mirrors.tuna.tsinghua.edu.cn/anaconda/pkgs/msys2
custom_channels:
  conda-forge: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  msys2: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  bioconda: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  menpo: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  pytorch-lts: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
  simpleitk: https://mirrors.tuna.tsinghua.edu.cn/anaconda/cloud
```

然后运⾏ conda clean -i 清除索引缓存，保证⽤的是镜像站提供的索引。
//然后运⾏ `conda create -n myenv numpy`

创建运行环境

```
$ conda create -y -n some_pip_test python=3.7 imagesize=1.0
$ conda create --name snakes python=3.9
```

active运行环境

```
$ conda activate some_pip_test
$ conda activate snakes // conda 4.6之前的版本是 $ source activate snakes
```

确认当前env环境

```
$ conda info --envs
$ conda-env list
```

deactive当前运行环境

```
$ conda deactivate  // conda 4.6之前的版本是 $ source deactivate
```

active运行环境后用升级模块 先 `conda activate <some_pip_env>`哦

```
$ pip install -U imagesize
```

确认当前环境python版本

```
$ python --version
```

查询当前环境已经安装的包

```
$ conda list
```

删除自定义env（谨慎操作）

```
$ conda remove -n some_pip_test --all
```

重命名环境
conda 其实没有重命名指令，实现重命名是通过 clone 完成的，分两步：

①先 clone 一份 new name 的环境

②删除 old name 的环境

如，将nlp重命名成tf2

```
conda create -n tf2 --clone nlp
```

删除原环境

```
conda remove -n nlp --all
```

精确查找

```
$ conda search --full-name <package_full_name>
```

模糊查找

```
$ conda search <text>
```

在指定环境中安装包

```
$ conda install --name <env_name> <package_name>
$ conda install --name python3 pandas
```

在当前环境中安装包

```
$ conda install <package_name>
```

使用pip安装包

是否需要启用？

```
$ conda config --set pip_interop_enabled True
```

```
$ pip install <package_name>
```

```
1. pip只是包管理器，无法对环境进行管理。因此如果想在指定环境中使用pip进行安装包，则需
要先切换到指定环境中，再使用pip命令安装包。
2. pip无法更新python，因为pip并不将python视为包。
3. pip可以安装一些conda无法安装的包；conda也可以安装一些pip无法安装的包。因此当使用
一种命令无法安装包时，可以尝试用另一种命令。
```

当使用 conda install 无法进行安装时，可以考虑从Anaconda.org中获取安装包的命令，并进行安装

[https://anaconda.org](https://anaconda.org)

卸载指定环境中的包

```
$ conda remove --name <env_name> <package_name>
$ conda remove --name python3 pandas
```

卸载当前环境中的包

```
$ conda remove <package_name>
```

更新所有包(在安装Anaconda之后执行上述命令更新Anaconda中的所有包至最新版本，便于使用)

```
$ conda update --all
或
$ conda upgrade --all
```

更新指定包

```
$ conda update <package_name>
或
$ conda upgrade <package_name>
```

更新多个指定包，则包名以空格隔开，向后排列。如： `conda update pandas numpy matplotlib` 即更新pandas、numpy、matplotlib包

## Active Python配置管理

[https://platform.activestate.com/yxgi5](https://platform.activestate.com/yxgi5)

---

# pip down

比如 [https://pypi.org/project/mxnet-cu102](https://pypi.org/project/mxnet-cu102)，在 download files 就可以获得直接下载链接和hash

`/home/andreas/.cache/pip` 内有缓存文件，但是文件名是校验码，路径是文件名前5个字符,类似位置win在 `C:\Users\Administrator\AppData\Local\pip\cache\`

离线下载，比如 packages 是目标目录

```
python -m pip download --only-binary :all: --dest . --no-cache <package_name>

pip download -d “Downloads” pymysql

pip download -d packages -r requirements.txt

pip download open3d=0.12 -i https://pypi.tuna.tsinghua.edu.cn/simple/ -d ./open3d_dabao

pip download \
--only-binary=:all: \ # 对于包以及包的依赖包，都使⽤⼆进制
--platform linux_x86_64 \ # 指定系统环境
-d \home\packs # 下载的⽂件的存储⽬录
-r requirement.txt # 指定要下载的包
实际使⽤中，会发现⼀些包找不到，⽐如tornado，会报错
pip download \
--no-binary=:all: \ # 使⽤⾮⼆进制包安装
tornado==6.0 \
-d pkg/
```

将下载的包的名字输出到requirements.txt中

```
ls open3d_dabao >requirements.txt
```

离线安装，比如本地目录packages内有需要的wheels

```
pip install --no-index --find-links=packages -r requirements.txt
pip install packages/PyMySQL-0.9.3-py2.py3-none-any.whl
pip install --no-index --find-links=open3d_dabao -r requirements.txt
sudo pip3 install -r /xxxx/xxxx/requirement.txt --no-index --find-links /xxxx/xxxxx/xxxxx/（存放下载好的包的⽬录）
```

在线安装多包

```
pip install -r requirements.txt
pip install pymysql xxxxx
```

---

# octave

```
$ sudo apt install octave

Suggested packages:
  libfftw3-mpi-dev libiodbc2-dev default-libmysqlclient-dev graphicsmagick-dbg scalapack-doc octave-dev
The following NEW packages will be installed:
  epstool libaec0 libarpack2 libbtf1 libcombblas1.16.0 libcxsparse3 libemf1 libfftw3-mpi3 libfltk-gl1.3 libfltk1.3 libgl2ps1.4 libglpk40 libgraphicsmagick++-q16-12 libgraphicsmagick-q16-3 libhdf5-103-1
  libhdf5-openmpi-103-1 libhypre-2.22.1 libklu1 libmumps-5.4 libopenblas0 libopenblas0-pthread libpetsc-real3.15 libplot2c2 libportaudio2 libpstoedit0c2a libptscotch-6.1 libqhull8.0 libqrupdate1
  libscalapack-openmpi2.1 libscotch-6.1 libsundials-ida4 libsundials-nvecparallel-petsc4 libsundials-nvecserial4 libsundials-sunlinsol2 libsundials-sunmatrix2 libsuperlu-dist7 libsuperlu5 libsz2
  libtrilinos-amesos-13.2 libtrilinos-aztecoo-13.2 libtrilinos-epetra-13.2 libtrilinos-epetraext-13.2 libtrilinos-galeri-13.2 libtrilinos-ifpack-13.2 libtrilinos-kokkos-13.2 libtrilinos-ml-13.2
  libtrilinos-teuchos-13.2 libtrilinos-trilinosss-13.2 libtrilinos-triutils-13.2 libtrilinos-zoltan-13.2 libzip4 octave octave-common octave-doc pstoedit

```

---

# git-lfs

git clone xxx 之后出现

```
Cloning into 'Hi06701A'...
remote: Enumerating objects: 46882, done.
remote: Total 46882 (delta 0), reused 0 (delta 0), pack-reused 46882
Receiving objects: 100% (46882/46882), 351.60 MiB | 173.00 KiB/s, done.
Resolving deltas: 100% (3890/3890), done.
git-lfs filter-process: line 1: git-lfs: command not found
fatal: the remote end hung up unexpectedly
warning: Clone succeeded, but checkout failed.
You can inspect what was checked out with 'git status'
and retry with 'git restore --source=HEAD :/'
```

```
git config --system core.longpaths true
git restore --source=HEAD :/
```

提示找不到 git-lfs

```
sudo apt install git-lfs
cd [clone-dir]
git lfs install
```

```
$ git lfs install
Updated git hooks.
Git LFS initialized.
```

```
$ echo $(git --exec-path)
/usr/lib/git-core
```

下面命令奇慢无比

```
git restore --source=HEAD :/
```

```
git reset --hard
```

If you intentionally removed git-lfs, and don't want to install it back as other answers suggest, your way out is:

```
git config --global --remove-section filter.lfs
```

## git-lfs tips

1. Download and install the Git command line extension. Once downloaded and installed, set up Git LFS for your user account by running:

```
git lfs install
```

You only need to run this once per user account.

2. In each Git repository where you want to use Git LFS, select the file types you'd like Git LFS to manage (or directly edit your .gitattributes). You can configure additional file extensions at anytime.

```
git lfs track "*.psd"
```

跟踪文件夹中的所有文件

```
忽略文件夹中的所有文件(包含文件夹)
// git lfs track "Pods/TXLiteAVSDK_Professional/**"
git lfs track "dir/**"
忽略文件夹中的文件(不包含文件夹)
git lfs track "dir/*"
```

执行完上面的命令后，会生成一个.gitattributes文件，要将其上传到远程gitee仓库

Now make sure .gitattributes is tracked:

```
git add .gitattributes
git commit -m '提交 .gitattributes 文件'
git push origin master（如果提交不了，后面可以加一个-f）
```

配置提交后就可正常上传文件

```
git add -A   提交所有 或指定当前大文件提交
git commit -m "大文件"
git push origin master -f
```

上传报错Message: LFS only supported repository in paid enterprise.: exit status 128, 解决方法：

```
rm .git/hooks/pre-push
git push -u origin "master"
```

报错message：WARNING: Authentication error: Authentication required: LFS only supported repository in paid enterprise.解决办法

```
git config lfs.https://gitee.com/{your_gitee}/{your_repo}.git/info/lfs.locksverify false
```

报错信息：Remote “origin” does not support the LFS locking API. Consider disabling it with:…

```
git lfs push origin master --all
```

## git 回退

1. 查看提交记录获取commit_id

```
git log
```

2. 回退命令

```
git reset --hard HEAD^` 回退到上个版本
git reset --hard HEAD~3` 回退到前3次提交之前，以此类推，回退到n次提交之前
git reset --hard commit_id` 退到/进到 指定[commit]的sha码
```

3. 强推到远程仓库

```
git push origin HEAD --force
```

---

# webp 图片转换

```
sudo apt-get install webp

可以使用如下命令将 JPG 或 PNG 转换为 WEBP
cwebp -q [图像质量] [JPEG/PNG文件名] -o [WebP文件名]

使用如下命令或将 WEBP 图片转换成 PNG
dwebp [WebP文件名] -o [PNG文件名]
```

```
sudo apt install libwebp-dev libgdk-pixbuf2.0-dev libgtk-3-dev meson build-essential lximage-qt
```

```
# Maintainer: Andeas Zhang
_name="webp-pixbuf-loader"
pkgname="${_name}-git"
pkgdesc="WebM GDK Pixbuf Loader library - Git version"
pkgver=0.2.4.r0.ga350141
pkgrel=1
url="https://github.com/aruiz/webp-pixbuf-loader"
license=("GPL")
depends=("libgdk-pixbuf2.0-dev" "libwebp-dev")
makedepends=("meson" "git")
arch=("i686" "x86_64" "i486" "pentium4" "aarch64" "armv7h")
conflicts=("${_name}")
#source=("${_name}::git+${url}.git")
source=("${_name}::git+ssh://git@github.com/aruiz/webp-pixbuf-loader.git")
sha256sums=("SKIP")

pkgver() {
	cd "${_name}"
	git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
}

build() {
	cd "${_name}"
	meson build
	ninja -C build
}

package() {
	cd "$srcdir/${_name}"
	DESTDIR="${pkgdir}" ninja -C build install
}
```

比较好的的办法

```
lximage-qt 或 Gwenview Qview gThumb LibreOffice 打开并另存
```

---

# mplayer

```
$ sudo apt install kmplayer mplayer mplayer-gui mplayer-skins vdr-plugin-mplayer # vdr-plugin-mplayer应该用不着
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  gamin kded5 keditbookmarks kio libaudio2 libdbusmenu-qt5-2 libenca0 libftdi1-2 libgamin0 libhfstospell11 libkf5archive5 libkf5auth-data libkf5auth5 libkf5authcore5 libkf5bookmarks-data libkf5bookmarks5
  libkf5completion-data libkf5completion5 libkf5config-bin libkf5config-data libkf5configcore5 libkf5configgui5 libkf5configwidgets-data libkf5configwidgets5 libkf5coreaddons-data libkf5coreaddons5
  libkf5crash5 libkf5dbusaddons-bin libkf5dbusaddons-data libkf5dbusaddons5 libkf5doctools5 libkf5globalaccel-bin libkf5globalaccel-data libkf5globalaccel5 libkf5globalaccelprivate5 libkf5i18n-data libkf5i18n5
  libkf5iconthemes-bin libkf5iconthemes-data libkf5iconthemes5 libkf5itemviews-data libkf5itemviews5 libkf5jobwidgets-data libkf5jobwidgets5 libkf5kdelibs4support-data libkf5kdelibs4support5
  libkf5kdelibs4support5-bin libkf5kiocore5 libkf5kiofilewidgets5 libkf5kiogui5 libkf5kiontlm5 libkf5kiowidgets5 libkf5mediaplayer-data libkf5mediaplayer5 libkf5notifications-data libkf5notifications5
  libkf5parts-data libkf5parts-plugins libkf5parts5 libkf5service-bin libkf5service-data libkf5service5 libkf5solid5 libkf5solid5-data libkf5sonnet5-data libkf5sonnetcore5 libkf5sonnetui5
  libkf5textwidgets-data libkf5textwidgets5 libkf5wallet-bin libkf5wallet-data libkf5wallet5 libkf5widgetsaddons-data libkf5widgetsaddons5 libkf5xmlgui-bin libkf5xmlgui-data libkf5xmlgui5 libkwalletbackend5-5
  liblirc0 libphonon4qt5-4 libphonon4qt5-data libpolkit-qt5-1-1 libqt5texttospeech5 libvoikko1 libvorbisidec1 lirc phonon4qt5 phonon4qt5-backend-vlc qtspeech5-speechd-plugin sonnet-plugins vdr
Suggested packages:
  xawtv konqueror nas voikko-fi lirc-compat-remotes lirc-drv-irman lirc-doc lirc-x setserial ir-keytable mplayer-doc netselect | fping phonon4qt5-backend-gstreamer hspell vdr-plugin-dvbsddevice
The following NEW packages will be installed:
  gamin kded5 keditbookmarks kio kmplayer libaudio2 libdbusmenu-qt5-2 libenca0 libftdi1-2 libgamin0 libhfstospell11 libkf5archive5 libkf5auth-data libkf5auth5 libkf5authcore5 libkf5bookmarks-data
  libkf5bookmarks5 libkf5completion-data libkf5completion5 libkf5config-bin libkf5config-data libkf5configcore5 libkf5configgui5 libkf5configwidgets-data libkf5configwidgets5 libkf5coreaddons-data
  libkf5coreaddons5 libkf5crash5 libkf5dbusaddons-bin libkf5dbusaddons-data libkf5dbusaddons5 libkf5doctools5 libkf5globalaccel-bin libkf5globalaccel-data libkf5globalaccel5 libkf5globalaccelprivate5
  libkf5i18n-data libkf5i18n5 libkf5iconthemes-bin libkf5iconthemes-data libkf5iconthemes5 libkf5itemviews-data libkf5itemviews5 libkf5jobwidgets-data libkf5jobwidgets5 libkf5kdelibs4support-data
  libkf5kdelibs4support5 libkf5kdelibs4support5-bin libkf5kiocore5 libkf5kiofilewidgets5 libkf5kiogui5 libkf5kiontlm5 libkf5kiowidgets5 libkf5mediaplayer-data libkf5mediaplayer5 libkf5notifications-data
  libkf5notifications5 libkf5parts-data libkf5parts-plugins libkf5parts5 libkf5service-bin libkf5service-data libkf5service5 libkf5solid5 libkf5solid5-data libkf5sonnet5-data libkf5sonnetcore5 libkf5sonnetui5
  libkf5textwidgets-data libkf5textwidgets5 libkf5wallet-bin libkf5wallet-data libkf5wallet5 libkf5widgetsaddons-data libkf5widgetsaddons5 libkf5xmlgui-bin libkf5xmlgui-data libkf5xmlgui5 libkwalletbackend5-5
  liblirc0 libphonon4qt5-4 libphonon4qt5-data libpolkit-qt5-1-1 libqt5texttospeech5 libvoikko1 libvorbisidec1 lirc mplayer mplayer-gui mplayer-skins phonon4qt5 phonon4qt5-backend-vlc qtspeech5-speechd-plugin
  sonnet-plugins vdr vdr-plugin-mplayer

By default VDR is configured to use /var/lib/video to store recordings. You can either create this directory now, or change this behavior later by modifying the config file /etc/vdr/conf.d/00-vdr.conf. 
```

```
sudo apt purge kmplayer vdr-plugin-mplayer
The following packages will be REMOVED:
  kmplayer* vdr-plugin-mplayer*

The following packages were automatically installed and are no longer required:
  kded5 keditbookmarks kio libhfstospell11 libkf5archive5 libkf5auth5 libkf5bookmarks-data libkf5bookmarks5 libkf5completion-data libkf5completion5 libkf5crash5 libkf5doctools5 libkf5globalaccel-bin
  libkf5globalaccel-data libkf5globalaccel5 libkf5globalaccelprivate5 libkf5iconthemes-bin libkf5iconthemes-data libkf5iconthemes5 libkf5itemviews-data libkf5itemviews5 libkf5jobwidgets-data libkf5jobwidgets5
  libkf5kdelibs4support-data libkf5kdelibs4support5 libkf5kdelibs4support5-bin libkf5kiocore5 libkf5kiofilewidgets5 libkf5kiogui5 libkf5kiontlm5 libkf5kiowidgets5 libkf5mediaplayer-data libkf5mediaplayer5
  libkf5parts-data libkf5parts-plugins libkf5parts5 libkf5solid5 libkf5solid5-data libkf5sonnet5-data libkf5sonnetcore5 libkf5sonnetui5 libkf5textwidgets-data libkf5textwidgets5 libkf5xmlgui-bin
  libkf5xmlgui-data libkf5xmlgui5 libphonon4qt5-4 libphonon4qt5-data libvoikko1 phonon4qt5 phonon4qt5-backend-vlc sonnet-plugins vdr
Use 'sudo apt autoremove' to remove them.
```

```
mplayer
gmplayer
```

---

# gstreamer

```
sudo apt-get install libgstreamer1.0-dev libgstreamer-plugins-base1.0-dev libgstreamer-plugins-bad1.0-dev gstreamer1.0-plugins-base gstreamer1.0-plugins-good gstreamer1.0-plugins-bad gstreamer1.0-plugins-ugly gstreamer1.0-libav gstreamer1.0-tools gstreamer1.0-x gstreamer1.0-alsa gstreamer1.0-gl gstreamer1.0-gtk3 gstreamer1.0-qt5 gstreamer1.0-pulseaudio
```

[https://gstreamer.freedesktop.org/documentation/tutorials/index.html](https://gstreamer.freedesktop.org/documentation/tutorials/index.html)

[https://gstreamer.freedesktop.org/documentation/tutorials/basic/index.html](https://gstreamer.freedesktop.org/documentation/tutorials/basic/index.html)

[https://gstreamer.freedesktop.org/documentation/installing/on-linux.html](https://gstreamer.freedesktop.org/documentation/installing/on-linux.html)

---

# music-dl

[https://github.com/0xHJK/music-dl](https://github.com/0xHJK/music-dl)

```
virtualenv -p /usr/bin/python3 --system-site-packages ~/python3_env
source ~/python3_env/bin/activate
pip3 install pymusic-dl
music-dl -k "周杰伦" -n 20
```
or
```
sudo -H pip3 install pymusic-dl
```

# libopencv

```
sudo apt install libopencv-dev libopencv-core-dev
sudo apt install libopencv-core4.5d libopencv-calib3d-dev libopencv-calib3d4.5d libopencv-dnn-dev libopencv-dnn4.5d
sudo ln -s /usr/include/opencv4/opencv2 /usr/include/opencv2
```

---

# libx264 libx265

```
sudo apt install libx264-163 libx264-dev x264 libx265-199 libx265-dev x265

The following additional packages will be installed:
  libffms2-5
Suggested packages:
  libx265-doc
The following NEW packages will be installed:
  libffms2-5 libx264-dev libx265-dev x264 x265 libx264-163 libx265-199

```

---

# csh tcsh

```
sudo apt install csh
sudo apt install tcsh
```

---

# kernel build-dep

```
$ sudo apt-get build-dep linux linux-image-unsigned-$(uname -r)

Picking 'linux-hwe-5.19' as source package instead of 'linux-image-unsigned-5.19.0-45-generic'
The following NEW packages will be installed:
  asciidoc asciidoc-base asciidoc-common default-jdk-headless docbook-dsssl docbook-utils docbook-xsl dvipng fonts-font-awesome latexmk libapache-pom-java libaudit-dev libcap-dev
  libcap-ng-dev libcommons-logging-java libcommons-parent-java libfontbox-java libiberty-dev libnewt-dev libosp5 libostyle1c2 libpci-dev libpdfbox-java librsvg2-bin libsgmls-perl lynx
  lynx-common makedumpfile openjade openjdk-11-jdk-headless opensp pahole preview-latex-style python3-alabaster python3-imagesize python3-snowballstemmer python3-sphinx
  python3-sphinx-rtd-theme sgmlspl sphinx-common sphinx-rtd-theme-common teckit texlive-fonts-recommended texlive-formats-extra texlive-latex-base texlive-latex-extra
  texlive-latex-recommended texlive-pictures texlive-plain-generic texlive-xetex tipa xmlto xsltproc
0 upgraded, 53 newly installed, 0 to remove and 9 not upgraded.


$ uname -srmv
$ uname -mrs
$ hostnamectl
$ cat /proc/version
$ sudo apt update
//$ sudo apt full-upgrade
//$ sudo apt remove linux-image-$(uname -r) linux-headers-$(uname -r)
$ cat /proc/version_signature
```

[https://stackoverflow.com/questions/75695258/how-to-fix-broken-packages-of-linux-unsigned-image](https://stackoverflow.com/questions/75695258/how-to-fix-broken-packages-of-linux-unsigned-image)

[https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel](https://wiki.ubuntu.com/Kernel/BuildYourOwnKernel)

[https://help.ubuntu.com/community/UpdatingADeb](https://help.ubuntu.com/community/UpdatingADeb)

[https://git.launchpad.net/ubuntu/+source/linux-hwe-5.19](https://git.launchpad.net/ubuntu/+source/linux-hwe-5.19)

[https://launchpad.net/~ubuntu-kernel](https://launchpad.net/~ubuntu-kernel)

[https://code.launchpad.net/~ubuntu-kernel/+git](https://code.launchpad.net/~ubuntu-kernel/+git)

[https://git.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/jammy](https://git.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/jammy)

[https://code.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/jammy](https://code.launchpad.net/~ubuntu-kernel/ubuntu/+source/linux/+git/jammy)

[https://wiki.ubuntu.com/Kernel](https://wiki.ubuntu.com/Kernel)

[http://kernel.ubuntu.com/git](http://kernel.ubuntu.com/git)

[https://launchpad.net/~ubuntu-kernel-team](https://launchpad.net/~ubuntu-kernel-team)

[https://git.launchpad.net/ubuntu/+source/linux](https://git.launchpad.net/ubuntu/+source/linux)

---

# Build Deb Packages From Source

```
sudo apt install dpkg-dev build-essential fakeroot devscripts

/etc/apt/sources.list
deb-src

sudo su -c "grep '^deb ' /etc/apt/sources.list | sed 's/^deb/deb-src/g' > /etc/apt/sources.list.d/deb-src.list"
sudo apt update -y
$ sudo sed -i.back -e "s/^# deb-src/deb-src/g" /etc/apt/sources.list
$ sudo apt-get update


sudo sed -i -- 's/#deb-src/deb-src/g' /etc/apt/sources.list && sudo sed -i -- 's/# deb-src/deb-src/g' /etc/apt/sources.list

Bash script that could be used to uncomment deb-src lines in sources.list :

tempdir=$(mktemp -d)
cd "$tempdir"
source_file=/etc/apt/sources.list
new_file=sources.list.new
perl -pE 's/^#\s+(deb-src)/$1/' "$source_file" > "$new_file"
sudo cp "$new_file" "$source_file"
sudo apt-get update


sudo perl -p -i -n -e "s/# *deb-src/deb-src/"  /etc/apt/sources.list

(cd /etc/apt/; sudo tar cvf sources.list.tar sources.list sources.list.d);  for i in /etc/apt/sources.list /etc/apt/sources.list.d/*; do sudo perl -p -i -n -e "s/# *deb-src/deb-src/" $i; done

This adds \s\? which is an optional white space (note the ? needs to be escaped).
sed -i -- 's/#\s\?deb-src/deb-src/g' /etc/apt/sources.list



sudo apt source xxx

change src if needed

sudo dpkg-buildpackage -b -uc -us


==

manaul download three files
xxx.orig.tar.gz
xxx.debian.tar.gz
xxx.dsc

then
dpkg-source -x xxx.dsc

change src if needed

dpkg-buildpackage -rfakeroot -b -uc -us
```

---

# scheme2c

```
sudo apt install scheme2c libsigsegv-dev

```

---

# lscc diamond

```
sudo apt install libxft-dev:i386

Suggested packages:
  freetype2-doc:i386 libx11-doc:i386 libxcb-doc:i386
The following NEW packages will be installed:
  libbrotli-dev:i386 libexpat1-dev:i386 libfontconfig-dev:i386
  libfontconfig1-dev:i386 libfreetype-dev:i386 libfreetype6-dev:i386
  libpng-dev:i386 libpthread-stubs0-dev:i386 libx11-dev:i386 libxau-dev:i386
  libxcb1-dev:i386 libxdmcp-dev:i386 libxft-dev:i386 libxft2:i386
  libxrender-dev:i386 uuid-dev:i386
```

/etc/udev/rules.d/10-lattice.rules

```
#lattice
SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="1134", ATTRS{idProduct}=="8001", MODE="0666", GROUP="plugdev", SYMLINK+="lattice-%n"
#FTDI
#SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", MODE="0666", GROUP="plugdev", SYMLINK+="ftdi-%n"
#SUBSYSTEM=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", RUN+="/bin/sh -c 'basename %p >/sys/bus/usb/drivers/ftdi_sio/unbind'"
#SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", MODE="0666", GROUP="plugdev", SYMLINK+="ftdi-%n"
#SUBSYSTEM=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", RUN+="/bin/sh -c 'rmmod ftdi_sio && rmmod usbserial'"
#SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6014", MODE="0666", OWNER="andy", GROUP="plugdev", SYMLINK+="ftdi-%n"
#SUBSYSTEM=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6014", RUN+="/bin/sh -c 'rmmod ftdi_sio && rmmod usbserial'"
SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", MODE="0666", GROUP="plugdev", SYMLINK+="ftdi-%n"
SUBSYSTEM=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6010", RUN+="/bin/sh -c 'basename %p >/sys/bus/usb/drivers/ftdi_sio/unbind'"
SUBSYSTEM=="usb", ACTION=="add", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6014", MODE="0666", GROUP="plugdev", SYMLINK+="ftdi-%n"
SUBSYSTEM=="usb", ATTRS{idVendor}=="0403", ATTRS{idProduct}=="6014", RUN+="/bin/sh -c 'basename %p >/sys/bus/usb/drivers/ftdi_sio/unbind'"
```

```
ls -l /dev/bus/usb/003/005
ls -l /dev/bus/usb/*/*
getfacl /dev/bus/usb/003/005
```

reload udev rules

```
sudo skill -HUP udevd

sudo udevadm control --reload-rules
sudo udevadm trigger
```

then，Plug in the USB cable.

if unbind, no need rommod

```
$ lsmod | grep ftdi_sio
ftdi_sio               65536  0
usbserial              57344  1 ftdi_sio
```

---

# backup kylin， 安装ukylin之后，release信息会被修改，这样恢复

$ cat /usr/lib/os-release.bk

```
PRETTY_NAME="Ubuntu 22.04.1 LTS"
NAME="Ubuntu Kylin"
VERSION_ID="22.04"
VERSION="22.04.1 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy
```

$ sudo cat /etc/lsb-release.bk

```
DISTRIB_ID=Kylin
DISTRIB_RELEASE=V10
DISTRIB_CODENAME=kylin
DISTRIB_DESCRIPTION="Kylin V10 SP1"
DISTRIB_KYLIN_RELEASE=V10
DISTRIB_VERSION_TYPE=enterprise
DISTRIB_VERSION_MODE=normal
```

$ cat /usr/lib/os-release

```
PRETTY_NAME="Ubuntu 22.04.1 LTS"
NAME="Ubuntu"
VERSION_ID="22.04"
VERSION="22.04.1 LTS (Jammy Jellyfish)"
VERSION_CODENAME=jammy
ID=ubuntu
ID_LIKE=debian
HOME_URL="https://www.ubuntu.com/"
SUPPORT_URL="https://help.ubuntu.com/"
BUG_REPORT_URL="https://bugs.launchpad.net/ubuntu/"
PRIVACY_POLICY_URL="https://www.ubuntu.com/legal/terms-and-policies/privacy-policy"
UBUNTU_CODENAME=jammy
```

$ sudo cat /etc/lsb-release

```
DISTRIB_ID=Ubuntu
DISTRIB_RELEASE=22.04
DISTRIB_CODENAME=jammy
DISTRIB_DESCRIPTION="Ubuntu 22.04.1 LTS"
```

---

# 51-altera-usb-blaster.rules

/etc/udev/rules.d/51-altera-usb-blaster.rules

```
SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6001", MODE="0666"
SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6002", MODE="0666"
SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6003", MODE="0666"
SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6010", MODE="0666"
SUBSYSTEM=="usb", ATTR{idVendor}=="09fb", ATTR{idProduct}=="6810", MODE="0666"
```

---

# lightdm

想设置背景 /usr/share/backgrounds/warty-final-ubuntu.png

sudo gedit /etc/lightdm/lightdm.conf

```
[SeatDefaults]
# user-session=ubuntu
greeter-session=lightdm-gtk-greeter
greeter-show-manual-login=true
```

sudo gedit /etc/lightdm/lightdm-gtk-greeter.conf

```
[greeter]
ackground=/usr/share/backgrounds/warty-final-ubuntu.png
user-background=false
activate-numlock=true
show-language-selector=true
```

```
lightdm --test-mode
```

ok, user-background必须设置false才换成功背景图

/etc/lightdm/lightdm-gtk-greeter.conf

```
# LightDM GTK+ Configuration
# Available configuration options listed below.
#
# Appearance:
#  theme-name = GTK+ theme to use
#  icon-theme-name = Icon theme to use
#  cursor-theme-name = Cursor theme to use
#  cursor-theme-size = Cursor size to use
#  background = Background file to use, either an image path or a color (e.g. #772953)
#  user-background = false|true ("true" by default)  Display user background (if available)
#  transition-duration = Length of time (in milliseconds) to transition between background images ("500" by default)
#  transition-type = ease-in-out|linear|none  ("ease-in-out" by default)
#
# Fonts:
#  font-name = Font to use
#  xft-antialias = false|true  Whether to antialias Xft fonts
#  xft-dpi = Resolution for Xft in dots per inch (e.g. 96)
#  xft-hintstyle = none|slight|medium|hintfull  What degree of hinting to use
#  xft-rgba = none|rgb|bgr|vrgb|vbgr  Type of subpixel antialiasing
#
# Login window:
#  active-monitor = Monitor to display greeter window (name or number). Use #cursor value to display greeter at monitor with cursor. Can be a semicolon separated list
#  position = x y ("50% 50%" by default)  Login window position
#  default-user-image = Image used as default user icon, path or #icon-name
#  hide-user-image = false|true ("false" by default)
#
# Panel:
#  panel-position = top|bottom ("top" by default)
#  clock-format = strftime-format string, e.g. %H:%M
#  indicators = semi-colon ";" separated list of allowed indicator modules. Built-in indicators include "~a11y", "~language", "~session", "~power", "~clock", "~host", "~spacer". Unity indicators can be represented by short name (e.g. "sound", "power"), service file name, or absolute path
#
# Accessibility:
#  a11y-states = states of accessibility features: "name" - save state on exit, "-name" - disabled at start (default value for unlisted), "+name" - enabled at start. Allowed names: contrast, font, keyboard, reader.
#  keyboard = command to launch on-screen keyboard (e.g. "onboard")
#  keyboard-position = x y[;width height] ("50%,center -0;50% 25%" by default)  Works only for "onboard"
#  reader = command to launch screen reader (e.g. "orca")
#  at-spi-enabled = false|true ("true" by default) Enables accessibility at-spi-command if the greeter is built with it enabled
#
# Security:
#  allow-debugging = false|true ("false" by default)
#  screensaver-timeout = Timeout (in seconds) until the screen blanks when the greeter is called as lockscreen
#
# Template for per-monitor configuration:
#  [monitor: name]
#  background = overrides default value
#  user-background = overrides default value
#  laptop = false|true ("false" by default) Marks monitor as laptop display
#  transition-duration = overrides default value
#
[greeter]
ackground=/usr/share/backgrounds/warty-final-ubuntu.png
user-background=false
#theme-name=
#icon-theme-name=
#font-name=
#xft-antialias=
#xft-dpi=
#xft-hintstyle=
#xft-rgba=
#indicators=
#clock-format=
#keyboard=
#reader=
#position=
#screensaver-timeout=
activate-numlock=true
show-language-selector=true
```

sudo gedit lightdm.conf.d/91-arctica-greeter-mate.conf 存档

```
[SeatDefaults]

# don't show a username / password login prompt for local login
greeter-show-manual-login=false
```

more /etc/lightdm/lightdm.conf 存档

```
#
# General configuration
#
# start-default-seat = True to always start one seat if none are defined in the configuration
# greeter-user = User to run greeter as
# minimum-display-number = Minimum display number to use for X servers
# minimum-vt = First VT to run displays on
# lock-memory = True to prevent memory from being paged to disk
# user-authority-in-system-dir = True if session authority should be in the system location
# guest-account-script = Script to be run to setup guest account
# logind-check-graphical = True to on start seats that are marked as graphical by logind
# log-directory = Directory to log information to
# run-directory = Directory to put running state in
# cache-directory = Directory to cache to
# sessions-directory = Directory to find sessions
# remote-sessions-directory = Directory to find remote sessions
# greeters-directory = Directory to find greeters
# backup-logs = True to move add a .old suffix to old log files when opening new ones
# dbus-service = True if LightDM provides a D-Bus service to control it
#

[LightDM]
#start-default-seat=true
#greeter-user=lightdm
#minimum-display-number=0
#minimum-vt=7 # Setting this to a value < 7 implies security issues, see FS#46799
#lock-memory=true
#user-authority-in-system-dir=false
#guest-account-script=guest-account
#logind-check-graphical=false
#log-directory=/var/log/lightdm
#run-directory=/run/lightdm
#cache-directory=/var/cache/lightdm
#sessions-directory=/usr/share/lightdm/sessions:/usr/share/xsessions:/usr/share/wayland-sessions
#remote-sessions-directory=/usr/share/lightdm/remote-sessions
#greeters-directory=$XDG_DATA_DIRS/lightdm/greeters:$XDG_DATA_DIRS/xgreeters
#backup-logs=true
#dbus-service=true

#
# Seat configuration
#
# Seat configuration is matched against the seat name glob in the section, for example:
# [Seat:*] matches all seats and is applied first.
# [Seat:seat0] matches the seat named "seat0".
# [Seat:seat-thin-client*] matches all seats that have names that start with "seat-thin-client".
#
# type = Seat type (local, xremote)
# pam-service = PAM service to use for login
# pam-autologin-service = PAM service to use for autologin
# pam-greeter-service = PAM service to use for greeters
# xserver-command = X server command to run (can also contain arguments e.g. X -special-option)
# xmir-command = Xmir server command to run (can also contain arguments e.g. Xmir -special-option)
# xserver-config = Config file to pass to X server
# xserver-layout = Layout to pass to X server
# xserver-allow-tcp = True if TCP/IP connections are allowed to this X server
# xserver-share = True if the X server is shared for both greeter and session
# xserver-hostname = Hostname of X server (only for type=xremote)
# xserver-display-number = Display number of X server (only for type=xremote)
# xdmcp-manager = XDMCP manager to connect to (implies xserver-allow-tcp=true)
# xdmcp-port = XDMCP UDP/IP port to communicate on
# xdmcp-key = Authentication key to use for XDM-AUTHENTICATION-1 (stored in keys.conf)
# greeter-session = Session to load for greeter
# greeter-hide-users = True to hide the user list
# greeter-allow-guest = True if the greeter should show a guest login option
# greeter-show-manual-login = True if the greeter should offer a manual login option
# greeter-show-remote-login = True if the greeter should offer a remote login option
# user-session = Session to load for users
# allow-user-switching = True if allowed to switch users
# allow-guest = True if guest login is allowed
# guest-session = Session to load for guests (overrides user-session)
# session-wrapper = Wrapper script to run session with
# greeter-wrapper = Wrapper script to run greeter with
# guest-wrapper = Wrapper script to run guest sessions with
# display-setup-script = Script to run when starting a greeter session (runs as root)
# display-stopped-script = Script to run after stopping the display server (runs as root)
# greeter-setup-script = Script to run when starting a greeter (runs as root)
# session-setup-script = Script to run when starting a user session (runs as root)
# session-cleanup-script = Script to run when quitting a user session (runs as root)
# autologin-guest = True to log in as guest by default
# autologin-user = User to log in with by default (overrides autologin-guest)
# autologin-user-timeout = Number of seconds to wait before loading default user
# autologin-session = Session to load for automatic login (overrides user-session)
# autologin-in-background = True if autologin session should not be immediately activated
# exit-on-failure = True if the daemon should exit if this seat fails
#

[Seat:*]
#type=local
#pam-service=lightdm
#pam-autologin-service=lightdm-autologin
#pam-greeter-service=lightdm-greeter
#xserver-command=X
#xmir-command=Xmir
#xserver-config=
#xserver-layout=
#xserver-allow-tcp=false
#xserver-share=true
#xserver-hostname=
#xserver-display-number=
#xdmcp-manager=
#xdmcp-port=177
#xdmcp-key=
greeter-session=lightdm-gtk-greeter
#greeter-hide-users=false
#greeter-allow-guest=true
#greeter-show-manual-login=false
#greeter-show-remote-login=true
#user-session=default
#allow-user-switching=true
#allow-guest=true
#guest-session=
#session-wrapper=/etc/lightdm/Xsession
#greeter-wrapper=
#guest-wrapper=
#display-setup-script=
#display-stopped-script=
#greeter-setup-script=
#session-setup-script=
#session-cleanup-script=
#autologin-guest=false
#autologin-user=
#autologin-user-timeout=0
#autologin-in-background=false
#autologin-session=
#exit-on-failure=false

#
# XDMCP Server configuration
#
# enabled = True if XDMCP connections should be allowed
# port = UDP/IP port to listen for connections on
# listen-address = Host/address to listen for XDMCP connections (use all addresses if not present)
# key = Authentication key to use for XDM-AUTHENTICATION-1 or blank to not use authentication (stored in keys.conf)
# hostname = Hostname to report to XDMCP clients (defaults to system hostname if unset)
#
# The authentication key is a 56 bit DES key specified in hex as 0xnnnnnnnnnnnnnn.  Alternatively
# it can be a word and the first 7 characters are used as the key.
#
greeter-show-manual-login=true

[XDMCPServer]
#enabled=false
#port=177
#listen-address=
#key=
#hostname=

#
# VNC Server configuration
#
# enabled = True if VNC connections should be allowed
# command = Command to run Xvnc server with
# port = TCP/IP port to listen for connections on
# listen-address = Host/address to listen for VNC connections (use all addresses if not present)
# width = Width of display to use
# height = Height of display to use
# depth = Color depth of display to use
#

[VNCServer]
#enabled=false
#command=Xvnc
#port=5900
#listen-address=
#width=1024
#height=768
#depth=8
```

---

# steam

steam的最大意义在于提供各种库，基本上需要的库都可以在这找到

Download deb from [https://store.steampowered.com/about/](https://store.steampowered.com/about/)

```
$ sudo dpkg -i steam_latest.deb
$ steam
```

```
The packages cache seems to be out of date

Press return to update the list of available packages: 
==== AUTHENTICATING FOR org.freedesktop.policykit.exec ===
Authentication is needed to run `/usr/bin/steamdeps' as the super user
Authenticating as: andy,,, (andy)
Password: 
polkit-agent-helper-1: error response to PolicyKit daemon: GDBus.Error:org.freedesktop.PolicyKit1.Error.Failed: No session for cookie
==== AUTHENTICATION FAILED ===
Error executing command as another user: Not authorized

This incident has been reported.

Press return to continue:

同时运行 /usr/lib/x86_64-linux-gnu/polkit-mate/polkit-mate-authentication-agent-1 的话会提示
libXtst.so.6
libpipewire-0.3.so.0
libxcb-res.so.0
libva.so.2
libvdpau.so.1
libva.so.2

也可以  STEAM_RUNTIME=0 steam 来报告 missing dependencies

steam --reset
sudo apt-get install policykit-desktop-privileges policykit-1-gnome
sudo systemctl status polkit.service
/usr/lib/x86_64-linux-gnu/polkit-mate/polkit-mate-authentication-agent-1


SOLUTION:

Besides the polkit service, a polkit agent is needed. If you don't use a DE, then you will only have a tty polkit agent installed, and apparently it's broken. The error above is from the tty polkit agent.

So what I needed to do is install another polkit agent and make sure it is running (best to autostart with the system).
```

ubuntu DE 正常显示

```
The packages cache seems to be out of date

Press return to update the list of available packages: 
...........................
Package steam-libs-amd64:amd64 needs to be installed
Package steam-libs-i386:i386 needs to be installed

Steam needs to install these additional packages:
libc6:amd64 libc6:i386 libegl1:amd64 libegl1:i386 libgbm1:amd64 libgbm1:i386 libgl1-mesa-dri:amd64 libgl1-mesa-dri:i386 libgl1:amd64 libgl1:i386 steam-libs-amd64:amd64 steam-libs-i386:i386

Press return to proceed with the installation: 
.................
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
libegl1 is already the newest version (1.4.0-1).
libegl1 set to manually installed.
libgl1 is already the newest version (1.4.0-1).
libgl1 set to manually installed.
libegl1:i386 is already the newest version (1.4.0-1).
libegl1:i386 set to manually installed.
libgl1:i386 is already the newest version (1.4.0-1).
libc6 is already the newest version (2.35-0ubuntu3.1).
libc6 set to manually installed.
libc6:i386 is already the newest version (2.35-0ubuntu3.1).
The following additional packages will be installed:
  i965-va-driver:i386 intel-media-va-driver:i386 libdrm-intel1:i386
  libegl-mesa0 libegl-mesa0:i386 libgbm-dev libgl1-amber-dri libglapi-mesa
  libglapi-mesa:i386 libglx-mesa0 libglx-mesa0:i386 libigdgmm12:i386
  libnm0:i386 libosmesa6 libosmesa6:i386 libpciaccess0:i386 libva-drm2:i386
  libva-glx2 libva-glx2:i386 libva-x11-2:i386 libva2:i386 mesa-va-drivers
  mesa-va-drivers:i386 va-driver-all:i386
Suggested packages:
  i965-va-driver-shaders:i386 nvidia-driver-libs nvidia-vulkan-icd
  nvidia-driver-libs:i386 nvidia-vulkan-icd:i386
Recommended packages:
  libgl1-amber-dri:i386
The following NEW packages will be installed:
  i965-va-driver:i386 intel-media-va-driver:i386 libdrm-intel1:i386
  libigdgmm12:i386 libnm0:i386 libpciaccess0:i386 libva-drm2:i386 libva-glx2
  libva-glx2:i386 libva-x11-2:i386 libva2:i386 mesa-va-drivers:i386
  steam-libs-amd64 steam-libs-i386:i386 va-driver-all:i386
The following packages will be upgraded:
  libegl-mesa0 libegl-mesa0:i386 libgbm-dev libgbm1 libgbm1:i386
  libgl1-amber-dri libgl1-mesa-dri libgl1-mesa-dri:i386 libglapi-mesa
  libglapi-mesa:i386 libglx-mesa0 libglx-mesa0:i386 libosmesa6 libosmesa6:i386
  mesa-va-drivers
15 upgraded, 15 newly installed, 0 to remove and 107 not upgraded.
Need to get 38.5 MB of archives.
After this operation, 37.5 MB of additional disk space will be used.
Do you want to continue? [Y/n] y

```

```
这两个下载慢
Get:1 https://repo.steampowered.com/steam stable/steam amd64 steam-libs-amd64 amd64 1:1.0.0.78 [14.2 kB]
Get:2 https://repo.steampowered.com/steam stable/steam i386 steam-libs-i386 i386 1:1.0.0.78 [14.2 kB]

```

```
$ sudo apt  -c ~/apt_proxy_conf install libc6:amd64 libc6:i386 libegl1:amd64 libegl1:i386 libgbm1:amd64 libgbm1:i386 libgl1-mesa-dri:amd64 libgl1-mesa-dri:i386 libgl1:amd64 libgl1:i386 steam-libs-amd64:amd64 steam-libs-i386:i386
```

已经安装的app可以跳过steam来调用

```
比较旧版本steam的app在 ~/.steam/steam/steamapps
最新版本steam的app在 ~/.local/share/Steam/steamapps/common
比如 Universe Sandbox 2
运行
$ ./Universe\ Sandbox.x86_6
```

集成显卡显存过小

```
lspci 找到vga什么的
lspci | grep -i VGA
lspci -vs 00:02.0
lspci -vs 00:02.0 | grep -i -E 'size|ram|memory|prefetchable'
sudo lshw -C display
sudo lshw -class display
glxinfo | grep -E -i 'device|memory'
glxinfo | grep -E -i 'device|memory|video'
glxinfo -B
sudo dmesg | grep drm
LC_ALL=C lspci -v | grep -EA10 "3D|VGA" | grep 'prefetchable' 
如果是n卡
nvidia-smi
```

---

# 修改软链接 change what a symlink points to after it is created

```
ln -sfn source_file_or_directory_name softlink_name
```

```
ln -s /media/files/tb-prod/files files
The -s option means to make a symbolic link. To update a link, either delete the link and create it as above, or use the -f option to ln as well. If you are linking to a folder, you should include the -n option:

ln -sfn /a/new/path files
This will replace the link with a new one pointing at /a/new/path.

The -n option is necessary when linking to a different target folder to avoid creating a sub-folder inside that symbolic link and instead replace the symbolic link completely.
```

下面比较有没有-n选项的情况，特别是在 symlink 初始指向folder的情况

```
mkdir test test1
ln -s test ttt
到这创建一个文件夹的软链接指向test目录

case1: symlink folder 内放一个 没有路径的 symlink
ln -sf test1 ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test/ 没有变化
ll ttt/*    查看ttt目录下有啥
显示 ttt/test1 -> test1 这symlink里没有路径，因为创建的时候target就没有给路径，那么这个 symlink 显然是无效的

结论:那么没有加 -n 的 ln -sf [target] [folder-symlink] 就是在 symlink 指向的目录下，放一个[target]除去路径名称这样的软链接，如果[target]给了路径就指向带路径的名称。[target]可以是目录、文件，应该要给路径才能指向有效路径，看case2、case3、case4。

case2: symlink folder 内放一个绝对路径的 symlink
ln -sf $PWD/test ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test/ 没有变化
ll ttt/*
显示 ttt/test -> /home/andy/Documents/tmp/test/  绝对路径的 symlink，有效

case3: symlink folder 内放一个相对路径的 symlink
ln -sf ../test ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test/ 没有变化
ll ttt/*
显示 ttt/test -> ../test/                        相对路径的 symlink，有效


case4: [target]是文件也一样
touch file
ln -sf ../file ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test/ 没有变化
ll ttt/*
显示 ttt/file -> ../file


case5: 修改[folder-symlink]指向另一个folder
ln -sfn test1 ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test1/  已经修改了symlink，比较case1的不同


case6: 修改[folder-symlink]指向一个文件
ln -sfn file ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> file 现在 symlink 指向了文件


case7:
如果要修改的[symlink]指向的是一个文件，那么ln -sf 和ln -sfn 效果是一样的，不过带-n选项更通用
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> file
ln -sf test ttt
ll ttt  == ls -l ttt 查看现在软链接指向哪里
显示 ttt -> test/  symlink修改成功了

```

---

# lightdm for sunlogin

实际上安装了lightdm-gtk-greeter会导致显示很不爽，丢失默认配置

```
$ sudo apt remove gnome-themes-standard lightdm-gtk-greeter
```

/etc/lightdm/lightdm.conf

```
[SeatDefaults]
greeter-setup-script=xhost +
```

备份(/INSTALL/lightdm/)后删掉

```
sudo rm /etc/lightdm/lightdm.conf.d/91-arctica-greeter-mate.conf
sudo rm /etc/lightdm/lightdm-gtk-greeter.conf
```

## gdm3登陆器有关设置[未验证]

/etc/gdm3/Init/Default添加一行 xhost + 到头部

```
#!/bin/sh
# Stolen from the debian kdm setup, aren't I sneaky
# Plus a lot of fun stuff added
#  -George

PATH="/usr/bin:$PATH"
OLD_IFS=$IFS

xhost +
......
```

/etc/gdm3/custom.conf

```
# GDM configuration storage
#
# See /usr/share/gdm/gdm.schemas for a list of available options.

[daemon]
# Uncoment the line below to force the login screen to use Xorg
WaylandEnable=false

# Enabling automatic login
#  AutomaticLoginEnable = true
#  AutomaticLogin = user1

# Enabling timed login
#  TimedLoginEnable = true
#  TimedLogin = user1
#  TimedLoginDelay = 10

[security]
DisallowTCP=false

[xdmcp]
Enable=true
DisplaysPerHost=10 

[chooser]

[debug]
# Uncomment the line below to turn on debugging
# More verbose logs
# Additionally lets the X server dump core if it crashes
#Enable=true
```

## 配置 ssh

```
/etc/ssh/ssh_config
ForwardX11 yes
ForwardX11Trusted yes
# systemctl restart sshd
```

---

# 莫名错误

```
sudo apt update -y
...
E: Problem executing scripts APT::Update::Post-Invoke-Success 'if /usr/bin/test -w /var/lib/command-not-found/ -a -e /usr/lib/cnf-update-db; then /usr/lib/cnf-update-db > /dev/null; fi'
E: Sub-process returned an error code
```

```
sudo killall -KILL apt.systemd.daily
sudo mv /etc/apt/apt.conf.d/50appstream /etc/apt/apt.conf.d/50appstream.disable
sudo apt update -y  [still has error]
sudo apt upgrade -y
sudo mv /etc/apt/apt.conf.d/50appstream.disable /etc/apt/apt.conf.d/50appstream
sudo apt update -y
```

```
sudo apt-get clean
sudo apt-get update

```

最后 重启大法好

---

# Install KVM on Linux

[https://developer.android.com/studio/run/emulator-acceleration?utm_source=android-studio#vm-linux](https://developer.android.com/studio/run/emulator-acceleration?utm_source=android-studio#vm-linux)
[https://help.ubuntu.com/community/KVM/Installation](https://help.ubuntu.com/community/KVM/Installation)

```
$ sudo apt-get install cpu-checker
The following NEW packages will be installed:
  cpu-checker msr-tools
$ egrep -c '(vmx|svm)' /proc/cpuinfo
$ kvm-ok
INFO: /dev/kvm exists
KVM acceleration can be used
$ sudo apt-get install qemu-kvm libvirt-daemon-system libvirt-clients bridge-utils
Suggested packages:
  libvirt-login-shell libvirt-daemon-driver-storage-gluster
  libvirt-daemon-driver-storage-iscsi-direct libvirt-daemon-driver-storage-rbd
  libvirt-daemon-driver-storage-zfs libvirt-daemon-driver-lxc
  libvirt-daemon-driver-vbox libvirt-daemon-driver-xen numad auditd open-iscsi
  pm-utils systemtap zfsutils vde2 trousers
The following NEW packages will be installed:
  bridge-utils dmeventd ipxe-qemu ipxe-qemu-256k-compat-efi-roms libaio1
  libcacard0 libdaxctl1 libdevmapper-event1.02.1 libiscsi7 liblvm2cmd2.03
  libndctl6 libnss-mymachines libpmem1 libpmemobj1 librbd1 libslirp0
  libspice-server1 libtpms0 libusbredirparser1 libvirglrenderer1
  libvirt-clients libvirt-daemon libvirt-daemon-config-network
  libvirt-daemon-config-nwfilter libvirt-daemon-driver-qemu
  libvirt-daemon-system libvirt-daemon-system-systemd libvirt0 lvm2 mdevctl
  ovmf qemu-block-extra qemu-system-common qemu-system-data qemu-system-gui
  qemu-system-x86 qemu-utils seabios swtpm swtpm-tools systemd-container
  thin-provisioning-tools

```

---

# genymotion

```
sudo ./genymotion-3.5.0-linux_x64.bin -d /opt/

Installing for all users.

Installing to folder [/opt/genymotion]. Are you sure [y/n] ? y


- Extracting files ..................................... OK (Extract into: [/opt/genymotion])
- Installing launcher icon ............................. OK

Installation done successfully.

You can now use these tools from [/opt/genymotion]:
 - genymotion
 - genymotion-shell
 - gmtool

```

```
cd /usr/local/bin
sudo gedit genymotion
```

```
#!/bin/bash
/opt/genymotion/genymotion
```

```
sudo chmod +x genymotion
```

---

# 安装 qt5serialport5

```
sudo apt-get install libqt5serialport5 libqt5serialport5-dev
```

---

# faketime

```
sudo apt install faketime

The following NEW packages will be installed:
  faketime libfaketim
```

---

# 创建 一些 dmenu 启动器

```
cd /usr/local/bin
sudo gedit uex
```

```
#!/bin/bash
rm ${HOME}/.idm/*.spl
rm /tmp/*.spl
rm ${HOME}/.idm/uex/*.spl
cd /opt/uex/bin
./uex
```

```
sudo chmod +x uex
```

```
cd /usr/local/bin
sudo gedit uex4
```

```
#!/bin/bash
rm ${HOME}/.idm/*.spl
rm /tmp/*.spl
rm ${HOME}/.idm/uex/*.spl
cd /opt/uex4/bin
./uex
```

```
sudo chmod +x uex4
```

```
$ sudo gedit /usr/bin/bcompare
```

```
rm "${HOME}/.config/bcompare/registry.dat"
```

```
cd /usr/local/bin
sudo gedit pycharm
```

```
#!/bin/bash
/opt/pycharm-professional/bin/pycharm.sh
```

```
sudo chmod +x pycharm
```

```
cd /usr/local/bin
sudo gedit android-studio
```

```
#!/bin/bash
/opt/android-studio/bin/studio.sh
```

```
sudo chmod +x android-studio
```

```
cd /usr/local/bin
sudo gedit baidunetdisk
```

```
#!/bin/bash
/opt/baidunetdisk/baidunetdisk  --no-sandbox %U
```

```
sudo chmod +x baidunetdisk
```

```
cd /usr/local/bin
sudo gedit genymotion
```

```
#!/bin/bash
/opt/genymotion/genymotion/genymotion
```

```
sudo chmod +x genymotion
```

```
cd /usr/local/bin
sudo gedit electronic-wechat
```

```
#!/bin/bash
/opt/electronic-wechat-linux-x64/electronic-wechat
```

```
sudo chmod +x electronic-wechat
```

```
cd /usr/local/bin
sudo gedit vivado
```

```
#!/bin/bash
/opt/Xilinx/Vivado/2020.1/bin/vivado
```

```
sudo chmod +x vivado
```

```
cd /usr/local/bin
sudo gedit vitis
```

```
#!/bin/bash
/opt/Xilinx/Vitis/2020.1/bin/vitis 
```

```
sudo chmod +x vitis
```

```
cd /usr/local/bin
sudo gedit eagle
```

```
#!/bin/bash
cd /opt/eagle-8.1.0/
./eagle
```

```
sudo chmod +x eagle
```

```
cd /usr/local/bin
sudo gedit allegro
```

```
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/pcb/bin/allegro
```

```
sudo chmod +x allegro
```

```
$ sudo apt install libxmu-dev:i386
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libice-dev:i386 libsm-dev:i386 libxext-dev:i386 libxmu-headers libxmu6:i386 libxt-dev:i386 libxt6:i386
Suggested packages:
  libice-doc:i386 libsm-doc:i386 libxext-doc:i386 libxt-doc:i386
The following NEW packages will be installed:
  libice-dev:i386 libsm-dev:i386 libxext-dev:i386 libxmu-dev:i386 libxmu-headers libxmu6:i386 libxt-dev:i386 libxt6:i386
```

还是不能运行

```
cd /usr/local/bin
sudo gedit concepthdl
```

```
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/bin/concepthdl
```

```
sudo chmod +x concepthdl
```

```
cd /usr/local/bin
sudo gedit pad_designer
```

```
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/pcb/bin/pad_designer
```

```
sudo chmod +x pad_designer
```

```
cd /usr/local/bin
sudo gedit projmgr
```

```
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/bin/projmgr
```

```
sudo chmod +x projmgr
```

# 一些包

```
sudo apt install qtcreator qtbase5-dev qt5-qmake cmake
sudo apt install libwebp-dev libgdk-pixbuf2.0-dev libgtk-3-dev meson build-essential lximage-qt
sudo apt install git libgtk2.0-dev libglib2.0-dev libgstreamer1.0-dev libjsoncpp-dev g++ make cmake
sudo apt install g++-multilib  g++-11-multilib libgirepository1.0-dev libglib2.0-doc libxml2-utils
sudo apt install libgraphite2-utils graphicsmagick dh-make enscript ffmpeg gimp gnuplot grads
sudo apt install graphviz mplayer povray parcellite shutter libqt5serialport5 libqt5serialport5-dev
```

---

# realvnc

```
sudo dpkg -i VNC-Server-xxx-Linux-x64.deb
sudo systemctl start vncserver-x11-serviced.service
#sudo systemctl enable vncserver-virtuald.service
sudo systemctl enable vncserver-x11-serviced.service

sudo apt install xserver-xorg-video-dummy
sudo vncinitconfig -enable-system-xorg
```

---

# smartmontools

```
sudo apt install smartmontools gddrescue

Suggested packages:
  gsmartcontrol smart-notifier ddrescueview
  
  
sudo smartctl -a /dev/sdf2
sudo ddrescue -f -v /dev/sdb /dev/sdc
```

---

# re-mount as rw

```
$ sudo mount /dev/nvme0n1p3 -o rw,remount

for embedded device
# mount / -o rw,remount
```

---

# 安装 miniconda

```
$ bash Miniconda3-latest-Linux-x86_64.sh 

Welcome to Miniconda3 py312_24.1.2-0

In order to continue the installation process, please review the license
agreement.
Please, press ENTER to continue
>>> 
...

Do you accept the license terms? [yes|no]
>>> yes       

Miniconda3 will now be installed into this location:
/home/andy/miniconda3

  - Press ENTER to confirm the location
  - Press CTRL-C to abort the installation
  - Or specify a different location below

[/home/andy/miniconda3] >>> 
PREFIX=/home/andy/miniconda3
Unpacking payload ...
                                                                                                                                                                                                                 
Installing base environment...


Downloading and Extracting Packages:


Downloading and Extracting Packages:

Preparing transaction: done
Executing transaction: done
installation finished.
Do you wish to update your shell profile to automatically initialize conda?
This will activate conda on startup and change the command prompt when activated.
If you'd prefer that conda's base environment not be activated on startup,
   run the following command when conda is activated:

conda config --set auto_activate_base false

You can undo this by running `conda init --reverse $SHELL`? [yes|no]
[no] >>> no 

You have chosen to not have conda modify your shell scripts at all.
To activate conda's base environment in your current shell session:

eval "$(/home/andy/miniconda3/bin/conda shell.YOUR_SHELL_NAME hook)" 

To install conda's shell functions for easier access, first activate, then:

conda init

Thank you for installing Miniconda3!

andy@andy-usbstick:~/Downloads
$ source ~/miniconda3/bin/activate
(base) andy@andy-usbstick:~/Downloads
$ 

```

---

# ffmpeg hevc_qsv

```
$ sudo apt-get install libva-dev libmfx-dev intel-media-va-driver-non-free vainfo
[sudo] password for andy:  
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  intel-media-va-driver-non-free:i386 libset-scalar-perl libva-glx2
  libwayland-bin libwayland-dev
Suggested packages:
  libwayland-doc
The following packages will be REMOVED:
  intel-media-va-driver intel-media-va-driver:i386
The following NEW packages will be installed:
  intel-media-va-driver-non-free intel-media-va-driver-non-free:i386
  libmfx-dev libset-scalar-perl libva-dev libva-glx2 libwayland-bin
  libwayland-dev vainfo


sudo apt install -o APT::Get::Fix-Missing=true libva-dev libmfx-dev intel-media-va-driver-non-free vainfo libmfx-gen-dev libmfx-gen1.2 libmfx-tools libva-x11-2

sudo vainfo


for i in buildconf hwaccels decoders filters encoders; do echo $i:; ffmpeg -hide_banner -${i} | egrep -i "qsv|vaapi|libmfx"; done

ffmpeg -hwaccel qsv -i example.mp4 -c:v hevc_qsv -b:v 2000k output.mp4
```

```
$ sudo vainfo
[sudo] password for andy:  
error: XDG_RUNTIME_DIR not set in the environment.
libva info: VA-API version 1.14.0
libva info: Trying to open /usr/lib/x86_64-linux-gnu/dri/iHD_drv_video.so
libva info: Found init function __vaDriverInit_1_14
libva info: va_openDriver() returns 0
vainfo: VA-API version: 1.14 (libva 2.12.0)
vainfo: Driver version: Intel iHD driver for Intel(R) Gen Graphics - 22.3.1 ()
vainfo: Supported profile and entrypoints
      VAProfileNone                   :	VAEntrypointVideoProc
      VAProfileNone                   :	VAEntrypointStats
      VAProfileMPEG2Simple            :	VAEntrypointVLD
      VAProfileMPEG2Simple            :	VAEntrypointEncSlice
      VAProfileMPEG2Main              :	VAEntrypointVLD
      VAProfileMPEG2Main              :	VAEntrypointEncSlice
      VAProfileH264Main               :	VAEntrypointVLD
      VAProfileH264Main               :	VAEntrypointEncSlice
      VAProfileH264Main               :	VAEntrypointFEI
      VAProfileH264Main               :	VAEntrypointEncSliceLP
      VAProfileH264High               :	VAEntrypointVLD
      VAProfileH264High               :	VAEntrypointEncSlice
      VAProfileH264High               :	VAEntrypointFEI
      VAProfileH264High               :	VAEntrypointEncSliceLP
      VAProfileVC1Simple              :	VAEntrypointVLD
      VAProfileVC1Main                :	VAEntrypointVLD
      VAProfileVC1Advanced            :	VAEntrypointVLD
      VAProfileJPEGBaseline           :	VAEntrypointVLD
      VAProfileJPEGBaseline           :	VAEntrypointEncPicture
      VAProfileH264ConstrainedBaseline:	VAEntrypointVLD
      VAProfileH264ConstrainedBaseline:	VAEntrypointEncSlice
      VAProfileH264ConstrainedBaseline:	VAEntrypointFEI
      VAProfileH264ConstrainedBaseline:	VAEntrypointEncSliceLP
      VAProfileHEVCMain               :	VAEntrypointVLD
      VAProfileHEVCMain               :	VAEntrypointEncSlice
      VAProfileHEVCMain               :	VAEntrypointFEI
      VAProfileHEVCMain               :	VAEntrypointEncSliceLP
      VAProfileHEVCMain10             :	VAEntrypointVLD
      VAProfileHEVCMain10             :	VAEntrypointEncSlice
      VAProfileHEVCMain10             :	VAEntrypointEncSliceLP
      VAProfileVP9Profile0            :	VAEntrypointVLD
      VAProfileVP9Profile0            :	VAEntrypointEncSliceLP
      VAProfileVP9Profile1            :	VAEntrypointVLD
      VAProfileVP9Profile1            :	VAEntrypointEncSliceLP
      VAProfileVP9Profile2            :	VAEntrypointVLD
      VAProfileVP9Profile2            :	VAEntrypointEncSliceLP
      VAProfileVP9Profile3            :	VAEntrypointVLD
      VAProfileVP9Profile3            :	VAEntrypointEncSliceLP
      VAProfileHEVCMain12             :	VAEntrypointVLD
      VAProfileHEVCMain12             :	VAEntrypointEncSlice
      VAProfileHEVCMain422_10         :	VAEntrypointVLD
      VAProfileHEVCMain422_10         :	VAEntrypointEncSlice
      VAProfileHEVCMain422_12         :	VAEntrypointVLD
      VAProfileHEVCMain422_12         :	VAEntrypointEncSlice
      VAProfileHEVCMain444            :	VAEntrypointVLD
      VAProfileHEVCMain444            :	VAEntrypointEncSliceLP
      VAProfileHEVCMain444_10         :	VAEntrypointVLD
      VAProfileHEVCMain444_10         :	VAEntrypointEncSliceLP
      VAProfileHEVCMain444_12         :	VAEntrypointVLD
      VAProfileHEVCSccMain            :	VAEntrypointVLD
      VAProfileHEVCSccMain            :	VAEntrypointEncSliceLP
      VAProfileHEVCSccMain10          :	VAEntrypointVLD
      VAProfileHEVCSccMain10          :	VAEntrypointEncSliceLP
      VAProfileHEVCSccMain444         :	VAEntrypointVLD
      VAProfileHEVCSccMain444         :	VAEntrypointEncSliceLP
      VAProfileAV1Profile0            :	VAEntrypointVLD
      VAProfileHEVCSccMain444_10      :	VAEntrypointVLD
      VAProfileHEVCSccMain444_10      :	VAEntrypointEncSliceLP

```

[https://ubuntuhandbook.org/index.php/2024/04/ffmpeg-7-0-ppa-ubuntu/](https://ubuntuhandbook.org/index.php/2024/04/ffmpeg-7-0-ppa-ubuntu/)

安装最新的 ffmpeg 6.1（libva: This version of libva doesn't support retrieving the device information from the driver. Please consider to upgrade libva to support VA-API 1.15.0）
[https://launchpad.net/~ubuntuhandbook1/+archive/ubuntu/ffmpeg6](https://launchpad.net/~ubuntuhandbook1/+archive/ubuntu/ffmpeg6)
依赖关系无法解决

/etc/apt/sources.lis

```
deb https://ppa.launchpadcontent.net/ubuntuhandbook1/ffmpeg6/ubuntu jammy main 
deb-src https://ppa.launchpadcontent.net/ubuntuhandbook1/ffmpeg6/ubuntu jammy main 
```

```
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys  4C1CBE14852541CB

gpg --keyserver hkp://keyserver.ubuntu.com:80 --recv-keys  4C1CBE14852541CB
sudo gpg --armor --export 4C1CBE14852541CB | sudo apt-key add -
sudo gpg -a --export 4C1CBE14852541CB | sudo apt-key add -
```

always: gpg: keyserver receive failed: Server indicated a failure

```
wget https://keyserver.ubuntu.com/pks/lookup?op=get&search=0xa0062203196ca4482ddb859e4c1cbe14852541cb  或者浏览器下载pubkey为 armored-keys.asc
sudo apt-key add armored-keys.asc
```

就可以解决 keyserver 无法连接问题

对keyserver使用代理

```
--keyserver-option http-proxy=http://<account>:<password>@proxy server:port
sudo apt-key adv --keyserver hkp://keyserver.ubuntu.com:80 --keyserver-option http-proxy=http://x:y@proxy:port --recv-keys 36A1D7869245C8950F966E92D8576A8BA88D21E9
```

```
$ sudo apt update
$ sudo apt-get -c ~/apt_proxy_conf install ffmpeg
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libavcodec60 libavdevice60 libavfilter9 libavformat60 libavutil58 libcjson1 libdav1d6 libhwy1 libjxl0.7 liblcms2-2 liblcms2-2:i386 libpostproc57 librist4 libsvtav1enc1 libswresample4 libswscale7 libvidstab1.2 libvpl2
Suggested packages:
  ffmpeg-doc libcuda1 libnvcuvid1 libnvidia-encode1
The following NEW packages will be installed:
  libavcodec60 libavdevice60 libavfilter9 libavformat60 libavutil58 libcjson1 libdav1d6 libhwy1 libjxl0.7 libpostproc57 librist4 libsvtav1enc1 libswresample4 libswscale7 libvidstab1.2 libvpl2
The following packages will be upgraded:
  ffmpeg liblcms2-2 liblcms2-2:i386
  
  
转hevc_qsv报错  
libva: This version of libva doesn't support retrieving the device information from the driver. Please consider to upgrade libva to support VA-API 1.15.0
实际上机器的 VA-API 是 1.14.0
```

依赖关系无法解决。也不想用源码编译, 算啦官方仓库的4就够用了
[https://qiita.com/yamakenjp/items/c1c91669b00ea149e3ad](https://qiita.com/yamakenjp/items/c1c91669b00ea149e3ad)
[https://trac.ffmpeg.org/wiki/Hardware/QuickSync](https://trac.ffmpeg.org/wiki/Hardware/QuickSync)
[https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu](https://trac.ffmpeg.org/wiki/CompilationGuide/Ubuntu)

恢复

1.去掉source，然后sudo apt update

```
sudo apt-get -c ~/apt_proxy_conf update
$ apt-cache madison ffmpeg
    ffmpeg | 7:4.4.2-0ubuntu0.22.04.1 | http://mirrors.cqu.edu.cn/ubuntu jammy-updates/universe amd64 Packages
    ffmpeg | 7:4.4.2-0ubuntu0.22.04.1 | http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages
    ffmpeg | 7:4.4.1-3ubuntu5 | http://mirrors.cqu.edu.cn/ubuntu jammy/universe amd64 Packages
andy@andy-usbstick:~/Downloads/qsv
$ sudo apt-get install ffmpeg=7:4.4.2-0ubuntu0.22.04.1
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following packages were automatically installed and are no longer required:
  libavcodec60 libavdevice60 libavfilter9 libavformat60 libavutil58 libcjson1 libdav1d6 libhwy1 libjxl0.7 libpostproc57 librist4 libsvtav1enc1 libswresample4 libswscale7 libvidstab1.2 libvpl2
Use 'sudo apt autoremove' to remove them.
Suggested packages:
  ffmpeg-doc
The following packages will be DOWNGRADED:
  ffmpeg
  
$ sudo apt autoremove
```

安装 mediainfo

```
$ sudo apt install mediainfo
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libmediainfo0v5 libmms0 libtinyxml2-9 libzen0v5
Suggested packages:
  mediainfo-gui
The following NEW packages will be installed:
  libmediainfo0v5 libmms0 libtinyxml2-9 libzen0v5 mediainfo
0 upgraded, 5 newly installed, 0 to remove and 209 not upgraded.

$ mediainfo example.mp4
```

---

# docker安装ubuntu1804 (abort)

docker pull ubuntu:18.04

```
FROM ubuntu:18.04

#MAINTAINER Andreas Zhang <yxgi5@163.com>

RUN apt update && apt install -y \
  wget \
  build-essential \
  libglib2.0-0 \
  libsm6 \
  libxi6 \
  libxrender1 \
  libxrandr2 \
  libfreetype6 \
  libfontconfig \
  git

# COPY install_config.txt /
# ARG xxx
# RUN xxx
RUN apt update \
    &&  apt -y upgrade \
    && DEBIAN_FRONTEND=noninteractive apt install -y build-essential default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* \
    && df -ih \
    && mkdir -p /opt \
    && df -ih \
    && rm -rf /tmp/.X* \
    && mkdir -p /home/andy/.vnc \
    && useradd -ms /bin/bash andy \
    && chown -R andy /home/andy
USER andy
WORKDIR /home/andy

RUN adduser --disabled-password --gecos '' andy
USER andy
WORKDIR /home/andy
# RUN echo "source /opt/Xilinx/Vivado/${VIVADO_VERSION}/settings64.sh" >> /home/andy/.profile

#RUN mkdir /home/andy/.Xilinx
#COPY Xilinx.lic /home/andy/.Xilinx/

ENV DISPLAY :0
ENV GEOMETRY 1920x1080

#ENTRYPOINT ["/opt/entrypoint.sh"]

```

Dockerfile

```
FROM ubuntu:18.04

MAINTAINER Andreas Zhang <yxgi5@163.com>

RUN apt update && apt install -y \
  wget \
  build-essential \
  libglib2.0-0 \
  libsm6 \
  libxi6 \
  libxrender1 \
  libxrandr2 \
  libfreetype6 \
  libfontconfig \
  git
  
RUN DEBIAN_FRONTEND=noninteractive apt install -y build-essential default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo

RUN apt clean


#RUN useradd -ms /bin/bash andy
#RUN chown -R andy /home/andy
RUN adduser --disabled-password --gecos '' andy
USER andy
WORKDIR /home/andy
RUN mkdir -p /home/andy/.vnc

ENV DISPLAY :0
ENV GEOMETRY 1920x1080
#ENTRYPOINT ["/opt/entrypoint.sh"]

```

```
docker build -t  ubuntu1804:initial .
docker rm ubuntu1804_install
docker run -ti -p 5900:5900 --name ubuntu1804_install ubuntu1804:initial # Install with GUI on VNC
docker commit ubuntu1804_install ubuntu1804:installed
```

Dockerfile

```
FROM vivado:installed

#RUN apt install -y build-essential libxrender-dev libxtst-dev vnc4server twm
RUN rm -rf /tmp/.X*

#RUN useradd -ms /bin/bash andy
#USER andy
#WORKDIR /home/andy

RUN mkdir -p /home/andy/.vnc
ADD files/xstartup /home/andy/.vnc/xstartup
ADD files/entrypoint.sh /opt/entrypoint.sh

```

no password

```

sudo systemctl stop docker.service 
sudo systemctl start docker.service 
docker container rm ubuntu1804_install
docker image rm ubuntu1804:initial
```

```
FROM ubuntu:18.04

MAINTAINER Andreas Zhang <yxgi5@163.com>

RUN apt update && apt install -y \
  wget \
  build-essential \
  libglib2.0-0 \
  libsm6 \
  libxi6 \
  libxrender1 \
  libxrandr2 \
  libfreetype6 \
  libfontconfig \
  git
  
RUN DEBIAN_FRONTEND=noninteractive apt install -y build-essential default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo

RUN apt clean
```

```
docker build -t  ubuntu1804:initial .
docker run -ti --name ubuntu1804_install ubuntu1804:initial
```

```
# apt install -y lsb-release xvfb x11-utils dbus-x11 rlwrap locales libtinfo5 aptitude git make net-tools libncurses5-dev tftpd zlib1g-dev libssl-dev flex bison libselinux1 gnupg wget diffstat chrpath socat xterm autoconf libtool tar unzip texinfo zlib1g-dev gcc-multilib build-essential libsdl1.2-dev libglib2.0-dev screen pax gzip libboost-dev libboost-tools-dev libboost-timer-dev libcoinutils-dev libboost-all-dev libgtk-3-dev gtk3-nocsd libgtk2.0
# apt clean

# dpkg-reconfigure tzdata 
> choose 6 19
# dpkg-reconfigure locales
> choose en_US.UTF-8 UTF-8 158 3
# dpkg-reconfigure dash
> choose no
```

```
docker commit ubuntu1804_install ubuntu1804:base

docker run -ti -p 5900:5900 --name ubuntu1804_install ubuntu1804:initial # Install with GUI on VNC

docker commit ubuntu1804_install ubuntu1804:installed

docker image tag ubuntu1804:installed ubuntu1804:base

docker image rm ubuntu1804:installed

docker container rename ubuntu1804_install ubuntu1804_base
```

从镜像产生容器并运行一次

```
docker run -ti --name ubuntu1804_base ubuntu1804:base
```

运行容器

```
docker start ubuntu1804_base
```

进入容器

```
docker exec -it ubuntu1804_base /bin/bash
```

```
# passwd
# useradd -ms /bin/bash andy
# chown -R andy /home/andy
# passwd andy
```

```
docker commit ubuntu1804_base ubuntu1804:config
docker container rename ubuntu1804_base ubuntu1804_config
docker container stop ubuntu1804_config
docker container rm ubuntu1804_config
```

```
FROM ubuntu1804:config

USER andy
WORKDIR /home/andy
```

```
docker build -t  ubuntu1804:config1 .
docker run -ti --name ubuntu1804_config1 ubuntu1804:config1
```

```
$ vncserver -geometry 1920x1080 :0
Password:123456

$ rm ~/.vnc/*.log

$ su
# cat /etc/sudoers
# usermod -aG adm andy
# newgrp adm
# exit
$ exit
```

```
docker start ubuntu1804_config1
docker exec -it ubuntu1804_config1 /bin/bash
```

```
$ su
# cat /etc/group | grep sudo
# usermod -aG sudo andy
# newgrp sudo
```

```
docker stop ubuntu1804_config1
docker start ubuntu1804_config1
docker exec -it ubuntu1804_config1 /bin/bash
```

```
$ sudo cat /etc/sudoers
```

sudo ok

```
docker commit ubuntu1804_config1 ubuntu1804:config2
docker container rename ubuntu1804_config1 ubuntu1804_config2
docker exec -it ubuntu1804_config2 /bin/bash
```

```
$ sudo apt install pcmanfm lxterminal leafpad
$ rm -rf /tmp/.X*
$ vncserver -geometry 1920x1080 :0

ref:
vncserver -kill :1
vncserver :1 -geometry 1920x1080

$ sudo apt install openssh-server
$ su
# service ssh start
```

这样其实就可以访问了的

```
docker stop ubuntu1804_config2
docker start ubuntu1804_config2
docker exec -it ubuntu1804_config2 /bin/bash
```

又需要手动开启sshd

```
docker stop ubuntu1804_config2
docker start ubuntu1804_config2
docker exec -it ubuntu1804_config2 /bin/bash
```

```
$ rm -rf /tmp/.X*
$ exit
```

```
docker stop ubuntu1804_config2
docker commit ubuntu1804_config2 ubuntu1804:config3
docker container rename ubuntu1804_config2 ubuntu1804_config3
```

```
FROM ubuntu1804:config3

USER root
#Allow Root login
RUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' \
    /etc/ssh/sshd_config

#SSH login fix
RUN sed 's@session\s*required\s*pam_loginuid.so@session optional \
    pam_loginuid.so@g' -i /etc/pam.d/sshd

#expose port 22
EXPOSE 22
#RUN service ssh start

#Commands to be executed by default
CMD ["/usr/sbin/sshd","-D"]
#CMD service ssh start
```

```
docker build -t  ubuntu1804:config4 .
docker container rm ubuntu1804_config3
docker run -d -ti --name ubuntu1804_config4 ubuntu1804:config4   后台运行
==
docker run -ti --name ubuntu1804_config4 ubuntu1804:config4
docker stop ubuntu1804_config2   另外终端窗口运行
docker start ubuntu1804_config4
```

then

```
docker exec -it ubuntu1804_config4 /bin/bash
```

```
docker container stop ubuntu1804_config4
docker commit ubuntu1804_config4 ubuntu1804:config5
```

```
FROM ubuntu1804:config5

USER andy

```

```
docker build -t  ubuntu1804:config6 .
docker run -ti --name ubuntu1804_config6 ubuntu1804:config6
```

```
FROM ubuntu1804:config3

USER root

#Allow Root login
RUN sed -i 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' \
    /etc/ssh/sshd_config

#SSH login fix
RUN sed 's@session\s*required\s*pam_loginuid.so@session optional \
    pam_loginuid.so@g' -i /etc/pam.d/sshd

#expose port 22
EXPOSE 22

#RUN service ssh start
USER andy
```

```
docker build -t  ubuntu1804:config4 .
docker run -ti --name ubuntu1804_config4 ubuntu1804:config4
//docker run -itd --privileged  --name ubuntu1804_config4 ubuntu1804:config4 /usr/sbin/init
```

ref

```
docker image pull  ubuntu:20.04
docker container run -it -d --name test-ubuntu20-4 ubuntu:20.04
docker attach test-ubuntu20-4
docker container run -it -d --privileged --name webgis-server ubuntu:20.04 /sbin/init
docker container run -it -d --privileged --name webgis-server ubuntu:20.04 /lib/systemd/systemd
```

## openbox 风格桌面环境配置及一些必要设置

```
sudo apt install xinit openbox menu libxml2-dev tint2 openbox-menu openbox-gnome-session pkg-config menu-l10n lxdm obmenu feh dmenu fonts-dejavu
sudo apt install lxappearance pcmanfm libfm-tools lxterminal leafpad
sudo apt install libgtk2.0-dev libpango-perl libpango1.0-dev
```

### 安装配置 obmenu-generator

```
sudo apt install build-essential cpanminus git
sudo cpan install YAML Gtk2 Pango Linux::DesktopFiles Data::Dump

git clone git://github.com/trizen/obmenu-generator
sudo cp obmenu-generator/obmenu-generator /usr/bin
mkdir ~/.config/obmenu-generator/
sudo cp -r obmenu-generator/schema.pl ~/.config/obmenu-generator/

sudo cpanm Linux::DesktopFiles
sudo cpanm Data::Dump

sudo chmod 777 /usr/bin/obmenu-generator 

obmenu-generator -i
```

```
vncserver -kill :0
vncserver :0 -geometry 1920x1080
```

配置好基本的

```
docker container stop ubuntu1804_config4
docker commit ubuntu1804_config4 ubuntu1804:config5
docker container rm ubuntu1804_config4
```

```
FROM ubuntu1804:config5

USER root
ADD files/entrypoint.sh /opt/entrypoint.sh

#ENV GEOMETRY 1024x768
CMD ["/opt/entrypoint.sh"]

USER andy
```

entrypoint.sh

```
#!/bin/bash

echo a | sudo -S service ssh start

rm -rf /tmp/.X*
rm -rf /home/andy/.vnc/*.log
rm -rf /home/andy/.vnc/*.pid
vncserver -geometry 1920x1080 :0

/bin/sh -c /bin/bash
```

```
docker build -t  ubuntu1804:config6 .
docker run -ti --name ubuntu1804_config6 ubuntu1804:config6


docker exec -it ubuntu1804_config6 /bin/bash

//docker run -ti --name ubuntu1804_config6 ubuntu1804:config6  /bin/bash

//docker run -ti --restart=always --name ubuntu1804_config6 ubuntu1804:config6


docker container stop ubuntu1804_config6
docker commit ubuntu1804_config6 ubuntu1804:config7
docker run -ti -v /opt/:/opt/ -v /home/andy/workdir:/home/andy/workdir  --name ubuntu1804_config7 ubuntu1804:config7
docker container start ubuntu1804_config7
docker exec -it ubuntu1804_config7 /bin/bash
```

```
sudo apt install ca-certificates vim blt build-essential default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo lsb-release xvfb x11-utils dbus-x11 rlwrap locales libtinfo5 aptitude git make net-tools libncurses5-dev tftpd zlib1g-dev libssl-dev flex bison libselinux1 gnupg wget diffstat chrpath socat xterm autoconf libtool tar unzip texinfo zlib1g-dev gcc-multilib build-essential libsdl1.2-dev libglib2.0-dev screen pax gzip libboost-dev libboost-tools-dev libboost-timer-dev libcoinutils-dev libboost-all-dev libgtk-3-dev gtk3-nocsd libgtk2.0

sudo apt install lib32asan4 lib32atomic1 lib32cilkrts5 lib32gcc-7-dev lib32gcc1 lib32gomp1 lib32itm1 lib32mpx2 lib32quadmath0 lib32stdc++6 lib32ubsan0 libasound2-dev libbison-dev libc6-dev-i386 libc6-dev-x32 libc6-i386 libc6-x32 libcaca-dev libfl-dev libfl2 libpulse-dev libslang2-dev libtext-unidecode-perl libtinfo-dev libx32asan4 libx32atomic1 libx32cilkrts5 libx32gcc-7-dev libx32gcc1 libx32gomp1 libx32itm1  libx32quadmath0 libx32stdc++6 libx32ubsan0 python3-astroid python3-gitdb python3-isort python3-lazy-object-proxy python3-logilab-common python3-mccabe python3-smmap python3-tk python3-wrapt tk8.6-blt2.5

sudo apt install gcc-7-multilib texinfo libncurses5-dev libapr1 libapr1-dev libaprutil1 libsctp-dev uuid-dev tcl

sudo apt install gcc-multilib libapr1 libapr1-dev libaprutil1 net-tools libc6-dev-i386 fonts-liberation graphviz libann0 libcdt5 libcgraph6 libgts-0.7-5 libgts-bin libgvc6 libgvpr2 liblab-gamut1 libpathplan4

sudo apt install blt gcc-multilib texinfo libncurses5-dev libapr1 libapr1-dev libaprutil1 libsctp-dev uuid-dev lib32atomic1 lib32gomp1 lib32itm1 lib32quadmath0 lib32stdc++6 libasound2-dev libbison-dev libc6-dev-i386 libc6-dev-x32 libc6-i386 libc6-x32 libcaca-dev libfl-dev libfl2 libpulse-dev libslang2-dev libtext-unidecode-perl libtinfo-dev libx32atomic1 libx32gomp1 libx32itm1  libx32quadmath0 libx32stdc++6 python3-astroid python3-gitdb python3-isort python3-lazy-object-proxy python3-logilab-common python3-mccabe python3-smmap python3-tk python3-wrapt tk8.6-blt2.5

sudo apt install libtinfo-dev libstdc++6:i386 libgtk2.0-0:i386 dpkg-dev:i386 libtinfo5 libncurses5 libgtk3-nocsd0

sudo /opt/Xilinx/.xinstall/Vitis_2020.1/scripts/installAIeDepLibs.sh
cd /opt/Xilinx/Vivado/2020.1/data/xicom/cable_drivers/lin64/install_script/install_drivers/
sudo ./install_drivers
```

```
docker pull ubuntu:bionic-20210325
docker run -ti --name ubuntu1804_test ubuntu:bionic-20210325
docker container start ubuntu1804_test
docker exec -it ubuntu1804_test /bin/bash
docker container stop ubuntu1804_test
docker commit ubuntu1804_test ubuntu:bionic-1
docker container rm ubuntu1804_test
docker run -ti -v /opt/:/opt/ -v /home/andy/workdir:/home/andy/workdir  --name ubuntu1804_test ubuntu:bionic-1
```

```
docker pull ubuntu:16.04
docker run -ti --name ubuntu1604_test ubuntu:16.04
apt update
apt install -y wget build-essential libglib2.0-0 libsm6 libxi6 libxrender1 libxrandr2 libfreetype6 libfontconfig git default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo
adduser andy
passwd
docker container stop ubuntu1604_test
docker commit ubuntu1604_test ubuntu:16.04-1
docker container rm ubuntu1604_test
docker run -ti -v /opt/:/opt/ -v /home/andy/workdir:/home/andy/workdir --name ubuntu1604_test ubuntu:16.04-1
docker container start ubuntu1604_test
docker exec -it ubuntu1604_test /bin/bash


docker pull ubuntu:18.04
docker run -ti --name ubuntu1804_test ubuntu:18.04
```

```
apt update
apt install -y wget build-essential libglib2.0-0 libsm6 libxi6 libxrender1 libxrandr2 libfreetype6 libfontconfig git default-jre xorg libxrender-dev libxtst-dev vnc4server twm wget pv vim sudo
apt install libtinfo-dev libtinfo5 libncurses5 libgtk3-nocsd0 rlwrap locales git make net-tools libncurses5-dev aptitude autoconf xterm libtool chrpath gnupg wget
apt install lsb-release xvfb x11-utils dbus-x11 libtinfo5 tftpd zlib1g-dev libssl-dev flex bison libselinux1 diffstat socat  tar unzip texinfo zlib1g-dev gcc-multilib libsdl1.2-dev libglib2.0-dev screen pax gzip libboost-dev libboost-tools-dev libboost-timer-dev libcoinutils-dev libboost-all-dev libgtk-3-dev gtk3-nocsd libgtk2.0
apt install fonts-liberation graphviz libann0 libapr1 libapr1-dev libaprutil1 libcdt5 libcgraph6 libgd3 libgts-0.7-5 libgts-bin libgvc6 libgvpr2 liblab-gamut1 libpathplan4 libsctp-dev libsctp1 uuid-dev
apt install lsb ksh lsb-core
dpkg-reconfigure dash      [no]
adduser andy
passwd
```

```
docker container stop ubuntu1804_test
docker commit ubuntu1804_test ubuntu:18.04-1
docker container rm ubuntu1804_test
docker run -ti -v /opt/:/opt/ -v /home/andy/workdir:/home/andy/workdir --name ubuntu1804_test ubuntu:18.04-1
docker container start ubuntu1804_test
docker exec -it ubuntu1804_test /bin/bash
```

---

# caesium-image-compressor

```
sudo apt-get install cargo
sudo apt-get install libxcb-xkb-dev libxkbcommon-dev libqt6svg6-dev libqt6svg6 libqt6svgwidgets6 qt6-l10n-tools qt6-tools-dev-tools qt6-base-dev qt6-tools-dev
```

实际上用AppImage版本就好, 需要 chmod +x
[https://github.com/larygwil/caesium-image-compressor](https://github.com/larygwil/caesium-image-compressor)

官方仓库
[https://github.com/Lymphatus/caesium-image-compressor](https://github.com/Lymphatus/caesium-image-compressor)
[https://github.com/Lymphatus/caesium-clt](https://github.com/Lymphatus/caesium-clt)
[https://github.com/Lymphatus/libcaesium](https://github.com/Lymphatus/libcaesium)

libcaesium 编译需要修改 Cargo.toml 里的 webp 到 0.3.0

caesium-image-compressor 编译其实也需要修改 Cargo.toml 里的 webp 到 0.3.0

Caesium 1.7 用 wine 比较容易运行

```
env LANG=zh_CN.UTF-8 WINEPREFIX="/home/andy/.wine" wine Caesium.exe
```

caesium-image-compressor-2.5.1-win/caesium-image-compressor-2.6.0-win 用 wine 很可能出错，vostro PC 的u1804 wine成功，laptop的u2204 wine 失败

```
env LANG=zh_CN.UTF-8 WINEARCH=win64 WINEPREFIX="/home/andy/.wine" wine Caesium\ Image\ Compressor.exe
```

尝试修改wine环境组件也还不行

```
env LANG=zh_CN.UTF-8 WINEPREFIX="/home/andy/.wine" WINEARCH=win64 winetricks -q comctl32ocx comdlg32ocx comctl32
```

## 编译库及 clt版本 需要安装 cargo

```
$ sudo apt-get install cargo
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libstd-rust-1.75 libstd-rust-dev rustc
Suggested packages:
  cargo-doc llvm-17 lld-17 clang-17
The following NEW packages will be installed:
  cargo libstd-rust-1.75 libstd-rust-dev rustc
```

## caesium-clt 的编译

```
cargo build --release
```

```
caesiumclt --help
 0.19.1
CaesiumCLT - Command Line Tools for image compression

USAGE:
    caesiumclt [FLAGS] [OPTIONS] --output <output> --quality <quality> [FILE]...

FLAGS:
    -d, --dry-run           do not compress files but just show output paths
    -e, --exif              keeps EXIF info during compression
    -h, --help              Prints help information
    -S, --keep-structure    keep the folder structure, can be used only with -R
    -Q, --quiet             suppress all output
    -R, --recursive         if input is a folder, scan subfolders too
    -V, --version           Prints version information
        --zopfli            use zopfli when optimizing PNG files (it may take a very long time to complete)

OPTIONS:
        --height <height>          height of the output image, if width is not set will preserve aspect ratio [default:
                                   0]
    -o, --output <output>          output folder
    -O, --overwrite <overwrite>    overwrite policy [default: all]
    -q, --quality <quality>        sets output file quality between [0-100], 0 for optimization
        --threads <threads>        specify the number of parallel jobs (max is the number of processors available)
                                   [default: 0]
        --verbose <verbose>        select how much output you want to see, 0 is equal to -Q, --quiet [default: 1]
        --width <width>            width of the output image, if height is not set will preserve aspect ratio [default:
                                   0]

ARGS:
    <FILE>...    Files to process
```

编译过程报错处理记录

```
-- Could NOT find XKB (missing: XKB_LIBRARY XKB_INCLUDE_DIR) (Required is at least version "0.5.0")			--> libxkbcommon-dev
-- Could NOT find Qt6Svg (missing: Qt6Svg_DIR)				--> libqt6svg6-dev
"/usr/lib/qt6/bin/lconvert"  does not exist				--> qt6-l10n-tools
"/usr/lib/qt6/libexec/lprodump" does not exist				--> qt6-tools-dev-tools
```

```
sudo apt install libxcb-xkb-dev libxkbcommon-dev libqt6svg6-dev libqt6svg6 libqt6svgwidgets6 qt6-l10n-tools qt6-tools-dev-tools qt6-base-dev qt6-tools-dev

sudo apt install -y qtcreator qtbase5-dev qt5-qmake cmake
```

## caesium-image-compressor 的编译

```
cmake -B build -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake
cmake --build build --config Release --target caesium_image_compressor
```

```
cmake -B build -DCMAKE_PREFIX_PATH=/usr/lib/x86_64-linux-gnu/cmake -DCMAKE_VERBOSE_MAKEFILE=ON
make VERBOSE=1
```

报错

```
/caesium-image-compressor/src/main.cpp:41:41: error: ‘class QStyleHints’ has no member named ‘colorScheme’
   41 |         if (QApplication::styleHints()->colorScheme() == Qt::ColorScheme::Dark) {
```

qt版本必须大于6.5才行

---

# try to run openpilot on PC (abort)

```
sudo apt install autoconf \
    build-essential \
    ca-certificates \
    casync \
    clang \
    cmake \
    make \
    cppcheck \
    libtool \
    gcc-arm-none-eabi \
    bzip2 \
    liblzma-dev \
    libarchive-dev \
    libbz2-dev \
    capnproto \
    libcapnp-dev \
    curl \
    libcurl4-openssl-dev \
    git \
    git-lfs \
    ffmpeg \
    libavformat-dev \
    libavcodec-dev \
    libavdevice-dev \
    libavutil-dev \
    libavfilter-dev \
    libeigen3-dev \
    libffi-dev \
    libglew-dev \
    libgles2-mesa-dev \
    libglfw3-dev \
    libglib2.0-0 \
    libncurses5-dev \
    libncursesw5-dev \
    libomp-dev \
    libopencv-dev \
    libpng16-16 \
    libportaudio2 \
    libssl-dev \
    libsqlite3-dev \
    libusb-1.0-0-dev \
    libzmq3-dev \
    libsystemd-dev \
    locales \
    opencl-headers \
    ocl-icd-libopencl1 \
    ocl-icd-opencl-dev \
    clinfo \
    portaudio19-dev \
    qml-module-qtquick2 \
    qtmultimedia5-dev \
    qtlocation5-dev \
    qtpositioning5-dev \
    qttools5-dev-tools \
    libqt5sql5-sqlite \
    libqt5svg5-dev \
    libqt5charts5-dev \
    libqt5x11extras5-dev \
    libreadline-dev \
    libdw1 \
    valgrind

The following additional packages will be installed:
  binutils-arm-none-eabi cmake-data cmake-qt-gui comerr-dev krb5-multidev libbsd-dev libcapnp-0.8.0 libgssrpc4 libkadm5clnt-mit12 libkadm5srv-mit12 libkdb5-10 libkrb5-dev libmd-dev libnewlib-arm-none-eabi
  libnewlib-dev libnorm-dev libnss-mymachines libnss-systemd libomp-14-dev libomp5-14 libpam-systemd libpgm-dev libportaudiocpp0 libpostproc-dev libqt5charts5 libqt5location5 libqt5location5-plugin-mapboxgl
  libqt5location5-plugins libsodium-dev libssl3 libssl3:i386 libstdc++-arm-none-eabi-dev libstdc++-arm-none-eabi-newlib libsystemd0 libsystemd0:i386 libtinyxml2-9 opencl-c-headers opencl-clhpp-headers systemd
  systemd-container systemd-oomd systemd-sysv systemd-timesyncd
Suggested packages:
  cmake-doc cmake-format cppcheck-gui krb5-doc libcurl4-doc libidn11-dev libldap2-dev librtmp-dev libssh2-1-dev libeigen3-doc libmpfrc++-dev krb5-user libnewlib-doc libnorm-doc libomp-14-doc libssl-doc
  opencl-clhpp-headers-doc portaudio19-doc libtss2-rc0 valgrind-dbg valgrind-mpi kcachegrind alleyoop valkyrie
The following NEW packages will be installed:
  binutils-arm-none-eabi capnproto casync comerr-dev cppcheck gcc-arm-none-eabi krb5-multidev libavdevice-dev libavfilter-dev libbsd-dev libcapnp-0.8.0 libcapnp-dev libcurl4-openssl-dev libeigen3-dev
  libgles2-mesa-dev libgssrpc4 libkadm5clnt-mit12 libkadm5srv-mit12 libkdb5-10 libkrb5-dev libmd-dev libncursesw5-dev libnewlib-arm-none-eabi libnewlib-dev libnorm-dev libomp-14-dev libomp-dev libomp5-14
  libpgm-dev libportaudiocpp0 libpostproc-dev libqt5charts5 libqt5charts5-dev libqt5location5 libqt5location5-plugin-mapboxgl libqt5location5-plugins libsodium-dev libstdc++-arm-none-eabi-dev
  libstdc++-arm-none-eabi-newlib libsystemd-dev libtinyxml2-9 libzmq3-dev ocl-icd-opencl-dev opencl-c-headers opencl-clhpp-headers opencl-headers portaudio19-dev qtlocation5-dev valgrind
The following packages will be upgraded:
  cmake cmake-data cmake-qt-gui libnss-mymachines libnss-systemd libpam-systemd libssl-dev libssl3 libssl3:i386 libsystemd0 libsystemd0:i386 systemd systemd-container systemd-oomd systemd-sysv
  systemd-timesyncd



sudo apt install g++-12 \
    qtbase5-dev \
    qtchooser \
    qt5-qmake \
    qtbase5-dev-tools \
    python3-dev

The following additional packages will be installed:
  libstdc++-12-dev
Suggested packages:
  g++-12-multilib gcc-12-doc libstdc++-12-doc
The following NEW packages will be installed:
  g++-12 libstdc++-12-dev



sudo apt install binutils-arm-none-eabi gcc-arm-none-eabi libnewlib-arm-none-eabi libnewlib-dev libstdc++-arm-none-eabi-newlib libavcodec-dev libavdevice-dev libavfilter-dev libavformat-dev libavutil-dev libpostproc-dev libswresample-dev libswscale-dev libglfw3 libportaudiocpp0 libqt5charts5 libqt5location5 libqt5location5-plugins libvulkan-dev opencl-c-headers opencl-clhpp-headers capnproto casync clinfo cppcheck cppcheck-gui libcapnp-dev libeigen3-dev libglew-dev libglfw3-dev libqt5charts5-dev libsystemd-dev libzmq3-dev opencl-headers ocl-icd-opencl-dev qtlocation5-dev scons




Updating symlinks in /usr/lib/ccache   ??


```

---

# barcode and zint
```
sudo apt install barcode
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following NEW packages will be installed:
  barcode
0 upgraded, 1 newly installed, 0 to remove and 493 not upgraded.

sudo apt-get install zint zint-qt
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  libzint2.10
The following NEW packages will be installed:
  libzint2.10 zint zint-qt
0 upgraded, 3 newly installed, 0 to remove and 493 not upgraded.
Need to get 699 kB of archives.
After this operation, 1,683 kB of additional disk space will be used.
```

---

# 更新安装 v2ray

```
$ sudo systemctl stop v2ray.service

$ sudo systemctl disable v2ray.service

$ sudo rm /etc/v2ray/ -rf

$ sudo rm /usr/bin/v2ray/ -rf

$ sudo rm /var/log/v2ray/ -r
```

```
$ sudo dpkg -i v2ray_5.16.1-1_amd64.deb 
[sudo] password for andy: 
Selecting previously unselected package v2ray.
(Reading database ... 760353 files and directories currently installed.)
Preparing to unpack v2ray_5.16.1-1_amd64.deb ...
Unpacking v2ray (5.16.1-1) ...
Setting up v2ray (5.16.1-1) ...
```

## 使能服务 （如果需要才使能。后面有v2rayN 不使能就是）
```
$ sudo systemctl enable v2ray.service
Created symlink /etc/systemd/system/multi-user.target.wants/v2ray.service → /etc/systemd/system/v2ray.service.
```

## 更改配置文件

```
sudo gedit /etc/v2ray/config.json
sudo systemctl restart v2ray.service
```

---

# 安装 v2rayN

```
$ sudo dpkg -i v2rayN-linux-64.deb 
[sudo] password for andy: 
Selecting previously unselected package v2rayn.
(Reading database ... 760364 files and directories currently installed.)
Preparing to unpack v2rayN-linux-64.deb ...
Unpacking v2rayn (7.12.1) ...
Setting up v2rayn (7.12.1) ...
```

## 设置开机自启动（暂时不用）

```
sudo cp /usr/share/applications/v2rayN.desktop /etc/xdg/autostart/
```

## 俺的几个订阅和更新间隔

```
jgjs
https://jgjs-connect.com/api/v1/client/subscribe?token=99e80e349b3e105245ae76f956f0a7ed
1440

okgg
https://rss.okti.xyz/link/WCjq3wFyvk4DaoOZ?mu=2
1440

ssrsub
https://raw.githubusercontent.com/ssrsub/ssr/master/V2Ray

cloudflare
https://throbbing-scene-de78.denglitsch.workers.dev/202619.5
1440

CF
https://0430.denglitsch.dpdns.org/sub/normal/c29cba3b-6bb1-432b-9dc1-442d1c45d8b6#%F0%9F%92%A6%20BPB%20Normal
1440
```

## 配置文件默认位置在

```
/home/andy/.local/share/v2rayN
```

---

# 安装 ptree

```
sudo apt install adacontrol
```

```

```

---

# Xray and v2rayA

vless协议的代理应该使用支持xtls/vless协议的客户端服务，v2ray-core在某些版本后已经不支持vless

<https://xtls.github.io>

<https://github.com/xtls/Xray-core/releases>

<https://github.com/XTLS/Xray-install>

PKGBUILD
```
# Maintainer: m8D2 <omui (at) proton mail (dot) com>
# Contributor: Felix Yan <felixonmars@archlinux.org>
# Contributor: Dct Mei <dctxmei@gmail.com>
# Contributor: denglitsch <denglitsch@gmail.com>

pkgname=xray
pkgver=1.8.23
pkgrel=1
pkgdesc="A set of network tools that helps you to build your own computer network (git version)."
arch=(x86_64)
url="https://github.com/xtls/Xray-core"
license=(MIT)
makedepends=()
source=(Xray-linux-64.zip
        xray.service
        xray@.service
        config.json)
sha512sums=('SKIP'
        'SKIP'
        'SKIP'
        'SKIP')

package() {
  cd $srcdir/
  install -Dm644 xray.service "$pkgdir"/etc/systemd/system/xray.service
  install -Dm644 xray@.service "$pkgdir"/etc/systemd/system/xray@.service
  install -Dm644 *.dat -t "$pkgdir"/usr/share/xray/
  install -Dm644 *.json -t "$pkgdir"/etc/xray/
  install -Dm755 xray -t "$pkgdir"/usr/bin/xray/
}

```

xray.service
```
[Unit]
Description=XRay Service
Documentation=https://xtls.github.io
After=network.target nss-lookup.target

[Service]
User=nobody
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges=true
ExecStart=/usr/bin/xray/xray run -config /etc/xray/config.json
Restart=on-failure
RestartPreventExitStatus=23

[Install]
WantedBy=multi-user.target
```

xray@.service
```
[Unit]
Description=XRay Client
Documentation=https://xtls.github.io
After=network.target nss-lookup.target

[Service]
User=nobody
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges=true
ExecStart=/usr/bin/xray/xray run -config /etc/xray/%i.json
Restart=on-failure
RestartPreventExitStatus=23

[Install]
WantedBy=multi-user.target
```
config.json
```
{
  "inbounds": [
    {
      "port": 1080, // SOCKS 代理端口，在浏览器中需配置代理并指向这个端口
      "listen": "127.0.0.1",
      "protocol": "socks",
      "settings": {
        "udp": true
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "vmess",
      "settings": {
        "vnext": [
          {
            "address": "server", // 服务器地址，请修改为你自己的服务器 ip 或域名
            "port": 10086, // 服务器端口
            "users": [
              {
                "id": "b831381d-6324-4d53-ad4f-8cda48b30811"  // 记得替换这个字段，使用 `xray uuid` 或 `uuidgen` 生成
              }
            ]
          }
        ]
      }
    },
    {
      "protocol": "freedom",
      "tag": "direct"
    }
  ],
  "routing": {
    "domainStrategy": "IPOnDemand",
    "rules": [
      {
        "type": "field",
        "ip": ["geoip:private","geoip:cn"], // 绕过局域网和国内IP段
        "outboundTag": "direct"
      }
    ]
  }
}
```

`makedeb`生成`xray_1.8.23-1_amd64.deb`安装
```
sudo systemctl enable xray.service
sudo systemctl restart xray.service
```
配置文件具体修改config.json。我这里本地端口定义为10809，浏览器socket5端口也跟着改。



v2rayA其实就是给xray或者v2ray再套一个web前端。

<https://v2raya.org>

<https://github.com/v2rayA/v2rayA/releases>

```
sudo systemctl enable v2raya.service
sudo systemctl restart v2raya.service
```

如果有必要可以关闭v2ray或xray服务
```
sudo systemctl disable v2ray --now ### Xray 需要替换服务为 xray
```

修改一下官方提供的deb并安装

web前端是

<http://localhost:2017>


sudo gedit /etc/v2raya/v2raya
修改
```
V2RAYA_V2RAY_BIN=/usr/bin/xray/xray

V2RAYA_V2RAY_ASSETSDIR=/usr/share/xray/
```

查看log
```
sudo cat /var/log/v2raya/v2raya.log
```

要有
```
... V2Ray binary is /usr/bin/xray/xray
... V2Ray asset directory is /usr/share/xray/
```

然后在<http://localhost:2017>填入订阅和启动服务 （如果需要挂梯子更新的订阅，在页面的 Settings->Transparent Proxy/System Prox 选第一个on，就可以更新这样的订阅）

[andreas .]

浏览器socket5端口是20170

---
# openssh-server
```
$ sudo apt install openssh-server
Reading package lists... Done
Building dependency tree... Done
Reading state information... Done
The following additional packages will be installed:
  openssh-client openssh-sftp-server
Suggested packages:
  keychain libpam-ssh monkeysphere ssh-askpass molly-guard
The following packages will be upgraded:
  openssh-client openssh-server openssh-sftp-server

```

---
# 更新设置 fcitx 环境变量

`~/.xprofile`中加入

```
export GTK_IM_MODULE=fcitx
export QT_IM_MODULE=fcitx
export QT4_IM_MODULE=fcitx
export XMODIFIERS=@im=fcitx
export SDL_IM_MODULE=fcitx
```

在`/etc/security/pam_env.conf`，早期版本可以在`~/.pam_environment`中，添加
```
GTK_IM_MODULE DEFAULT=fcitx
QT_IM_MODULE DEFAULT=fcitx
QT4_IM_MODULE DEFAULT=fcitx
XMODIFIERS DEFAULT=@im=fcitx
SDL_IM_MODULE DEFAULT=fcitx
```

在`/etc/environment`格式如下

```
GTK_IM_MODULE=fcitx
QT_IM_MODULE=fcitx
QT4_IM_MODULE=fcitx
XMODIFIERS=@im=fcitx
SDL_IM_MODULE=fcitx
```

---
# edge 浏览器
```
sudo dpkg -i microsoft-edge-stable_136.0.3240.64-1_amd64.deb
tar --acls --xattrs -Jxvpf home-microsoft-edge.tar.xz

```

---
# 最新 snap 状态
```
$ snap list 
Name                       Version           Rev    Tracking         Publisher      Notes
bare                       1.0               5      latest/stable    canonical✓     base
chromium                   136.0.7103.92     3125   latest/stable    canonical✓     -
core20                     20250407          2571   latest/stable    canonical✓     base
core22                     20250408          1963   latest/stable    canonical✓     base
cups                       2.4.12-2          1100   latest/stable    openprinting✓  -
firefox                    138.0.4-1         6198   latest/stable/…  mozilla✓       -
gnome-3-38-2004            0+git.efb213a     143    latest/stable/…  canonical✓     -
gnome-42-2204              0+git.38ea591     202    latest/stable    canonical✓     -
gtk-common-themes          0.1-81-g442e511   1535   latest/stable/…  canonical✓     -
snap-store                 41.3-72-g80e7130  1216   latest/stable/…  canonical✓     -
snapd                      2.68.4            24505  latest/stable    canonical✓     snapd
snapd-desktop-integration  0.9               253    latest/stable/…  canonical✓     -

```

---
# 更新 opera
```
$ sudo dpkg -i opera-stable_119.0.5497.29_amd64.deb 

Unpacking opera-stable (119.0.5497.29) over (103.0.4928.26) 
```

---
# 更新 google-chrome
```
 sudo dpkg -i google-chrome-stable_136.0.7103.92-1_amd64.deb 

Unpacking google-chrome-stable (136.0.7103.92-1) over (118.0.5993.70-1)
```




---
# 安装 flatpak
```
$ sudo apt install flatpak

Suggested packages:
  malcontent-gui
The following NEW packages will be installed:
  flatpak libappstream-glib8 libostree-1-1

```

---
# 安装 dpkg-dev

```
sudo apt install dpkg-dev

Suggested packages:
  debian-keyring bzr
The following packages will be upgraded:
  dpkg-dev libdpkg-perl

```

---
# 安装 build-essential 等

```
sudo apt-get install build-essential checkinstall intltool libgtk2.0-dev

sudo apt install build-essential devscripts equivs git meson

build-essential is already the newest version (12.9ubuntu3).
meson is already the newest version (0.61.2-1).
git is already the newest version (1:2.34.1-1ubuntu1.12).

The following additional packages will be installed:
  dput libarray-intspan-perl libcontextual-return-perl libdistro-info-perl libfile-chdir-perl libfile-dirlist-perl libfile-homedir-perl libfile-touch-perl libgit-wrapper-perl libgitlab-api-v4-perl libhash-fieldhash-perl libhttp-tiny-multipart-perl libio-prompter-perl
  libipc-run-perl liblog-any-adapter-screen-perl liblog-any-perl libmoox-struct-perl libobject-id-perl libpath-iterator-rule-perl libpod-constants-perl libpod-parser-perl libre-engine-re2-perl libregexp-pattern-license-perl libregexp-pattern-perl libset-intspan-perl
  libstring-copyright-perl libstring-escape-perl libwant-perl licensecheck python3-magic python3-unidiff wdiff
Suggested packages:
  adequate autopkgtest bls-standalone check-all-the-things cvs-buildpackage diffoscope disorderfs dose-extra duck elpa-devscripts how-can-i-help libdbd-pg-perl libnet-smtps-perl libterm-size-perl libyaml-syck-perl mmdebstrap mozilla-devscripts mutt piuparts postgresql-client
  pristine-lfs ratt reprotest svn-buildpackage w3m debian-keyring libsoap-lite-perl pristine-tar mini-dinstall libossp-uuid-perl wdiff-doc
The following NEW packages will be installed:
  devscripts dput equivs libarray-intspan-perl libcontextual-return-perl libdistro-info-perl libfile-chdir-perl libfile-dirlist-perl libfile-homedir-perl libfile-touch-perl libgit-wrapper-perl libgitlab-api-v4-perl libhash-fieldhash-perl libhttp-tiny-multipart-perl
  libio-prompter-perl libipc-run-perl liblog-any-adapter-screen-perl liblog-any-perl libmoox-struct-perl libobject-id-perl libpath-iterator-rule-perl libpod-constants-perl libpod-parser-perl libre-engine-re2-perl libregexp-pattern-license-perl libregexp-pattern-perl
  libset-intspan-perl libstring-copyright-perl libstring-escape-perl libwant-perl licensecheck python3-magic python3-unidiff wdiff

```

---
# 安装 apt-rdepends

```
sudo apt install apt-rdepends
```

---
# libvlc
```
sudo apt install libvlc-dev libvlccore-dev

```

---
# 安装 xviewer 等

```
$ echo 'deb https://mirrors.ustc.edu.cn/linuxmint vanessa main upstream import backport' | sudo tee /etc/apt/sources.list.d/linuxmint.list
deb https://mirrors.ustc.edu.cn/linuxmint vanessa main upstream import backport

$ sudo apt update

$ sudo apt install xviewer xviewer-plugins

The following additional packages will be installed:
  gir1.2-xviewer-3.0 webp-pixbuf-loader
Suggested packages:
  postr
The following packages will be REMOVED:
  webp-pixbuf-loader-git
The following NEW packages will be installed:
  gir1.2-xviewer-3.0 webp-pixbuf-loader xviewer xviewer-plugins

$ sudo apt clean

$ sudo sed -i "s/.*/#&/" /etc/apt/sources.list.d/linuxmint.list

$ cat /etc/apt/sources.list.d/linuxmint.list
#deb https://mirrors.ustc.edu.cn/linuxmint vanessa main upstream import backport


$ sudo apt update
```

---
#  mingw-w64

```
sudo apt-get install ccache g++-mingw-w64 gcc-multilib meson nasm ninja-build pkg-config

Suggested packages:
  gcc-10-locales
The following NEW packages will be installed:
  binutils-mingw-w64-i686 binutils-mingw-w64-x86-64 g++-mingw-w64 g++-mingw-w64-i686 g++-mingw-w64-i686-posix g++-mingw-w64-i686-win32 g++-mingw-w64-x86-64 g++-mingw-w64-x86-64-posix g++-mingw-w64-x86-64-win32 gcc-mingw-w64-base gcc-mingw-w64-i686-posix
  gcc-mingw-w64-i686-posix-runtime gcc-mingw-w64-i686-win32 gcc-mingw-w64-i686-win32-runtime gcc-mingw-w64-x86-64-posix gcc-mingw-w64-x86-64-posix-runtime gcc-mingw-w64-x86-64-win32 gcc-mingw-w64-x86-64-win32-runtime mingw-w64-common mingw-w64-i686-dev mingw-w64-x86-64-dev nas
```

---
# libqt6multimedia6

```
sudo apt install libqt6multimedia6
```

---
# dpkg: error: dpkg frontend lock is locked by another process

```
$ sudo rm /var/lib/dpkg/lock-frontend
$ sudo rm /var/lib/dpkg/lock
$ sudo dpkg --configure -a
```

---
# snipaste

```
sudo dokg -i snipaste_2.10.6-1_amd64.deb
sudo cp /usr/share/applications/Snipaste.desktop /etc/xdg/autostart/
```

aur-snipastet 通过 makedeb 似乎strip了lib目录的库文件，导致不能运行。手动解压修改再打包deb



---
# caesium-image-compressor

```
./Caesium_Image_Compressor-x86_64_v2.6.0_ubu20_qt66.AppImage --appimage-extract

然后修改，简单出个control（参考aur-snipaste），就可以打包了。
```

那什么linuxdeploy-plugin-qt-hook.sh没运行也没有发现有啥影响，就不管了。

---
# dash-to-dock click

```
$ gsettings get org.gnome.shell.extensions.dash-to-dock click-action
'focus-or-appspread'

$ gsettings set org.gnome.shell.extensions.dash-to-dock click-action 'minimize'
```


---
# 补一些包

```
sudo apt install '^libxcb.*-dev' libx11-xcb-dev libglu1-mesa-dev libxrender-dev libxi-dev
sudo apt install vulkan-tools
echo  $(( $(ps aux|grep steam|awk {'print $6;'}|paste -sd+ | bc) /1024 )) MB
glxinfo -B
vulkaninfo --summary
```

---
# 旋转副屏

```
xrandr --current

xrandr --output HDMI-0 --auto --rotate inverted --verbose

xrandr --output HDMI-0 --rotate inverted
xrandr --output HDMI-0 --rotate inverted --scale 0.5x0.5

xrandr --output HDMI-0 --rotate inverted --scale 1x1

xrandr --output HDMI-0 --rotate inverted --scale 0.66x0.66
```

ref
```

xrandr -o normal
xrandr -o left
xrandr -o right
xrandr -o inverted

xrandr --output eDP-1 --mode 1920x1080

xrandr --output eDP-1 --mode 1920x1080 --rate 60.00

xrandr --output DisplayPort-0 --mode 1920x1080 --rate 144.00 --output eDP-1 --mode 1920x1080 --rate 60.00
xrandr --output DisplayPort-0 --primary --mode 1920x1080 --rate 144.00 --output eDP-1 --mode 1920x1080 --rate 60.00 --right-of DisplayPort-0

xrandr \
--output "DP-4" --primary --pos "0x0" --scale 0.5x0.5 \
--output "DP-2" --pos "3840x0" \
--output eDP-1-1 --off

xrandr --output eDP-1 --scale 1.25x1.25
xrandr --output eDP-1 --scale 1.25x1.25 --panning 3840x2400 ？
```


---
# cadence
```
strings /opt/cadence/SPB172/tools.lnx86/lib/64bit/libstdc++.so.6.0.19 | grep CXXABI_1

nm -gD /lib/x86_64-linux-gnu/libgdk_pixbuf-2.0.so.0 | grep g_task_set_static_name

readelf -a  /usr/lib/x86_64-linux-gnu/libX11.so.6 | grep _XGetRequest
```

```
/opt/cadence/SPB172/tools/bin/allegro.exe: /opt/cadence/SPB172/tools.lnx86/lib/64bit/libstdc++.so.6: version `CXXABI_1.3.9' not found (required by /usr/lib/x86_64-linux-gnu/libGLU.so.1)

strings /opt/cadence/SPB172/tools.lnx86/lib/64bit/libstdc++.so.6.0.19 | grep CXXABI_1

cd /opt/cadence/SPB172/tools.lnx86/lib/64bit
cp /usr/lib/x86_64-linux-gnu/libstdc++.so.6.0.30 .
rm libstdc++.so.6 libstdc++.so
ln -s libstdc++.so.6.0.30 libstdc++.so.6
ln -s libstdc++.so.6.0.30 libstdc++.so


/opt/cadence/SPB172/tools/bin/allegro.exe: symbol lookup error: /usr/lib/x86_64-linux-gnu/libXext.so.6: undefined symbol: _XGetRequest
cp /home/andy/.local/share/Steam/ubuntu12_32/steam-runtime/usr/lib/x86_64-linux-gnu/libGLU.so.1.3.08004 libGLU.so.1
cd /opt/cadence/SPB172/tools.lnx86/mainwin540/mw/lib-amd64_linux/X11/
cp /usr/lib/x86_64-linux-gnu/libX11.so.6.4.0 .
ln -s libX11.so.6.4.0 libX11.so.6
ln -s libX11.so.6.4.0 libX11.so

/opt/cadence/SPB172/tools/bin/allegro.exe: symbol lookup error: /opt/cadence/SPB172/tools.lnx86/mainwin540/mw/lib-amd64_linux/X11/libX11.so.6: undefined symbol: xcb_wait_for_reply64

$ nm -gD /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0 | grep xcb_wait_for_reply64
000000000000de60 T xcb_wait_for_reply64
andy@andy-usbstick:/opt/cadence/SPB172/tools.lnx86/mainwin540/mw/lib-amd64_linux/X11
$ cp /usr/lib/x86_64-linux-gnu/libxcb.so.1.1.0 .
```

```
andy@andy-usbstick:/opt/cadence/allegro_166_patch
$ cat allegro
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/pcb/bin/allegro

$ cat concepthdl 
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/bin/concepthdl

$ cat pad_designer
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/pcb/bin/pad_designer

$ cat projmgr 
#!/bin/bash
cd /opt/cadence/allegro_166_patch/
source spb166
/opt/cadence/SPB166/tools/bin/projmgr


$ sudo ln -s /opt/cadence/allegro_166_patch/allegro /usr/local/bin/allegro

$ sudo ln -s /opt/cadence/allegro_166_patch/concepthdl /usr/local/bin/concepthdl

$ sudo ln -s /opt/cadence/allegro_166_patch/pad_designer /usr/local/bin/pad_designer

$ sudo ln -s /opt/cadence/allegro_166_patch/projmgr /usr/local/bin/projmgr


andy@andy-usbstick:/opt/cadence/allegro_172_patch
$ cat allegro 
#!/bin/bash
cd /opt/cadence/allegro_172_patch/
source spb172
/opt/cadence/SPB172/tools/bin/allegro

$ cat concepthdl 
#!/bin/bash
cd /opt/cadence/allegro_172_patch/
source spb172
/opt/cadence/SPB172/tools/bin/concepthdl

$ cat padstack_editor
#!/bin/bash
cd /opt/cadence/allegro_172_patch/
source spb172
/opt/cadence/SPB172/tools/bin/padstack_editor

$ cat projmgr 
#!/bin/bash
cd /opt/cadence/allegro_172_patch/
source spb172
/opt/cadence/SPB172/tools/bin/projm

```

---
# 
```
wget -qO - https://typoraio.cn/linux/public-key.asc | sudo tee /etc/apt/trusted.gpg.d/typora.asc
sudo add-apt-repository 'deb https://typora.io/linux ./'
sudo apt-get -c ~/apt_proxy_conf update
sudo apt-get -c ~/apt_proxy_conf install typora
然后关闭源就行
```

```
-----BEGIN PGP PUBLIC KEY BLOCK-----
Version: GnuPG v1

mQENBFfnQVEBCADPtPh703CFkr0xRRZpVoD04jSYn7Kg6DssR+2ItivGup9bu5B9
lKEzIeg1Cjxt5DJwZ1e4ZDMdMX1CjtkIjErvSQ21pjgIWFmj3klh1TblwfxQTupQ
ARhhAOdxpLmTz3a20HW7/IMo/0RSZAS1eFkiCEekUY3aqI483UsQUCQ/HYr1QU/f
YBLEnlfdS+1L6SzKkop+cwga6Py/r1kQzibvHns8dwY9qvzBiyn41LAc1ytAhTZA
UTwYcOvEGcIscEHesy3DsLE1CtHLjPerm21EdAszxWxpQQzi2BhZ9BwzhHMO4KRS
lfyJCvFTKZ0LEMljlPOIWze7o4uBaDBWBFdFABEBAAG0G0FibmVyIExlZSA8YWJu
ZXJAdHlwb3JhLmlvPokBOAQTAQIAIgUCV+dBUQIbAwYLCQgHAwIGFQgCCQoLBBYC
AwECHgECF4AACgkQujALd1Wvz657DwgAtqLc29tRAqNEa28npGHvRiXZcksPJ7cm
9na7nefi1OSgYESCSLOb2JNrtmCc6krCkRKPPQnwSa5jydZ2azZDrvYdRKB8yBnQ
PiKMaUX5RdfM4wNDGhBGFlHFBhDKPurOnUml0EqEca6RNmNZR9ach8wFmVMVLkVT
1oiU/KkBWdn11MXZOAVrV2N5smNj1lpe3jJh/sFLTHAcgPRmHjKgsy0e8Rhcz2CS
O3IX27C7ddFvW6jxE3seDM5e2O9+ji/a51BmTkUVVYH5AzmJVig9H0Bj1zo4t8qV
WhaVREr49CSHJ3gT/yv96qPJsMoCUPSO4q2iRHLW6wYl0upfCskExg==
=yAo+
-----END PGP PUBLIC KEY BLOCK-----
```

/etc/apt/sources.list.d/archive_uri-https_typora_io_linux-jammy.list
```
#deb https://typora.io/linux ./
# deb-src https://typora.io/linux ./
```

---
# apt upgrade
```
The following NEW packages will be installed:
  cuda-cccl-12-9 cuda-crt-12-9 cuda-cudart-12-9 cuda-cudart-dev-12-9 cuda-driver-dev-12-9 cuda-nvcc-12-9 cuda-nvvm-12-9 cuda-toolkit-12-9-config-common libnvinfer-headers-python-plugin-dev libnvinfer-win-builder-resource10 libxkbregistry0:i386 ubuntu-pro-client
  ubuntu-pro-client-l10n
The following packages have been kept back:
  cuda cuda-drivers cudnn cudnn9 cudnn9-cuda-12 libcudnn9-cuda-12 libcudnn9-dev-cuda-12 libcudnn9-static-cuda-12
The following packages will be upgraded:
  alsa-ucm-conf apport apport-gtk apt apt-utils bcompare code comerr-dev containerd.io coreutils cuda-keyring cuda-toolkit-12-config-common cuda-toolkit-config-common debootstrap distro-info distro-info-data dmeventd dmidecode dmsetup dns-root-data docker-buildx-plugin
  docker-ce docker-ce-cli docker-ce-rootless-extras docker-compose-plugin dpkg e2fsprogs evince evince-common firmware-sof-signed fonts-noto-color-emoji gdm3 gir1.2-evince-3.0 gir1.2-gdm-1.0 gir1.2-mutter-10 gir1.2-nautilus-3.0 gir1.2-nm-1.0 gir1.2-packagekitglib-1.0 gjs
  gnome-control-center gnome-control-center-data gnome-control-center-faces gnome-remote-desktop gnome-shell gnome-shell-common gnome-shell-extension-prefs gnome-shell-extension-ubuntu-dock google-chrome-stable graphviz grub-efi-amd64-bin grub-efi-amd64-signed
  gstreamer1.0-packagekit hexchat hexchat-common hexchat-lua hexchat-perl hexchat-plugins hexchat-python3 ifupdown iptables irqbalance kpartx kpartx-boot kylin-software-center language-pack-en language-pack-en-base language-pack-gnome-en language-pack-gnome-en-base
  language-pack-zh-hans language-pack-zh-hans-base libapt-pkg6.0 libcdt5 libcgraph6 libcom-err2 libcom-err2:i386 libcryptsetup12 libcudnn9-samples libdevmapper-event1.02.1 libdevmapper1.02.1 libegl-mesa0 libegl-mesa0:i386 libegl1-mesa-dev libevdocument3-4 libevince-dev
  libevview3-3 libext2fs2 libfprint-2-2 libgbm-dev libgbm1 libgbm1:i386 libgdm1 libgjs0g libgl1-mesa-dev libgl1-mesa-dri libgl1-mesa-dri:i386 libglapi-mesa libglapi-mesa:i386 libglx-mesa0 libglx-mesa0:i386 libgpgme11 libgpgmepp6 libgvc6 libgvpr2 libip4tc2 libip6tc2
  liblab-gamut1 libldap-2.5-0 libldap-2.5-0:i386 libldap-common liblvm2cmd2.03 libmalcontent-0-0 libmbim-glib4 libmbim-proxy libmm-glib0 libmutter-10-0 libnautilus-extension-dev libnautilus-extension1a libnccl-dev libnccl2 libnm0 libnm0:i386 libnvidia-container-tools
  libnvidia-container1 libnvinfer-bin libnvinfer-dev libnvinfer-dispatch-dev libnvinfer-dispatch10 libnvinfer-headers-dev libnvinfer-headers-plugin-dev libnvinfer-lean-dev libnvinfer-lean10 libnvinfer-plugin-dev libnvinfer-plugin10 libnvinfer-samples
  libnvinfer-vc-plugin-dev libnvinfer-vc-plugin10 libnvinfer10 libnvonnxparsers-dev libnvonnxparsers10 libosmesa6 libosmesa6:i386 libpackagekit-glib2-18 libpam-modules libpam-modules-bin libpam-runtime libpam-sss libpam0g libpathplan4 libpcap0.8 libpcap0.8:i386
  libpulse-dev libpulse-mainloop-glib0 libpulse0 libpulse0:i386 libpulsedsp libseccomp2 libsmbclient libsnmp-base libsnmp40 libsnmp40:i386 libss2 libudev-dev libudev1 libudev1:i386 libvirt-clients libvirt-daemon libvirt-daemon-config-network libvirt-daemon-config-nwfilter
  libvirt-daemon-driver-qemu libvirt-daemon-system libvirt-daemon-system-systemd libvirt0 libwbclient0 libxatracker2 libxmmsclient-glib1 libxmmsclient6 libxnvctrl0 libxtables12 lintian linux-base logsave lvm2 makedumpfile mesa-common-dev mesa-va-drivers
  mesa-va-drivers:i386 mesa-vdpau-drivers mesa-vulkan-drivers mesa-vulkan-drivers:i386 microsoft-edge-stable modemmanager mutter-common nautilus nautilus-data network-manager network-manager-config-connectivity-ubuntu network-manager-dev nvidia-container-toolkit
  nvidia-container-toolkit-base nvidia-settings openvpn opera-stable packagekit packagekit-tools pci.ids pulseaudio pulseaudio-equalizer pulseaudio-module-bluetooth pulseaudio-module-gsettings pulseaudio-module-jack pulseaudio-module-lirc pulseaudio-module-raop
  pulseaudio-module-zeroconf pulseaudio-utils python-apt-common python3-apport python3-apt python3-distro-info python3-distupgrade python3-examples python3-gpg python3-libnvinfer python3-libnvinfer-dev python3-libnvinfer-dispatch python3-libnvinfer-lean python3-paramiko
  python3-problem-report python3-samba python3-software-properties python3-update-manager qemu-block-extra qemu-system-common qemu-system-data qemu-system-gui qemu-system-x86 qemu-utils samba samba-common samba-common-bin samba-dsdb-modules samba-libs samba-vfs-modules
  shim-signed smartmontools smbclient snapd software-properties-common software-properties-gtk steam-launcher steam-libs-amd64 steam-libs-i386:i386 swtpm swtpm-tools systemd-hwe-hwdb tcpdump tensorrt tensorrt-dev tensorrt-libs timeshift tracker-extract tracker-miner-fs
  transmission transmission-common transmission-gtk u-boot-tools ubuntu-advantage-tools ubuntu-desktop ubuntu-desktop-minimal ubuntu-minimal ubuntu-release-upgrader-core ubuntu-release-upgrader-gtk ubuntu-standard udev update-manager update-manager-core update-notifier
  update-notifier-common winbind wine-stable wine-stable-amd64 wine-stable-i386:i386 winehq-stable wps-office xdg-desktop-portal xdg-desktop-portal-gnome xfsprogs xmms2-core xmms2-plugin-alsa xmms2-plugin-id3v2 xmms2-plugin-mad xmms2-plugin-vorbis xserver-common
  xserver-xephyr xserver-xorg-core xserver-xorg-legacy xvfb xwayland
297 upgraded, 13 newly installed, 0 to remove and 8 not upgraded.

```

---
# ubuntu pro
```
proxychains sudo pro detach
sudo apt-get install ubuntu-advantage-tools
sudo pro attach C14BJEY3HVZynprw7fALhMFvRVU9jQ
pro status --all
apt list --upgradable
```

```
$ sudo pro attach C14BJEY3HVZynprw7fALhMFvRVU9jQ
Enabling Ubuntu Pro: ESM Apps
Ubuntu Pro: ESM Apps enabled
Enabling Ubuntu Pro: ESM Infra
Ubuntu Pro: ESM Infra enabled
Enabling Livepatch
Livepatch enabled
This machine is now attached to 'Ubuntu Pro - free personal subscription'

SERVICE          ENTITLED  STATUS       DESCRIPTION
anbox-cloud      yes       disabled     Scalable Android in the cloud
esm-apps         yes       enabled      Expanded Security Maintenance for Applications
esm-infra        yes       enabled      Expanded Security Maintenance for Infrastructure
fips-preview     yes       disabled     Preview of FIPS crypto packages undergoing certification with NIST
fips-updates     yes       disabled     FIPS compliant crypto packages with stable security updates
livepatch        yes       enabled      Canonical Livepatch service
realtime-kernel* yes       disabled     Ubuntu kernel with PREEMPT_RT patches integrated
usg              yes       disabled     Security compliance and audit tools

 * Service has variants

NOTICES
Operation in progress: pro attach

For a list of all Ubuntu Pro services and variants, run 'pro status --all'
Enable services with: pro enable <service>

     Account: denglitsch@gmail.com
Subscription: Ubuntu Pro - free personal subscription


The following packages have been kept back:
  cuda cuda-drivers cudnn cudnn9 cudnn9-cuda-12 libcudnn9-cuda-12 libcudnn9-dev-cuda-12 libcudnn9-static-cuda-12 libnvinfer-bin libnvinfer-dev libnvinfer-dispatch-dev libnvinfer-dispatch10 libnvinfer-headers-dev libnvinfer-headers-plugin-dev libnvinfer-lean-dev
  libnvinfer-lean10 libnvinfer-plugin-dev libnvinfer-plugin10 libnvinfer-samples libnvinfer-vc-plugin-dev libnvinfer-vc-plugin10 libnvinfer10 libnvonnxparsers-dev libnvonnxparsers10 python3-libnvinfer python3-libnvinfer-dev python3-libnvinfer-dispatch
  python3-libnvinfer-lean tensorrt tensorrt-dev tensorrt-libs wine-stable wine-stable-amd64 wine-stable-i386:i386 winehq-stable
The following packages will be upgraded:
  7zip ffmpeg fish fish-common git-lfs graphviz gsasl-common imagemagick imagemagick-6-common imagemagick-6.q16 libavcodec-dev libavcodec-extra libavcodec-extra58 libavdevice-dev libavdevice58 libavfilter-dev libavfilter7 libavformat-dev libavformat58 libavutil-dev
  libavutil56 libcdt5 libcgraph6 libde265-0 libexo-2-0 libexo-common libgpac11 libgraphicsmagick++-q16-12 libgraphicsmagick-q16-3 libgsasl7 libgsl27 libgslcblas0 libgvc6 libgvpr2 libheif1 libimage-magick-perl libimage-magick-q16-perl libjs-jquery-ui liblab-gamut1
  liblua5.4-0 libmagick++-6.q16-8 libmagickcore-6.q16-6 libmagickcore-6.q16-6-extra libmagickwand-6.q16-6 libnode72 libopencv-calib3d-dev libopencv-calib3d4.5d libopencv-contrib-dev libopencv-contrib4.5d libopencv-core-dev libopencv-core4.5d libopencv-dev libopencv-dnn-dev
  libopencv-dnn4.5d libopencv-features2d-dev libopencv-features2d4.5d libopencv-flann-dev libopencv-flann4.5d libopencv-highgui-dev libopencv-highgui4.5d libopencv-imgcodecs-dev libopencv-imgcodecs4.5d libopencv-imgproc-dev libopencv-imgproc4.5d libopencv-ml-dev
  libopencv-ml4.5d libopencv-objdetect-dev libopencv-objdetect4.5d libopencv-photo-dev libopencv-photo4.5d libopencv-shape-dev libopencv-shape4.5d libopencv-stitching-dev libopencv-stitching4.5d libopencv-superres-dev libopencv-superres4.5d libopencv-video-dev
  libopencv-video4.5d libopencv-videoio-dev libopencv-videoio4.5d libopencv-videostab-dev libopencv-videostab4.5d libopencv-viz-dev libopencv-viz4.5d libopencv4.5-java libopencv4.5d-jni libopenexr-dev libopenexr25 libopusfile0 libpathplan4 libpmix-dev libpmix2
  libpostproc-dev libpostproc55 libpython2.7 libpython2.7-dev libpython2.7-minimal libpython2.7-stdlib libswresample-dev libswresample3 libswscale-dev libswscale5 liburiparser1 libvlc-bin libvlc-dev libvlc5 libvlccore-dev libvlccore9 libzbar0 libzvbi-common libzvbi0 nodejs
  nodejs-doc obfs4proxy opencv-data patchelf python2-setuptools-whl python2.7 python2.7-dev python2.7-minimal python3-update-manager python3-virtualenv python3-zbar update-manager update-manager-core virtualenv vlc vlc-bin vlc-data vlc-l10n vlc-plugin-access-extra
  vlc-plugin-base vlc-plugin-notify vlc-plugin-qt vlc-plugin-samba vlc-plugin-skins2 vlc-plugin-video-output vlc-plugin-video-splitter vlc-plugin-visualization zbar-tools
140 upgraded, 0 newly installed, 0 to remove and 35 not upgraded.


$ sudo apt autoremove
The following packages will be REMOVED:
  libtbb2


sudo apt-get install ubuntu-advantage-tools
```

---
# 删除多余的 iptux
```
sudo rm /usr/local/share/iptux -rf
sudo rm /usr/local/bin/iptux
sudo rm /usr/local/share/locale/de/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/en_GB/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/es/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/fr/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/gl/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/it/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/lb/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/pl/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/pt_BR/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/ru/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/zh_CN/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/locale/zh_TW/LC_MESSAGES/iptux.mo
sudo rm /usr/local/share/applications/iptux.desktop
sudo rm /usr/local/share/icons/hicolor/32x32/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/32x32/apps/iptux.png
sudo rm /usr/local/share/icons/hicolor/48x48/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/48x48/apps/iptux.png
sudo rm /usr/local/share/icons/hicolor/22x22/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/22x22/apps/iptux.png
sudo rm /usr/local/share/icons/hicolor/24x24/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/24x24/apps/iptux.png
sudo rm /usr/local/share/icons/hicolor/16x16/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/16x16/apps/iptux.png
sudo rm /usr/local/share/icons/hicolor/64x64/apps/iptux-i.png
sudo rm /usr/local/share/icons/hicolor/64x64/apps/iptux.png
```

---
# fstab

/etc/fstab
```
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# / was on /dev/sda2 during installation
UUID=a6154c06-920c-46ee-bd82-214e7707ea4f /               ext4    rw,relatime,data=ordered       0       1
# /opt was on /dev/nvme1n1p1 during curtin installation
UUID=2e44b05b-3c28-49be-9fe9-7878471ff37a /opt            ext4    rw,relatime,data=ordered       0       1
# /boot/efi was on /dev/nvme0n1p1 during installation
UUID=E80C-3410  /boot/efi       vfat    umask=0077      0       1


```

```
# /etc/fstab: static file system information.
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>

#Entry for /dev/nvme0n1p2 :
UUID=eb6dc6eb-5f94-4835-a1d3-1a1cf9b68f63	/	ext4	errors=remount-ro	0	1
#Entry for /dev/nvme0n1p1 :
UUID=C426-D69F	/boot/efi	vfat	umask=0077	0	1
#Entry for /dev/sdb1 :
#UUID=08C21CD0C21CC3BA	/media/andreas/M4A	ntfs-3g	defaults,nodev,nosuid,locale=en_US.UTF-8	0	0
#Entry for /dev/sda1 :
UUID=1b435a2c-8d80-426b-84e5-8605ddfe58b4	/opt	ext4	defaults	0	2
UUID=8a73bf94-e351-461c-a4fa-b1b25e587b32   /ext_drv   ext4    defaults	    0	2
/swapfile	none	swap	sw	0	0

```

```
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# / was on /dev/nvme0n1p2 during curtin installation
/dev/disk/by-uuid/a6154c06-920c-46ee-bd82-214e7707ea4f / ext4 defaults 0 1
# /boot/efi was on /dev/nvme0n1p1 during curtin installation
/dev/disk/by-uuid/E80C-3410 /boot/efi vfat defaults 0 1
# /opt was on /dev/nvme1n1p1 during curtin installation
/dev/disk/by-uuid/2e44b05b-3c28-49be-9fe9-7878471ff37a /opt ext4 defaults 0 1
/swap.img	none	swap	sw	0	0
```


```
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# / was on /dev/sda2 during installation
UUID=a6154c06-920c-46ee-bd82-214e7707ea4f /               ext4    errors=remount-ro      0       1
# /opt was on /dev/nvme1n1p1 during curtin installation
UUID=2e44b05b-3c28-49be-9fe9-7878471ff37a /opt            ext4    defaults       0       2
# /boot/efi was on /dev/nvme0n1p1 during installation
UUID=E80C-3410  /boot/efi       vfat    umask=0077      0       0
```


---
# 挂载在 /opt 的分区 不能使用 trash-can

实际上 trash 命令是可以用的，但是 del 按键和各桌面都不支持这个分区使用 trashcan

<https://bugzilla.xfce.org/show_bug.cgi?id=15922>

<https://github.com/GNOME/glib/blob/main/gio/gunixmounts.c#L292> 
```
  const char *ignore_mountpoints[] = {
    /* Includes all FHS 2.3 toplevel dirs and other specialized
     * directories that we want to hide from the user.
     */
    "/",              /* we already have "Filesystem root" in Nautilus */ 
    "/bin",
    "/boot",
    "/compat/linux/proc",
    "/compat/linux/sys",
    "/dev",
    "/etc",
    "/home",
    "/lib",
    "/lib64",
    "/libexec",
    "/live/cow",
    "/live/image",
    "/media",
    "/mnt",
    "/opt",
    "/rescue",
    "/root",
    "/sbin",
    "/srv",
    "/tmp",
    "/usr",
    "/usr/X11R6",
    "/usr/local",
    "/usr/obj",
    "/usr/ports",
    "/usr/src",
    "/usr/xobj",
    "/var",
    "/var/crash",
    "/var/local",
    GLIB_LOCALSTATEDIR,
    "/var/log",
    "/var/log/audit", /* https://bugzilla.redhat.com/show_bug.cgi?id=333041 */
    "/var/mail",
    "/var/run",
    GLIB_RUNSTATEDIR,
    "/var/tmp",       /* https://bugzilla.redhat.com/show_bug.cgi?id=335241 */
    "/proc",
    "/sbin",
    "/net",
    "/sys",
    NULL
  };
```
看见没有这些就是 internal mount 节点，挂在这些位置，trashcan都不可用

g_unix_is_mount_path_system_internal(), they call to see if it's "system internal":

看来仓库的二进制文件是不再支持在/opt或者/dev/shm这样的位置创建trash can了

<https://gitlab.gnome.org/GNOME/glib/-/commit/d1eaf72c001279aa15a2135a0749ef864c8edb42>
```
      if (mount == NULL || g_unix_mount_is_system_internal (mount))
        {
          g_set_error (error, G_IO_ERROR, G_IO_ERROR_NOT_SUPPORTED,
                       _("Trashing on system internal mounts is not supported"));

          g_clear_pointer (&mount, g_unix_mount_free);
          g_free (topdir);

          return FALSE;
        }

```
一个办法是修改glib

```
sudo apt-get install dh-exec dh-apache2
The following NEW packages will be installed:
  apache2-dev dh-exec libaprutil1-dev libldap-dev libldap2-dev

sudo apt-get install dh-sequence-python3 dh-sequence-gnome gtk-doc-tools
Suggested packages:
  flit python3-build python3-tomli python3-installer docbook-defguide psgml
  dblatex
The following NEW packages will be installed:
  cowbuilder cowdancer dh-python dh-translations docbook docbook-to-man
  eatmydata git-buildpackage gnome-pkg-tools gtk-doc-tools libeatmydata1
  libsys-cpuaffinity-perl libxdelta2 pbuilder pbzip2 pixz pristine-tar scour
  xdelta xdelta3


apt-get source glib2.0
cd glib2.0-2.72.4
# 注释掉 /opt
sudo dpkg-buildpackage -rfakeroot -b
# 编译失败
```
行了，之前用 arch 的时候就发现了，u1804的二进制包确认是可以的，尝试直接安装依赖关系复杂也放弃。


挂载选项比如 `defaults,x-gvfs-show` `defaults,user_xattr,acl` 都是不行的


再一个办法是 /opt 软链接 到 某个 mount 节点

```
# /etc/fstab: static file system information.
#
# Use 'blkid' to print the universally unique identifier for a
# device; this may be used with UUID= as a more robust way to name devices
# that works even if disks are added and removed. See fstab(5).
#
# <file system> <mount point>   <type>  <options>       <dump>  <pass>
# / was on /dev/sda2 during installation
UUID=a6154c06-920c-46ee-bd82-214e7707ea4f /               ext4    errors=remount-ro      0       1
# /opt was on /dev/nvme1n1p1 during curtin installation
UUID=2e44b05b-3c28-49be-9fe9-7878471ff37a /opt-shadow            ext4    defaults       0       1
# /boot/efi was on /dev/nvme0n1p1 during installation
UUID=E80C-3410  /boot/efi       vfat    umask=0077      0       0
```

```
sudo chown $USER:$USER /opt/
chmod 755 /opt/
mv /opt/ 

//cp -Ra ###

在livecd重命名opt为opt-shadow  
sudo mv opt opt-shadow
sudo ln -s opt-shadow opt

```


---
# mint21 更新
```
sudo aptitude install libpipewire-0.3-0t64   （choose remove）
sudo apt-get install libnsl-dev libnsl-dev:i386 libtirpc-dev libtirpc-dev:i386
```


---
# unzip cp936
/etc/environment 添加
```
alias unzip='unzip -O cp936'
```

---
# trash-cli
```
sudo apt install trash-cli
```


---
# 恢复 wine 版本
```
sudo apt install libgl-dev libgl1-mesa-dev
sudo apt-get install --install-recommends --fix-missing --reinstall winehq-stable=8.0.2~jammy-1 wine-stable=8.0.2~jammy-1 wine-stable-amd64=8.0.2~jammy-1 wine-stable-i386=8.0.2~jammy-1
sudo apt-mark hold wine*
```

---
# vbox update
```
sudo apt install linux-headers-$(uname -r) build-essential dkms
sudo apt-get build-dep linux linux-image-unsigned-$(uname -r)
sudo apt-get install gcc-12 --install-recommends --fix-missing
sudo apt-get install linux-image-generic linux-headers-generic

sudo /sbin/vboxconfig
cat /var/log/vbox-setup.log

```
实际上6.8以上的kernel，用7.1版本的vbox才行

---
# apt-mark hold 
```
sudo apt-mark hold cuda cuda-drivers cudnn cudnn9 cudnn9-cuda-12 libcudnn9-cuda-12 libcudnn9-dev-cuda-12 libcudnn9-static-cuda-12 wine-stable wine-stable-amd64 wine-stable-i386:i386 winehq-stable
sudo apt remove cuda-cccl-12-9 cuda-crt-12-9 cuda-cudart-12-9 cuda-cudart-dev-12-9 cuda-driver-dev-12-9 cuda-nvcc-12-9 cuda-nvvm-12-9 cuda-toolkit-12-9-config-common
```


---
# git 忽略文件权限差异
```
git config core.filemode false
```


---
# dpkg-repack
```
sudo apt-get install dpkg-repack
```


---
# gcc 采用  gcc-12

Ubuntu22.04でAutoinstall of module nvidia/~ が失敗するときの対処法

<https://qiita.com/N622/items/3a0269a4c2d142dd029e>

```
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-12 100 --slave /usr/bin/g++ g++ /usr/bin/g++-12
sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-11 50 --slave /usr/bin/g++ g++ /usr/bin/g++-11
sudo update-alternatives --config gcc
```


---
# 
```

```


---
# 
```

```


---
# 
```

```


---
# 
```

```


---
# 
```

```


---
# 
```

```


---
# 
```

```


---
# 
```

```


